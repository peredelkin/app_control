"use strict";(self.webpackChunkvk=self.webpackChunkvk||[]).push([[21370],{946742:(e,t,r)=>{r.d(t,{apiAudioToAudioTuple:()=>n});var i=r(664988),o=r(659397),s=r(312523),a=r(552248);const n=e=>{var t,r,n,_,d,c;return e?[e.id,e.owner_id,e.url||"",(0,i.clean)(e.title),(0,i.clean)(e.artist||e.performer||""),e.duration,e.album_id||0,0,"",e.lyrics_id||0,0,"","[]",(0,s.getAudioHashesString)({addHash:e.access_key,editHash:e.access_key,actionHash:e.access_key,deleteHash:e.access_key,replaceHash:e.access_key,urlHash:e.access_key,restoreHash:e.access_key}),(null==(t=(0,o.getPhotoSize)((null==(n=e.album)||null==(r=n.thumb)?void 0:r.sizes)||[],(0,a.getImageMinWidth)(200)))?void 0:t.url)||"",e.ads||{},(0,i.clean)(e.subtitle||""),e.main_artists||"",e.featured_artists||"",!!e.album&&[null==(_=e.album)?void 0:_.owner_id,null==(d=e.album)?void 0:d.id,null==(c=e.album)?void 0:c.access_key],e.track_code||"",e.content_restricted||0,e.album_part_number||0,!0,e.access_key||"",e.audio_chart_info||!1,""]:null}},129834:(e,t,r)=>{r.d(t,{AUDIO_PLAYER_ADAPTER_HASHES_SEPARATOR:()=>i});const i="/"},312523:(e,t,r)=>{r.d(t,{getAudioHashesString:()=>o});var i=r(129834);const o=({addHash:e,editHash:t,actionHash:r,deleteHash:o,replaceHash:s,urlHash:a,restoreHash:n})=>[e||"",t||"",r||"",o||"",s||"",a||"",n||""].join(i.AUDIO_PLAYER_ADAPTER_HASHES_SEPARATOR)},300886:(e,t,r)=>{r.d(t,{isUserAuthorized:()=>o});var i=r(931917);function o(){var e,t;const r=(null==(t=window)||null==(e=t.vk)?void 0:e.id)||0;return!i.Ranges.isZeroOwner(r)}},172721:(e,t,r)=>{r.d(t,{apiFaveAddNarrative:()=>o,apiFaveRemoveNarrative:()=>s});var i=r(599809);function o(e){return(0,i.api)("fave.addNarrative",e)}function s(e){return(0,i.api)("fave.removeNarrative",e)}},65856:(e,t,r)=>{r.d(t,{createFaveService:()=>i.createFaveService});r(172721);var i=r(34570)},34570:(e,t,r)=>{r.d(t,{createFaveService:()=>s});var i=r(798116),o=r(172721);const s=({domain:e})=>{const t=e.createEvent("fire/faveAddNarrative"),r=e.createEvent("fire/faveRemoveNarrative"),s=e.createEffect("fx/faveAddNarrative"),a=e.createEffect("fx/faveRemoveNarrative");return s.use(o.apiFaveAddNarrative),a.use(o.apiFaveRemoveNarrative),(0,i.sample)({clock:t,target:s}),(0,i.sample)({clock:r,target:a}),{fireAddNarrative:t,fireRemoveNarrative:r,addNarrativeFx:s,removeNarrativeFx:a}}},558719:(e,t,r)=>{r.d(t,{findOwnerById:()=>s,isGroup:()=>o});var i=r(723062);function o(e){return i.Ranges.isGroupId(e.id)}const s=(e=0,t=[],r=[])=>{if(e)return i.Ranges.isUserId(e)?t.find((t=>{var r;return(null==(r=t)?void 0:r.id)===e})):r.find((t=>{var r;return(null==(r=t)?void 0:r.id)===Math.abs(e)}))}},517366:(e,t,r)=>{var i,o,s,a,n,_,d;r.d(t,{StickerTypes:()=>_,StoryBlockType:()=>a,StoryEntryPoint:()=>o,StoryListName:()=>n,StorySource:()=>s,StoryStickerSubtype:()=>d,StoryType:()=>i}),function(e){e.PHOTO="photo",e.VIDEO="video",e.LIVE="live"}(i||(i={})),function(e){e.SWIPE="swipe",e.NAVIGATION_BUTTON="navigation_button",e.SIT_POSTING="sit_posting",e.LINK="link",e.STORY_REPLY="story_reply",e.STORY_REPOST="story_repost",e.CATALOG_ADD="catalog_add",e.DIALOG="dialog",e.STORY_LIVE_FINISHED="story_live_finished",e.DIALOG_VKME="dialog_vkme",e.STORY_VIEWER_FINISHED="story_viewer_finished",e.PUSH_TRY_MASK="push_try_mask",e.STORY_VIEWER_TRY_MASK="story_viewer_try_mask",e.LINK_MASK="link_mask",e.POSTING="posting",e.NEW_STORY_AVATAR="new_story_avatar",e.STORY_REPLIES_LIST="story_replies_list",e.STORIES_FEED="stories_feed",e.STORIES_SEARCH_NEWS="stories_search_news",e.QUESTION_STICKER="question_sticker",e.LIST_MIDDLE="list_middle",e.ARCHIVE_EMPTY_BUTTON="archive_empty_button",e.ARCHIVE_MENU_BUTTON="archive_menu_button",e.IM="im",e.PROFILE_BUTTON="profile_button",e.SHARE="share",e.MINI_APP="mini_app",e.SYSTEM_SHARING="system_sharing",e.SHORTCUT="shortcut",e.ARCHIVE_SHARING="archive_sharing",e.STORY_VIEWER_CAMERA_BUTTON="story_viewer_camera_button",e.STORY_VIEWER_MUSIC="story_viewer_music",e.STORY_VIEWER_MUSIC_SHEET="story_viewer_music_sheet",e.REPOST_TO_STORY_ACTIVITY="repost_to_story_activity",e.CHANGE_AVATAR="change_avatar"}(o||(o={})),function(e){e.FEED="feed",e.FEED_MIDDLE="feed_middle",e.LINK="link",e.PROFILE="profile",e.IM_DIALOGS="im_dialogs",e.IM_DIALOG_HEADER="im_dialog_header",e.SNIPPET="snippet",e.REPLY="reply",e.REPLIES_LIST="replies_list",e.REPLY_STORY="reply_story",e.DISCOVER="discover",e.STORIES_MANAGE="stories_manage",e.USER_PERSONAL_CARD="user_personal_card",e.GROUP_PERSONAL_CARD="group_personal_card",e.NARRATIVE_SNIPPET="narrative_snippet",e.NARRATIVE_STORY="narrative_story",e.NARRATIVE_LINK="narrative_link",e.NARRATIVE_RECOMMENDATIONS="narrative_recommendations",e.NARRATIVE_SECTION="narrative_section",e.FAVE="fave",e.SPAMFEED="sf",e.ADS_PREVIEW="ads_preview",e.LIST_MIDDLE="list_middle",e.PLACE_STORY_LIST="place_story_list",e.SEARCH_STORY_LIST="search_story_list",e.STORY_ARCHIVE="story_archive",e.IM_MSG_LIST="im_msg_list",e.NOSPAM="nospam",e.PROFILE_SNACKBAR="profile_snackbar",e.MY_QUESTIONS="question_story"}(s||(s={})),function(e){e.stories="stories",e.appGroupedStories="app_grouped_stories",e.discover="discover"}(a||(a={})),function(e){e.feed="feed",e.apps="apps",e.discover="discover"}(n||(n={})),function(e){e[e.hashtag=1]="hashtag",e[e.mention=2]="mention",e[e.question=3]="question",e[e.place=4]="place",e[e.music=5]="music",e[e.storyReply=6]="storyReply",e[e.owner=7]="owner",e[e.link=8]="link",e[e.marketItem=9]="marketItem",e[e.post=10]="post",e[e.poll=11]="poll",e[e.sticker=12]="sticker",e[e.app=13]="app",e[e.situationalTheme=14]="situationalTheme",e[e.playlist=15]="playlist",e[e.videoButton=16]="videoButton"}(_||(_={})),function(e){e.aliexpress="aliexpress_product",e.market="market_item"}(d||(d={}))},389920:(e,t,r)=>{r.d(t,{apiLikesAdd:()=>o,apiLikesDelete:()=>s});var i=r(599809);function o(e){return(0,i.api)("likes.add",e)}function s(e){return(0,i.api)("likes.delete",e)}},274857:(e,t,r)=>{var i;!function(e){e.Story="story"}(i||(i={}))},655555:(e,t,r)=>{r.d(t,{createLikesService:()=>i.createLikesService});var i=r(202269);r(389920),r(274857)},202269:(e,t,r)=>{r.d(t,{createLikesService:()=>s});var i=r(798116),o=r(389920);const s=({domain:e})=>{const t=e.createEvent("fire/likesAdd"),r=e.createEvent("fire/likesDelete"),s=e.createEffect("fx/likesAdd"),a=e.createEffect("fx/likesDelete");return s.use(o.apiLikesAdd),a.use(o.apiLikesDelete),(0,i.sample)({clock:t,target:s}),(0,i.sample)({clock:r,target:a}),{fireAdd:t,fireDelete:r,addFx:s,deleteFx:a}}},543384:(e,t,r)=>{r.d(t,{apiMessagesSend:()=>o});var i=r(599809);function o(e){return(0,i.api)("messages.send",e)}},105338:(e,t,r)=>{r.d(t,{createMessagesService:()=>i.createMessagesService});r(543384);var i=r(429128)},429128:(e,t,r)=>{r.d(t,{createMessagesService:()=>s});var i=r(798116),o=r(543384);const s=({domain:e})=>{const t=e.createEvent("fire/messageSend"),r=e.createEffect("fx/messageSend");return r.use(o.apiMessagesSend),(0,i.sample)({clock:t,target:r}),{fireMessagesSend:t,sendFx:r}}},494810:(e,t,r)=>{r.d(t,{apiNarrativesBatchEdit:()=>a,apiNarrativesCreate:()=>o,apiNarrativesDelete:()=>n,apiNarrativesEdit:()=>s,apiNarrativesGetById:()=>_,apiNarrativesGetFeedBlock:()=>d,apiNarrativesGetFromOwner:()=>c,apiNarrativesReorder:()=>p,apiNarrativesSaveCustomCover:()=>l});var i=r(599809);function o(e){return(0,i.api)("narratives.create",e)}function s(e){return(0,i.api)("narratives.edit",e)}function a(e){return(0,i.api)("narratives.batchEdit",e)}function n(e){return(0,i.api)("narratives.delete",e)}function _(e){return(0,i.api)("narratives.getById",e)}function d(e={}){return(0,i.api)("narratives.getFeedBlock",e)}function c(e){return(0,i.api)("narratives.getFromOwner",e)}function l(e){return(0,i.api)("narratives.saveCustomCover",e)}function p(e){return(0,i.api)("narratives.reorder",e)}},683313:(e,t,r)=>{r.d(t,{apiNarrativesGetById:()=>o.apiNarrativesGetById,apiNarrativesGetFeedBlock:()=>o.apiNarrativesGetFeedBlock,apiNarrativesGetFromOwner:()=>o.apiNarrativesGetFromOwner,createNarrativesService:()=>i.createNarrativesService});var i=r(382983),o=r(494810)},382983:(e,t,r)=>{r.d(t,{createNarrativesService:()=>s});var i=r(798116),o=r(494810);const s=({domain:e})=>{const t=e.createEvent("fire/narrativesGetById"),r=e.createEvent("fire/narrativesGetFromOwner"),s=e.createEvent("fire/narrativesGetFeedBlock"),a=e.createEvent("fire/narrativesCreate"),n=e.createEvent("fire/narrativesEdit"),_=e.createEvent("fire/narrativesBatchEdit"),d=e.createEvent("fire/narrativesDelete"),c=e.createEvent("fire/narrativesSaveCustomCover"),l=e.createEvent("fire/narrativesReorder"),p=e.createEffect("fx/narrativesGetById"),u=e.createEffect("fx/narrativesGetFromOwner"),v=e.createEffect("fx/narrativesGetFeedBlock"),S=e.createEffect("fx/narrativesCreate"),f=e.createEffect("fx/narrativesEdit"),m=e.createEffect("fx/narrativesBatchEdit"),E=e.createEffect("fx/narrativesDelete"),h=e.createEffect("fx/narrativesSaveCustomCover"),T=e.createEffect("fx/narrativesReorder");return p.use(o.apiNarrativesGetById),u.use(o.apiNarrativesGetFromOwner),v.use(o.apiNarrativesGetFeedBlock),S.use(o.apiNarrativesCreate),f.use(o.apiNarrativesEdit),m.use(o.apiNarrativesBatchEdit),E.use(o.apiNarrativesDelete),h.use(o.apiNarrativesSaveCustomCover),T.use(o.apiNarrativesReorder),(0,i.sample)({clock:t,target:p}),(0,i.sample)({clock:r,target:u}),(0,i.sample)({clock:s,target:v}),(0,i.sample)({clock:a,target:S}),(0,i.sample)({clock:n,target:f}),(0,i.sample)({clock:_,target:m}),(0,i.sample)({clock:d,target:E}),(0,i.sample)({clock:c,target:h}),(0,i.sample)({clock:l,target:T}),{fireGetById:t,fireGetFromOwner:r,fireGetFeedBlock:s,fireCreate:a,fireEdit:n,fireBatchEdit:_,fireDelete:d,fireSaveCustomCover:c,fireReorder:l,getByIdFx:p,getFromOwnerFx:u,getFeedBlockFx:v,createFx:S,editFx:f,batchEditFx:m,deleteFx:E,saveCustomCoverFx:h,reorderFx:T}}},888711:(e,t,r)=>{function i(e,t=","){return e&&e.length?e.reduce(((e,r)=>{const i="rawId"in r?r.rawId:`${r.owner_id}_${r.id}`;return i&&(e+=`${e.length?t:""}${i}`),e}),""):""}r.d(t,{joinNarrativeRawIds:()=>i})},654803:(e,t,r)=>{r.d(t,{PHOTO_ALBUM_COVER_MIN_WIDTH:()=>i,getPhotoSize:()=>o});const i=200;function o(e,t){var r,i,o,s;if(!(null==(i=e)||null==(r=i.sizes)?void 0:r.length))return"";const a=[...e.sizes].sort(((e,t)=>e.width-t.width));let n=a.find((e=>e.width>=t));return(null==(o=n)?void 0:o.url)?n.url:(n=a.reverse().find((e=>e.width<t)),(null==(s=n)?void 0:s.url)?n.url:"")}},630330:(e,t,r)=>{r.d(t,{apiPollsCreate:()=>s,apiPollsGetById:()=>o});var i=r(599809);function o(e){return(0,i.api)("polls.getById",e)}function s(e){return(0,i.api)("polls.create",e)}},527487:(e,t,r)=>{r.d(t,{createPollsService:()=>i.createPollsService});r(630330);var i=r(892883)},892883:(e,t,r)=>{r.d(t,{createPollsService:()=>s});var i=r(798116),o=r(630330);const s=({domain:e})=>{const t=e.createEvent("fire/pollsGetById"),r=e.createEvent("fire/pollsCreate"),s=e.createEffect("fx/pollsGetById"),a=e.createEffect("fx/pollsCreate");return s.use(o.apiPollsGetById),a.use(o.apiPollsCreate),(0,i.sample)({clock:t,target:s}),(0,i.sample)({clock:r,target:a}),{fireGetById:t,fireCreate:r,getByIdFx:s,createFx:a}}},362641:(e,t,r)=>{r.d(t,{getEnabledMvkTabs:()=>u,getEnabledWebTabs:()=>l,getMainDataLoadParams:()=>n,getOwnerContentTabsDataRequestParams:()=>d,getSupportedMvkTabs:()=>p,getSupportedWebTabs:()=>c,getViewerDataLoadParams:()=>_,makeUserFields:()=>s});var i=r(13112),o=r(300886);function s(e){return e.join(",")}const a=s(["age_mark","is_sber_verified","is_tinkoff_verified","is_esia_verified","can_ban","can_see_gifts","followers_count","no_index","about","activities","activity","bdate","no_index","blacklisted","blacklisted_by_me","books","buttons","can_call","can_invite_to_chats","can_post","can_see_all_posts","can_see_wishes","can_send_friend_request","can_subscribe_stories","can_write_private_message","career","city","connections","counters","country","emoji_status","first_name_acc","first_name_dat","first_name_gen","first_name_ins","friend_status","games","gifts_tooltip","has_photo","home_town","image_status","interests","is_dead","is_favorite","is_hidden_from_feed","is_subscribed","is_subscribed_stories","last_name_acc","last_name_dat","last_name_gen","last_name_ins","last_seen","military","movies","music","mutual","occupation","online","online_info","owner_state","personal","quotes","relation","relatives","schools","screen_name","social_button_type","domain","sex","site","status","trending","tv","universities","verified","video_live","wall_default","bdate_visibility","contacts","photo_max","photo_medium_rec","photo_rec","can_ask_question","can_subscribe_posts","cover","first_name_nom","lists","maiden_name","nickname","photo_200","photo_400","photo_avg_color","photo_id","photo_max_size","profile_buttons","stories_archive_count","third_party_buttons","service_description","is_best_friend","is_nft","is_followers_mode_on","is_personal_ads_easy_promote_enabled"]);function n(e,t,r){const i=e===t,o={"photos.get":{owner_id:e,album_id:"profile",rev:1,count:1},"users.getSubscriptions":{fields:s(["photo_200","photo_100","description","status","is_nft"]),count:5,extended:1,user_id:e},"users.getFollowers":{fields:s(["photo_200","photo_100","photo_50","is_friend","sex"]),count:i?8:3,user_id:e},"gifts.get":{user_id:e,count:6}};return t&&(r.withoutFriends||(o["friends.get"]={user_id:e,count:12,fields:s(["domain","photo_100","photo_200","online","is_nft"]),order:"hints"}),o["stories.get"]={owner_id:e},o["account.getHelpHints"]={}),i&&(o["friends.getRequests"]={need_count:1,count:3,need_viewed:0,fields:s(["photo_100","photo_200","sex"]),extended:1},r.withOnlineFriends&&(o["friends.getOnline"]={user_id:e,count:8,order:"hints"}),o["account.getPrivacySettings"]={privacy_keys:"friends_requests,audios,stories,gifts",need_default:0},o["account.getSilentModeStatus"]={}),r.withoutUser||(o["users.get"]={user_ids:e.toString(),fields:a}),o}function _(e){return{user_ids:String(e),fields:s(["is_followers_mode_on","social_button_type"])}}function d(e,t,r={}){const o={};return t.forEach((t=>{switch(t){case"photos":r.isPhotoFeedEnabled?o["photos.photoFeedGet"]={owner_id:e,extended:1,photo_sizes:1,count:6}:o["photos.getAll"]={owner_id:e,photo_sizes:1,extended:1,skip_hidden:1};break;case"videos":o["video.get"]={owner_id:e,need_privacy:1,count:9};break;case"music":o["audio.get"]={owner_id:e,photo_sizes:1,count:8},o["audio.getPlaylists"]={owner_id:e,photo_sizes:1,count:9};break;case"short_videos":o["shortVideo.getOwnerVideos"]={owner_id:e,count:9};break;case"articles":o["articles.getOwnerPublished"]={owner_id:e,count:3};break;case"narratives":o["narratives.getFromOwner"]={owner_id:e,limit:9};break;case"nfts":{const t=(0,i.getEnvConfigValue)("nft_profile_content_count");o["nft.getCollection"]={owner_id:e,limit:t||9};break}case"albums":o["photos.getAlbums"]={owner_id:e,count:9,need_system:1,need_covers:1,photo_sizes:1}}})),o}function c(){const e=(0,o.isUserAuthorized)(),t=e?["photos","short_videos","videos","music","articles","narratives","nfts"]:["short_videos","articles"];return(0,i.isEnvConfigEnabled)("profile_enable_album_tabs")&&e&&t.push("albums"),t}function l(){const e=(0,o.isUserAuthorized)(),t=e?["photos","short_videos","music","articles","nfts"]:["short_videos","articles"];return(0,i.isEnvConfigEnabled)("profile_enable_album_tabs")&&e&&t.push("albums"),t}function p(){const e=(0,o.isUserAuthorized)(),t=e?["photos","short_videos","videos","music","narratives","articles","nfts"]:["short_videos"];return(0,i.isEnvConfigEnabled)("profile_enable_album_tabs")&&e&&t.push("albums"),t}function u(){const e=(0,o.isUserAuthorized)(),t=e?["photos","short_videos","videos","music","narratives","articles","nfts"]:["short_videos"];return(0,i.isEnvConfigEnabled)("profile_enable_album_tabs")&&e&&t.push("albums"),t}},852063:(e,t,r)=>{r.d(t,{apiStatsTrackEvents:()=>o});var i=r(599809);function o(e){return(0,i.api)("stats.trackEvents",e)}},168298:(e,t,r)=>{r.d(t,{STATS_EVENT_TYPE_STORIES_VIEWER_NAVIGATION:()=>i,STATS_EVENT_TYPE_STORIES_VIEWING_START_TIME:()=>o,STATS_EVENT_TYPE_VIDEO_ONBOARDING:()=>s});const i="stories_viewer_navigation",o="stories_viewing_start_time",s="video_onboarding"},697227:(e,t,r)=>{r.d(t,{STATS_EVENT_TYPE_VIDEO_ONBOARDING:()=>i.STATS_EVENT_TYPE_VIDEO_ONBOARDING,apiStatsTrackEvents:()=>o.apiStatsTrackEvents,createStatsService:()=>s.createStatsService});var i=r(168298),o=r(852063),s=r(513234)},513234:(e,t,r)=>{r.d(t,{createStatsService:()=>s});var i=r(798116),o=r(852063);const s=({domain:e})=>{const t=e.createEvent("fire/statsTrackEvents"),r=e.createEffect("fx/statsTrackEvents");return r.use(o.apiStatsTrackEvents),(0,i.sample)({clock:t,target:r}),{fireTrackEvents:t,trackEventsFx:r}}},911622:(e,t,r)=>{r.d(t,{apiStoriesAskQuestion:()=>h,apiStoriesBanQuestionAuthor:()=>g,apiStoriesDelete:()=>E,apiStoriesDeleteQuestion:()=>T,apiStoriesGet:()=>o,apiStoriesGetArchive:()=>n,apiStoriesGetById:()=>s,apiStoriesGetDetailedStats:()=>p,apiStoriesGetDiscover:()=>a,apiStoriesGetPhotoUploadServer:()=>k,apiStoriesGetQuestions:()=>c,apiStoriesGetReplies:()=>d,apiStoriesGetStats:()=>l,apiStoriesGetVideoUploadServer:()=>y,apiStoriesGetViewers:()=>_,apiStoriesHidePrivacyBlock:()=>m,apiStoriesMarkAppNotificationsSeen:()=>I,apiStoriesMarkNotInterested:()=>v,apiStoriesMarkSeen:()=>f,apiStoriesMarkSkipped:()=>u,apiStoriesSave:()=>w,apiStoriesSearch:()=>S,apiStoriesSubscribeUserToApp:()=>N,apiStoriesUnbanQuestionAuthor:()=>A});var i=r(599809);function o(e){return(0,i.api)("stories.get",e)}function s(e){return(0,i.api)("stories.getById",e)}function a(e){return(0,i.api)("stories.getDiscover",e)}function n(e){return(0,i.api)("stories.getArchive",e)}function _(e){return(0,i.api)("stories.getViewers",e)}function d(e){return(0,i.api)("stories.getReplies",e)}function c(e){return(0,i.api)("stories.getQuestions",e)}function l(e){return(0,i.api)("stories.getStats",e)}function p(e){return(0,i.api)("stories.getDetailedStats",e)}function u(e){return(0,i.api)("stories.markSkipped",e)}function v(e){return(0,i.api)("stories.markNotInterested",e)}function S(e){return(0,i.api)("stories.search",e)}function f(e){return(0,i.api)("stories.markSeen",e)}function m(e){return(0,i.api)("stories.hidePrivacyBlock",e)}function E(e){return(0,i.api)("stories.delete",e)}function h(e){return(0,i.api)("stories.askQuestion",e)}function T(e){return(0,i.api)("stories.deleteQuestion",e)}function g(e){return(0,i.api)("stories.banQuestionAuthor",e)}function A(e){return(0,i.api)("stories.unbanQuestionAuthor",e)}function I(e){return(0,i.api)("stories.markAppNotificationsSeen",e)}function N(e){return(0,i.api)("stories.subscribeUserToApp",e)}function k(e){return(0,i.api)("stories.getPhotoUploadServer",e)}function y(e){return(0,i.api)("stories.getVideoUploadServer",e)}function w(e){return(0,i.api)("stories.save",e)}},446731:(e,t,r)=>{r.d(t,{STORIES_ARCHIVE_START_TIME:()=>o,StoriesLoadMethods:()=>s,getStoriesLoadParams:()=>a});var i=r(362641);const o=1559032200;var s;!function(e){e[e.getViewers=0]="getViewers",e[e.getReplies=1]="getReplies",e[e.getQuestions=2]="getQuestions",e[e.getDetailedStats=3]="getDetailedStats",e[e.getStats=4]="getStats"}(s||(s={}));const a=(e,t)=>({0:{owner_id:e,story_id:t,extended:1,count:100,fields:(0,i.makeUserFields)(["domain","photo_100"])},1:{owner_id:e,story_id:t,extended:1,fields:(0,i.makeUserFields)(["is_nft","domain","photo"])},2:{owner_id:e,story_id:t,extended:1,fields:(0,i.makeUserFields)(["domain","first_name_dat","first_name_ins","last_name_ins","last_name_dat","first_name_gen","last_name_gen"]),count:30},3:{owner_id:e,story_id:t},4:{owner_id:e,story_id:t}})},332268:(e,t,r)=>{r.d(t,{STORIES_ARCHIVE_START_TIME:()=>n.STORIES_ARCHIVE_START_TIME,StoriesLoadMethods:()=>n.StoriesLoadMethods,apiStoriesGet:()=>a.apiStoriesGet,apiStoriesGetArchive:()=>a.apiStoriesGetArchive,apiStoriesGetById:()=>a.apiStoriesGetById,apiStoriesGetDiscover:()=>a.apiStoriesGetDiscover,apiStoriesGetReplies:()=>a.apiStoriesGetReplies,apiStoriesSearch:()=>a.apiStoriesSearch,clearStoriesLoadingStats:()=>s.clearStoriesLoadingStats,clearStoriesNavigationStats:()=>s.clearStoriesNavigationStats,createStoriesService:()=>i.createStoriesService,decodeBase64:()=>o.decodeBase64,getConnectionType:()=>s.getConnectionType,getStoriesLoadParams:()=>n.getStoriesLoadParams,getStoriesLoadingStats:()=>s.getStoriesLoadingStats,getStoriesNavigationStats:()=>s.getStoriesNavigationStats,saveNavigationStatEvent:()=>s.saveNavigationStatEvent,saveViewerStartTime:()=>s.saveViewerStartTime,serializeLoadingStats:()=>s.serializeLoadingStats,serializeNavigationStats:()=>s.serializeNavigationStats,splitStoryRawId:()=>o.splitStoryRawId,statsService:()=>_.statsService,storiesService:()=>_.storiesService});var i=r(558231),o=r(477932),s=r(386694),a=r(911622),n=r(446731),_=r(735369)},542313:(e,t,r)=>{r.d(t,{fetchList:()=>T,parseExtra:()=>A});var i=r(945136),o=r(332268),s=r(683313),a=r(677662),n=r(404145),_=r(888711);const d=/^feed$/,c=/^discover$/,l=/(-?\d+)_(\d+)/,p=/^owner_feed(-?\d+)/,u=/^replies(-?\d+)_(\d+)/,v=/^narrative(-?\d+)_(\d+)$/,S=/^narratives(-?\d+)$/,f=/^recommended_narratives$/,m=/^archive(?:(-?\d+)_)?([0-9]+)/,E=/^search_([\w|-]+)/,h=/^place(\d+)/;function T(e,t){const r=[];let T=e.match(d);if(T)return(0,o.apiStoriesGet)({fields:(0,a.getOwnerFields)(),extended:1}).then((t=>{var o;return{list:(0,i.transformStoryGetApiResponseToLegacyFormat)(t,e,r,(0,n.isMvk)()),nextFrom:(null==(o=t)?void 0:o.next_from)||""}}));var A,I,N;if(T=e.match(c),T)return(0,o.apiStoriesGetDiscover)({count:null==(A=t)?void 0:A.count,track_code:null==(I=t)?void 0:I.trackCode,start_from:null==(N=t)?void 0:N.startFrom,fields:(0,a.getOwnerFields)(),extended:1}).then((t=>{var o;return{list:(0,i.transformStoryGetApiResponseToLegacyFormat)(t,e,r,(0,n.isMvk)()),nextFrom:(null==(o=t)?void 0:o.next_from)||""}}));if(T=e.match(p),T){const t=Number(T[1]);return t?(0,o.apiStoriesGet)({owner_id:t,fields:(0,a.getOwnerFields)(),extended:1}).then((t=>{var o;return{list:(0,i.transformStoryGetApiResponseToLegacyFormat)(t,e,r,(0,n.isMvk)()),nextFrom:(null==(o=t)?void 0:o.next_from)||""}})):Promise.reject("empty ownerId")}if(T=e.match(u),T){const t=Number(T[1]),s=Number(T[2]);return t&&s?(0,o.apiStoriesGetReplies)({owner_id:t,story_id:s,fields:(0,a.getOwnerFields)(),extended:1}).then((t=>{var o;return{list:(0,i.transformStoryGetApiResponseToLegacyFormat)(t,e,r,(0,n.isMvk)()),nextFrom:(null==(o=t)?void 0:o.next_from)||""}})):Promise.reject("ownerId or storyId is empty")}if(T=e.match(v),T){const t=Number(T[1]),i=Number(T[2]);if(!t||!i)return Promise.reject("ownerId or narrativeId is empty");return g(e,`${t}_${i}`,r)}if(T=e.match(S),T){var k,y;const i=Number(T[1]);if(!i)return Promise.reject("ownerId is empty");let o=null==(k=t)?void 0:k.narrativeRawIds;return(null==(y=o)?void 0:y.length)?g(e,o,r):(0,s.apiNarrativesGetFromOwner)({owner_id:i,with_empty:0,limit:15}).then((t=>{var i,s;return o=(0,_.joinNarrativeRawIds)(null==(i=t)?void 0:i.items),(null==(s=o)?void 0:s.length)?g(e,o,r):Promise.reject("narrativeRawIds is empty")}))}if(T=e.match(f),T){var w,O;let i=null==(w=t)?void 0:w.narrativeRawIds;return(null==(O=i)?void 0:O.length)?g(e,i,r):(0,s.apiNarrativesGetFeedBlock)().then((t=>{var o,s,a;return i=(0,_.joinNarrativeRawIds)(null==(s=t)||null==(o=s.block)?void 0:o.narratives),(null==(a=i)?void 0:a.length)?g(e,i,r):Promise.reject("narrativeRawIds is empty")}))}if(T=e.match(m),T){const t=T[1],s=Number(T[2]);return t?(0,o.apiStoriesGetArchive)({date:s}).then((t=>({list:(0,i.transformStoriesToLegacy)(t,e,r,(0,n.isMvk)())}))):Promise.reject("ownerId is empty")}if(T=e.match(l),T){var b;const s=Number(T[1]),_=Number(T[2]);if(!s||!_)return Promise.reject("ownerId or storyId is empty");const d=null==(b=t)?void 0:b.context;return"all"===d||"new"===d?(0,o.apiStoriesGet)({fields:(0,a.getOwnerFields)(),extended:1}).then((t=>({list:(0,i.transformStoryGetApiResponseToLegacyFormat)(t,e,r,(0,n.isMvk)())}))):(0,o.apiStoriesGetById)({stories:`${s}_${_}`,with_context:"owner"===d?1:0,fields:(0,a.getOwnerFields)(),extended:1}).then((t=>({list:(0,i.transformStoriesToLegacy)(t,e,r,(0,n.isMvk)())})))}if(T=e.match(E),T){var R;const s=T[1],_=null==(R=t)?void 0:R.situationalSuggestId;if(!s&&void 0===_)return Promise.reject("rawQuery or suggest id is empty");let d="";if(s){const e=s.replaceAll("-","+").replaceAll("_","/");d=(0,o.decodeBase64)(e)}return(0,o.apiStoriesSearch)({q:d,count:100,situational_suggest_id:_,fields:(0,a.getOwnerFields)(),extended:1}).then((t=>({list:(0,i.transformStoryGetApiResponseToLegacyFormat)(t,e,r,(0,n.isMvk)())})))}if(T=e.match(h),T){const t=Number(T[1]);return t?(0,o.apiStoriesSearch)({place_id:t,count:100,fields:(0,a.getOwnerFields)(),extended:1}).then((t=>({list:(0,i.transformStoryGetApiResponseToLegacyFormat)(t,e,r,(0,n.isMvk)())}))):Promise.reject("place id is empty")}return Promise.reject("unknown list")}function g(e="",t="",r=[]){return(0,s.apiNarrativesGetById)({narratives:t,fields:(0,a.getOwnerFields)(),extended:1}).then((t=>({list:(0,i.transformNarrativeGetApiResponseToLegacyFormat)(t,e,r,(0,n.isMvk)())})))}function A(e){const t={},r=String(e).split(";");for(let e of r){const[r,i]=e.split(":");r&&i&&(t[r]=i)}return t}},677662:(e,t,r)=>{function i(){return["first_name","last_name","first_name_gen","last_name_gen","first_name_ins","last_name_ins","screen_name","name","is_member","is_closed","is_nft","is_nft_photo","photo_50","photo_100","friend_status","verified","sex"].join(",")}r.d(t,{getOwnerFields:()=>i})},711279:(e,t,r)=>{r.d(t,{transformClickableStickers:()=>m});var i=r(659397),o=r(654198),s=r(850343),a=r(120718),n=r(946742),_=r(29271),d=r(654803),c=r(558719),l=r(571039),p=r(517366);const u={hashtag:p.StickerTypes.hashtag,mention:p.StickerTypes.mention,question:p.StickerTypes.question,place:p.StickerTypes.place,music:p.StickerTypes.music,story_reply:p.StickerTypes.storyReply,owner:p.StickerTypes.owner,link:p.StickerTypes.link,market_item:p.StickerTypes.marketItem,post:p.StickerTypes.post,poll:p.StickerTypes.poll,sticker:p.StickerTypes.sticker,app:p.StickerTypes.app,situational_theme:p.StickerTypes.situationalTheme,playlist:p.StickerTypes.playlist,clip:p.StickerTypes.videoButton},v={transparent:1,blue_gradient:2,red_gradient:3,underline:4,blue:5,green:6,white:7,question_reply:8,light:9,impressive:10,dark:11,accent_background:12,accent_text:13,dark_avatar:14,light_avatar:15,dark_meta:16,light_meta:17,light_text:18,dark_text:19},S=(e,t=6)=>isNaN(e)?NaN:Number(e.toFixed(t)),f=/^\[(id|club)(\d+)\|(.*)]$/;function m(e,t=[],r=[],m=[],E){var h,T,g;const A=null==(h=e)?void 0:h.clickable_stickers;if(!(A&&Object.values(A).length&&A.original_width&&A.original_height))return{original_width:0,original_height:0,stickers:[]};let I=A.original_width,N=A.original_height;Number((N/I).toFixed(2))>1.78&&(N=1.78*I);const k=(A.original_height-N)/2,y=I/100,w=N/100;return{original_width:I,original_height:N,stickers:(null==(g=A)||null==(T=g.clickable_stickers)?void 0:T.length)?A.clickable_stickers.reduce(((h,T)=>{if(!T)return h;const{clickable_area:g=[]}=T;if(g.length<4)return h;const A=Math.sqrt(Math.pow(g[1].x-g[0].x,2)+Math.pow(g[1].y-g[0].y,2)),I=Math.sqrt(Math.pow(g[1].x-g[2].x,2)+Math.pow(g[1].y-g[2].y,2));if(!A||!I)return h;const N=g[1].x-g[0].x;let O=180*Math.acos(N/A)/Math.PI;isNaN(O)&&(O=0),g[1].y<g[0].y&&(O=-O);const b=u[T.type],R={id:T.id,type:b,top:S((g[0].y-k)/w/100),left:S(g[0].x/y/100),width:S(A/y/100),height:S(I/w/100),rotate:S(O)};T.style&&(R.style=v[T.style]);let P=!1;switch(b){case p.StickerTypes.hashtag:T.hashtag?R.hashtag=T.hashtag:P=!0;break;case p.StickerTypes.mention:{var C,G,x;const e=null==(C=T.mention)?void 0:C.match(f),i=null==(G=e)?void 0:G[1],s=Number(null==(x=e)?void 0:x[2]);if(!s||isNaN(s)){P=!0;break}const a="id"===i&&t.find((({id:e})=>e===s)),n=!a&&"club"===i&&r.find((({id:e})=>e===s));a?(R.mentionedPhotoUrl=a.photo_100||a.photo_50||"",R.mentionedOwnerHref=(0,o.getOwnerHref)(a),R.mentionedText=(0,o.getOwnerFullName)(a)):n?(R.mentionedText=n.name||"",R.mentionedPhotoUrl=n.photo_100||n.photo_50||"",R.mentionedOwnerHref=(0,o.getOwnerHref)(n)):P=!0;break}case p.StickerTypes.question:R.question=T.question||"";break;case p.StickerTypes.place:T.place_id?R.placeId=T.place_id:P=!0;break;case p.StickerTypes.music:if(!T.audio){P=!0;break}var D,L,M;if(R.audioId=`${T.audio.owner_id}_${T.audio.id}`,R.audioData=JSON.stringify((0,n.apiAudioToAudioTuple)(T.audio)),T.audio_restrictions)R.audioRestriction={code:T.audio_restrictions.id,title:T.audio_restrictions.title,buttonText:(null==(D=T.audio_restrictions.button)?void 0:D.title)||"",buttonUrl:(null==(M=T.audio_restrictions.button)||null==(L=M.action)?void 0:L.url)||""};const u=m.find((e=>e.id===s.AvailableHelpHints.ACCOUNT_HINT_STORIES_MUSIC_ACTIONS));u&&(R.audioHint={id:s.AvailableHelpHints.ACCOUNT_HINT_STORIES_MUSIC_ACTIONS,hash:"",content:u.title||u.description||""});break;case p.StickerTypes.playlist:{if(!T.playlist){P=!0;break}R.playlistOwnerId=T.playlist.owner_id,R.playlistId=T.playlist.id,R.playlistFollowed=Boolean(T.playlist.followed);const e=m.find((e=>e.id===s.AvailableHelpHints.ACCOUNT_HINT_STORIES_PLAYLIST_ACTIONS));e&&(R.audioHint={id:s.AvailableHelpHints.ACCOUNT_HINT_STORIES_PLAYLIST_ACTIONS,hash:"",content:e.title||e.description||""});break}case p.StickerTypes.storyReply:T.owner_id&&(R.ownerId=T.owner_id),R.link=(0,o.getOwnerHref)((0,c.findOwnerById)(T.owner_id,t,r)),T.story_id?R.storyId=T.story_id:R.isExpired=!0;break;case p.StickerTypes.owner:T.owner_id&&(R.ownerId=T.owner_id),R.link=(0,o.getOwnerHref)((0,c.findOwnerById)(T.owner_id,t,r));break;case p.StickerTypes.link:T.link_object?(R.link=T.link_object.url?(0,l.wrapAwayIfExternal)(T.link_object.url):"",R.tooltipText=T.tooltip_text||""):P=!0;break;case p.StickerTypes.marketItem:var B;if(T.subtype===p.StoryStickerSubtype.aliexpress)R.link=(null==(B=T.link_object)?void 0:B.url)?(0,l.wrapAwayIfExternal)(T.link_object.url):"",R.photoUrl=T.link_object&&(0,d.getPhotoSize)(T.link_object.photo,50*devicePixelRatio)||"";else if(T.subtype===p.StoryStickerSubtype.market&&T.market_item){var F;if(R.photoUrl=T.market_item.thumb&&(null==(F=(0,i.getPhotoSize)(T.market_item.thumb,50*devicePixelRatio))?void 0:F.url)||"",R.isRestricted=!1,E)R.link=`/product${T.market_item.owner_id}_${T.market_item.id}`;else{const e=(0,o.getOwnerHref)((0,c.findOwnerById)(T.market_item.owner_id,t,r));R.link=`${e}?w=product${T.market_item.owner_id}_${T.market_item.id}`}}else P=!0;break;case p.StickerTypes.post:T.post_owner_id&&(R.postOwnerId=T.post_owner_id),T.post_id?R.postId=T.post_id:P=!0;break;case p.StickerTypes.poll:T.poll?(R.pollId=T.poll.id,R.pollOwnerId=T.poll.owner_id):P=!0;break;case p.StickerTypes.app:if(T.app){R.appId=T.app.id,R.hasNewInteractions=Boolean(T.has_new_interactions);const t=[e.owner_id,e.id,"story",T.id];T.app_context&&t.push(btoa(T.app_context)),R.appRef=`story${t.join("_")}`}else P=!0;break;case p.StickerTypes.sticker:T.sticker_pack_id?(R.stickerPackId=T.sticker_pack_id,T.sticker_id&&(R.stickerId=T.sticker_id),R.tooltipText=_.getLang("stories_view_sticker_pack")):P=!0;break;case p.StickerTypes.situationalTheme:T.situational_theme_id?(R.situationalAppId=a.SITPOSTING_APP_ID,R.situationalThemeId=T.situational_theme_id):P=!0;break;case p.StickerTypes.videoButton:T.clip_id?(T.owner_id&&(R.videoOwnerId=T.owner_id),R.videoId=T.clip_id,R.videoType=T.type,R.tooltipText=_.getLang("stories_link_attach_clip")):P=!0;break;default:P=!0}return P||h.push(R),h}),[]):[]}}},432025:(e,t,r)=>{r.d(t,{transformNarrative:()=>a});var i=r(659397),o=r(654198),s=(r(558719),r(230391));function a(e,t){var r,a;const n=`${e.owner_id}_${e.id}`,_=(0,o.isOwnerGroup)(t),d=_&&Boolean(t.is_closed),c={id:e.id,rawId:n,ownerId:e.owner_id,ownerName:(0,i.escape)((_?t.name:(0,o.getOwnerFullName)(t))||""),ownerShortName:(0,i.escape)((_?t.name:(0,o.getOwnerShortName)(t))||""),ownerUrl:(0,o.getOwnerHref)(t),ownerPath:`${_?"club":"id"}${e.owner_id}`,ownerAvatarUrl:t.photo_100||t.photo_50||"",title:(0,i.escape)(e.title),isBookmarked:e.is_favorite,bookmarkHash:"",reportHash:"",canEdit:Boolean(e.can_delete),editHash:"",canView:e.can_see,storiesCount:(null==(r=e.story_ids)?void 0:r.length)||0,isOwnerClosedGroup:d,isGroupEditor:d&&Boolean(t.is_admin),url:`${window.location.origin}/narrative${n}`,stories:(null==(a=e.stories)?void 0:a.map(s.transformStoryArchive))||[],isDeleted:e.is_delete,date:"",coverUrl:""};if(e.cover){var l;Object.assign(c,{coverUrl:e.cover.cropped_sizes&&(null==(l=(0,i.getPhotoSize)(e.cover.cropped_sizes,300))?void 0:l.url)||"",coverCrop:{x:e.cover.crop_x||0,y:e.cover.crop_y||0,width:e.cover.crop_width||0,height:e.cover.crop_height||0}}),e.cover.custom_photo&&(c.customCover=function(e,t=[]){var r,o,s,a;if(!e)return;return{photoId:e.id,originalPhotoUrl:(null==(r=e.orig_photo)?void 0:r.url)||e.sizes&&(null==(o=(0,i.getPhotoSize)(e.sizes,600))?void 0:o.url)||"",previewUrl:t&&(null==(s=(0,i.getPhotoSize)(t,300))?void 0:s.url)||e.sizes&&(null==(a=(0,i.getPhotoSize)(e.sizes,300))?void 0:a.url)||""}}(e.cover.custom_photo,e.cover.cropped_sizes));const t=e.cover.cover_story_id;if(t){var p;Object.assign(c,{coverStoryId:t,coverStoryRawId:`${e.owner_id}_${t}`});const r=null==(p=e.stories)?void 0:p.find((e=>{var r;return(null==(r=e)?void 0:r.id)===t}));r&&(c.coverStory=(0,s.transformStoryArchive)(r))}}return c}},230391:(e,t,r)=>{r.d(t,{transformStoryArchive:()=>n});var i=r(659397),o=r(332268),s=r(945136),a=r(571039);function n(e){var t,r,n,_;const d=Math.max(e.date?Math.ceil(new Date(1e3*e.date).setUTCHours(0,0,0,0)/1e3):0,o.STORIES_ARCHIVE_START_TIME),c=(null==(t=e.photo)?void 0:t.sizes)||(null==(r=e.video)?void 0:r.image),l={id:e.id,rawId:`${e.owner_id}_${e.id}`,listId:`archive${e.owner_id}_${d}`,time:Number(e.date),preview:c&&(null==(n=(0,i.getPhotoSize)(c,350))?void 0:n.url)||"",originalPreviewUrl:c&&(null==(_=(0,i.getPhotoSize)(c,600))?void 0:_.url)||""};return"video"===e.type&&e.video&&Object.assign(l,{videoUrl:e.video.files&&(0,s.getVideoSize)(e.video.files)||"",duration:e.video.duration}),e.link&&Object.assign(l,{linkUrl:(0,a.wrapAwayIfExternal)(e.link.url)||"",linkText:e.link.text||"",linkType:""}),l}},945136:(e,t,r)=>{r.d(t,{getVideoSize:()=>k,transformNarrativeGetApiResponseToLegacyFormat:()=>S,transformStoriesToLegacy:()=>h,transformStoryGetApiResponseToLegacyFormat:()=>v});var i=r(492269),o=r(172045),s=r(654198),a=r(29260),n=r(517366),_=r(29271),d=r(659397),c=r(664988),l=r(558719),p=r(711279),u=r(432025);function v(e,t,r,i){const{items:s,profiles:a=[],groups:_=[]}=e,d=s.map((e=>{var s,d,c,p,u;const S=e.owner_id||(null==(d=e.stories)||null==(s=d[0])?void 0:s.owner_id)||0,h=(0,l.findOwnerById)(S,a,_)||{id:S},T=(null==(c=e.stories)?void 0:c.filter(Boolean))||[],g=t===n.StoryListName.feed||t===n.StoryListName.discover||t===n.StoryListName.apps,A={id:e.id||(0,o.default)(),author:m(h,a,null==(p=T[0])?void 0:p.also_subscribed),has_unseen:e.has_unseen,items:T.map((e=>E(e,h,a,_,r,i,t))),track_code:e.track_code,can_blacklist:g,app:e.app&&f(e.app),type:e.type,send_mask_hash:"",remove_from_blacklist_hash:"",is_narrative:!1,is_apps:e.type===n.StoryBlockType.appGroupedStories,next_from:""};if((null==(u=e.grouped)?void 0:u.length)&&(A.grouped=v({items:e.grouped,profiles:a,groups:_},t,r,i)),i){const o=function(e,t,r,i,o,s,a){var n;const _=null==(n=e.stories)?void 0:n[0],d=e.app;if("app_grouped_stories"!==e.type||!_)return;const c=E(_,t,r,i,o,s,a);c.raw_id=c.raw_id+"&meta",c.is_apps_meta_story=!0,d&&(c.app=f(d));return c}(e,h,a,_,r,i,t);o&&A.items.push(o)}return A}));return d}function S(e,t,r,i){const{items:s,profiles:a=[],groups:_=[]}=e;return s.map((e=>{var s,d,c,p;const v=e.owner_id||(null==(d=e.stories)||null==(s=d[0])?void 0:s.owner_id)||0,S=(0,l.findOwnerById)(v,a,_)||{id:v},f=(null==(c=e.stories)?void 0:c.filter(Boolean))||[];return{id:(0,o.default)(),author:m(S,a,null==(p=f[0])?void 0:p.also_subscribed),items:f.map((e=>E(e,S,a,_,r,i,t))),can_blacklist:!1,type:n.StoryBlockType.stories,send_mask_hash:"",remove_from_blacklist_hash:"",is_apps:!1,next_from:"",is_narrative:!0,narrative:(0,u.transformNarrative)(e,S)}}))}function f(e){return{url:`/app${e.id}`,name:e.title,photoUrl:e.icon_139||e.icon_150||e.icon_75||""}}function m(e,t=[],r){const i=e.verified?'<div class="page_verified"></div>':"",o=function(e,t=[]){if(!e)return;const r=[],i=e.user_ids||[];return i.forEach((e=>{const i=t.find((t=>t.id===e));i&&r.push({photo_url:i.photo_50||i.photo_100||"",href:(0,s.getOwnerHref)(i),name:i.first_name||"",sex:i.sex||0})})),{total_count:e.count||0,owners:r}}(r,t);if((0,s.isOwnerUser)(e)){const t=e.id,r=e.first_name||"",a=e.last_name||"",n=e.first_name_gen||"",_=e.last_name_gen||"",c=e.first_name_ins||"",l=(0,s.getOwnerFullName)(e),p=a?`${n} ${_}`:n;return{id:t,name:(0,d.escape)(l),name_get:(0,d.escape)(p),firstName:(0,d.escape)(r),first_name_gen:(0,d.escape)(n),first_name_ins:(0,d.escape)(c),photo:e.photo_100||e.photo_50||"",href:(0,s.getOwnerHref)(e),verify:i,gender:e.sex||0,can_follow:g(e),nft:Boolean(e.is_nft),also_subscribed:o}}const a=-e.id,n=(0,d.escape)(e.name||"");return{id:a,name:n,name_get:n,firstName:n,first_name_gen:n,first_name_ins:n,photo:e.photo_100||e.photo_50||"",href:(0,s.getOwnerHref)(e),verify:i,gender:0,can_follow:g(e),nft:Boolean(e.is_nft_photo),also_subscribed:o}}function E(e,t,r,i,o,u,v){var S,f,m,E,h,g,w,O,b,R,P;let C,G;if(null==(S=e.mask)?void 0:S.owner_id){var x;const t=(0,l.findOwnerById)(null==(x=e.mask)?void 0:x.owner_id,r,i);t&&(C=t.screen_name,(0,s.isOwnerUser)(t)&&(G=t.sex))}const D=A(t,e),L=!D&&(v===n.StoryListName.feed||v===n.StoryListName.apps||v===n.StoryListName.discover);return{owner_id:e.owner_id,raw_id:`${e.owner_id}_${e.id}`,date:(0,_.getSmDate)(e.date||0),time:e.date||0,type:y(e),unread:!e.seen,canLike:Boolean(e.can_like),can_comment:Boolean(e.can_comment),can_share:Boolean(e.can_share),can_remove:I(e,t),can_manage:D,can_ask:Boolean(e.can_ask),can_ask_anonymous:Boolean(e.can_ask_anonymous),canAddToNarrative:e.can_use_in_narrative,stats:{follow:{event_type:"subscribe",rhash:""},url_view:{event_type:"url_view",rhash:""}},isLiked:Boolean(e.is_liked),likeHash:"",reaction_set_id:e.reaction_set_id||"",user_reaction_id:e.user_reaction_id||0,preview_url:"",needMute:Boolean(e.need_mute),muteReply:Boolean(e.mute_reply),isPromo:Boolean(e.is_promo),isProfileQuestion:Boolean(e.is_profile_question),promoCaption:e.is_promo&&e.caption||"",track_code:e.track_code||"",video:{owner_id:e.owner_id,video_id:(null==(f=e.video)?void 0:f.id)||0},link:e.link?{text:e.link.text||"",url:e.link.url||""}:void 0,isPartOfNarrative:Boolean(e.narratives_count),report_hash:"",maskOwnerDomain:C,maskOwnerSex:G,can_hide_reply:N(e,r,i),noSound:Boolean(e.no_sound),isNewQuestions:D&&Boolean(null==(m=e.questions)?void 0:m.new),views:Boolean(e.views)?(0,a.formatCount)(e.views||0):"",needShowEmptyStats:Boolean(e.need_show_empty_stats),is_expired:Boolean(e.is_expired),is_deleted:Boolean(e.is_deleted),is_private:!Boolean(e.can_see),isAds:Boolean(e.is_ads),isOneTime:Boolean(e.is_one_time),isOneTimeSeen:Boolean(e.is_one_time)&&!Boolean(e.can_see),seenProgress:0,replies:(null==(E=e.replies)?void 0:E.count)?(0,a.formatCount)(e.replies.count):"",replies_new_counter:(null==(h=e.replies)?void 0:h.new)||0,clickable_stickers:(0,p.transformClickableStickers)(e,r,i,o,u),askQuestionHash:"",share_hash:"",canMarkNotInterested:L,photo_url:(null==(g=e.photo)?void 0:g.sizes)&&(null==(w=(0,d.getPhotoSize)(e.photo.sizes,(0,c.isRetina)()?1200:600))?void 0:w.url)||"",small_preview:T(e),video_url:(null==(O=e.video)?void 0:O.files)?k(e.video.files):"",first_frame:(null==(b=e.video)?void 0:b.first_frame)&&(null==(R=(0,d.getPhotoSize)(null==(P=e.video)?void 0:P.first_frame,800))?void 0:R.url)||"",is_apps_meta_story:!1,repliesCountText:"",authorId:0,isMusicCover:!1,is_authors_ads:e.is_authors_ads,advertiser_info_url:e.advertiser_info_url,ad_marker:e.ad_marker,caption:e.caption}}function h(e,t,r,i){var s,a;const{items:_,profiles:d,groups:c}=e,p=(null==(s=_[0])?void 0:s.owner_id)||0,u=(0,l.findOwnerById)(p,d,c)||{id:p},v=t===n.StoryListName.feed||t===n.StoryListName.discover||t===n.StoryListName.apps,S=_.some((e=>!e.seen));return[{id:(0,o.default)(),author:m(u,d,null==(a=_[0])?void 0:a.also_subscribed),has_unseen:S,items:_.map((e=>E(e,u,d,c,r,i,t))),track_code:"",can_blacklist:v,type:n.StoryBlockType.stories,send_mask_hash:"",remove_from_blacklist_hash:"",is_narrative:!1,is_apps:!1,next_from:""}]}function T(e){var t,r;const i=null==(t=e.photo)?void 0:t.sizes;var o;if(i)return(null==(o=(0,d.getPhotoSize)(i,(0,c.isRetina)()?600:300))?void 0:o.url)||"";const s=null==(r=e.video)?void 0:r.first_frame;var a;return s&&(null==(a=(0,d.getPhotoSize)(s,320))?void 0:a.url)||""}function g(e){return(0,s.isOwnerUser)(e)?window.vk.id!==e.id&&(e.friend_status===i.FriendsFriendStatusStatusEnumNames.NOT_A_FRIEND||e.friend_status===i.FriendsFriendStatusStatusEnumNames.INCOMING_REQUEST):!e.is_member&&!e.is_closed}function A(e,t){return(0,s.isOwnerUser)(e)?t.owner_id===e.id&&window.vk.id===e.id:t.owner_id===-e.id&&(t.is_ads?Boolean(e.is_advertiser):Boolean(e.is_admin))}function I(e,t){return A(t,e)&&("photo"===e.type||"video"===e.type)&&!e.is_deleted}function N(e,t,r){if(!e.parent_story_owner_id||!e.parent_story_id)return!1;const i=window.vk.id,o=e.parent_story_owner_id;if(o===i)return!0;const a=(0,l.findOwnerById)(o,t,r);return!!(a&&(0,s.isOwnerGroup)(a)&&a.is_admin)}function k(e){const t=["mp4_2160","mp4_1440","mp4_1080","mp4_720","mp4_480","mp4_360","mp4_240","mp4_144"].find((t=>Boolean(e[t])));return t&&e[t]?String(e[t]):""}function y(e){return"photo"===e.type?n.StoryType.PHOTO:"video"===e.type?n.StoryType.VIDEO:"live_active"===e.type||"live_finished"===e.type?n.StoryType.LIVE:n.StoryType.PHOTO}},558231:(e,t,r)=>{r.d(t,{createStoriesService:()=>s});var i=r(798116),o=r(911622);const s=({domain:e})=>{const t=e.createEvent("fire/storiesGet"),r=e.createEvent("fire/storiesGetById"),s=e.createEvent("fire/storiesGetArchive"),a=e.createEvent("fire/storiesGetViewers"),n=e.createEvent("fire/storiesGetReplies"),_=e.createEvent("fire/storiesGetQuestions"),d=e.createEvent("fire/storiesGetStats"),c=e.createEvent("fire/storiesGetDetailedStats"),l=e.createEvent("fire/storiesMarkSkipped"),p=e.createEvent("fire/storiesMarkNotInterested"),u=e.createEvent("fire/storiesMarkSeen"),v=e.createEvent("fire/storiesHidePrivacyBlock"),S=e.createEvent("fire/storiesDelete"),f=e.createEvent("fire/storiesAskQuestion"),m=e.createEvent("fire/storiesDeleteQuestion"),E=e.createEvent("fire/storiesBanQuestionAuthor"),h=e.createEvent("fire/storiesUnbanQuestionAuthor"),T=e.createEvent("fire/storiesMarkAppNotificationsSeen"),g=e.createEvent("fire/storiesSubscribeUserToApp"),A=e.createEvent("fire/storiesGetPhotoUploadServer"),I=e.createEvent("fire/storiesGetVideoUploadServer"),N=e.createEvent("fire/storiesSave"),k=e.createEvent("fire/storiesSearch"),y=e.createEffect("fx/storiesGet"),w=e.createEffect("fx/storiesGetById"),O=e.createEffect("fx/storiesGetArchive"),b=e.createEffect("fx/storiesGetViewers"),R=e.createEffect("fx/storiesGetReplies"),P=e.createEffect("fx/storiesGetQuestions"),C=e.createEffect("fx/storiesGetStats"),G=e.createEffect("fx/storiesGetDetailedStats"),x=e.createEffect("fx/storiesMarkSkipped"),D=e.createEffect("fx/storiesMarkNotInterested"),L=e.createEffect("fx/storiesMarkSeen"),M=e.createEffect("fx/storiesHidePrivacyBlock"),B=e.createEffect("fx/storiesDelete"),F=e.createEffect("fx/storiesAskQuestion"),U=e.createEffect("fx/storiesDeleteQuestion"),V=e.createEffect("fx/storiesBanQuestionAuthor"),H=e.createEffect("fx/storiesUnbanQuestionAuthor"),K=e.createEffect("fx/storiesMarkAppNotificationsSeen"),W=e.createEffect("fx/storiesSubscribeUserToApp"),Y=e.createEffect("fx/storiesGetPhotoUploadServer"),$=e.createEffect("fx/storiesGetVideoUploadServer"),Q=e.createEffect("fx/storiesSave"),z=e.createEffect("fx/storiesSearch");return y.use(o.apiStoriesGet),w.use(o.apiStoriesGetById),O.use(o.apiStoriesGetArchive),b.use(o.apiStoriesGetViewers),R.use(o.apiStoriesGetReplies),P.use(o.apiStoriesGetQuestions),C.use(o.apiStoriesGetStats),G.use(o.apiStoriesGetDetailedStats),x.use(o.apiStoriesMarkSkipped),D.use(o.apiStoriesMarkNotInterested),L.use(o.apiStoriesMarkSeen),M.use(o.apiStoriesHidePrivacyBlock),B.use(o.apiStoriesDelete),F.use(o.apiStoriesAskQuestion),U.use(o.apiStoriesDeleteQuestion),V.use(o.apiStoriesBanQuestionAuthor),H.use(o.apiStoriesUnbanQuestionAuthor),K.use(o.apiStoriesMarkAppNotificationsSeen),W.use(o.apiStoriesSubscribeUserToApp),Y.use(o.apiStoriesGetPhotoUploadServer),$.use(o.apiStoriesGetVideoUploadServer),Q.use(o.apiStoriesSave),z.use(o.apiStoriesSearch),(0,i.sample)({clock:t,target:y}),(0,i.sample)({clock:r,target:w}),(0,i.sample)({clock:s,target:O}),(0,i.sample)({clock:a,target:b}),(0,i.sample)({clock:n,target:R}),(0,i.sample)({clock:_,target:P}),(0,i.sample)({clock:d,target:C}),(0,i.sample)({clock:c,target:G}),(0,i.sample)({clock:l,target:x}),(0,i.sample)({clock:p,target:D}),(0,i.sample)({clock:u,target:L}),(0,i.sample)({clock:v,target:M}),(0,i.sample)({clock:S,target:B}),(0,i.sample)({clock:f,target:F}),(0,i.sample)({clock:m,target:U}),(0,i.sample)({clock:E,target:V}),(0,i.sample)({clock:h,target:H}),(0,i.sample)({clock:T,target:K}),(0,i.sample)({clock:g,target:W}),(0,i.sample)({clock:A,target:Y}),(0,i.sample)({clock:I,target:$}),(0,i.sample)({clock:N,target:Q}),(0,i.sample)({clock:k,target:z}),{fireGet:t,fireGetById:r,fireGetArchive:s,fireGetViewers:a,fireGetReplies:n,fireGetQuestions:_,fireGetStats:d,fireGetDetailedStats:c,fireMarkSkipped:l,fireMarkNotInterested:p,fireMarkSeen:u,fireHidePrivacyBlock:v,fireDelete:S,fireAskQuestion:f,fireDeleteQuestion:m,fireBanQuestionAuthor:E,fireUnbanQuestionAuthor:h,fireMarkAppNotificationsSeen:T,fireSubscribeUserToApp:g,fireGetPhotoUploadServer:A,fireGetVideoUploadServer:I,fireSave:N,fireSearch:k,getFx:y,getByIdFx:w,getArchiveFx:O,getViewersFx:b,getRepliesFx:R,getQuestionsFx:P,getStatsFx:C,getDetailedStatsFx:G,markSkippedFx:x,markNotInterestedFx:D,markSeenFx:L,hidePrivacyBlockFx:M,deleteFx:B,askQuestionFx:F,deleteQuestionFx:U,banQuestionAuthorFx:V,unbanQuestionAuthorFx:H,markAppNotificationsSeenFx:K,subscribeUserToAppFx:W,getPhotoUploadServerFx:Y,getVideoUploadServerFx:$,saveFx:Q,searchFx:z}}},735369:(e,t,r)=>{r.d(t,{statsService:()=>u,storiesService:()=>p});var i=r(798116),o=r(332268),s=r(697227),a=r(683313),n=r(655555),_=r(105338),d=r(65856),c=r(527487);const l=(0,i.createDomain)("mvk/Stories"),p=(0,o.createStoriesService)({domain:l}),u=(0,s.createStatsService)({domain:l}),v=((0,a.createNarrativesService)({domain:l}),(0,n.createLikesService)({domain:l}),(0,_.createMessagesService)({domain:l}),(0,d.createFaveService)({domain:l}),(0,c.createPollsService)({domain:l}));l.createEffect("fire/storiesGetFeedback").use((({ownerId:e,storyId:t,pollId:r})=>{const i=(0,o.getStoriesLoadParams)(e,t);return Promise.allSettled([p.getViewersFx(i[o.StoriesLoadMethods.getViewers]),p.getRepliesFx(i[o.StoriesLoadMethods.getReplies]),p.getQuestionsFx(i[o.StoriesLoadMethods.getQuestions]),r?v.getByIdFx({owner_id:e,poll_id:r}):Promise.resolve(null),p.getDetailedStatsFx(i[o.StoriesLoadMethods.getDetailedStats]),p.getStatsFx(i[o.StoriesLoadMethods.getStats])]).then((e=>Promise.resolve(e.map((e=>{var t;return"fulfilled"===e.status?null==(t=e)?void 0:t.value:null})))))}))},477932:(e,t,r)=>{function i(e){var t,r;return(null!=(r=null==(t=e)?void 0:t.split("_"))?r:[]).map(Number)}function o(e,t="windows-1251"){return new TextDecoder(t).decode(function(e){const t=atob(e);return Uint8Array.from(t,(e=>e.codePointAt(0)||0))}(e))}r.d(t,{decodeBase64:()=>o,splitStoryRawId:()=>i})},964262:(e,t,r)=>{r.d(t,{createUserStackMaskIfNeeded:()=>E,fetchDiscover:()=>S,getStoryBlockKey:()=>m,getStoryList:()=>p,getVolume:()=>c,isDiscoverLoading:()=>f,isNewDesignEnabled:()=>h,preloadDiscoverList:()=>v,removeStoryList:()=>u,setVolume:()=>l});var i=r(517366),o=r(795558),s=r(839470),a=r(321850),n=r(69574),_=r(542313),d=r(584356);function c(){const e=window.ls.get("video_volume");return"number"==typeof e?Math.min(1,Math.max(0,e)):1}function l(e){window.ls.set("video_volume",e)}function p(e){return window.cur[`stories_list_${e}`]}function u(e){delete window.cur[`stories_list_${e}`]}function v(e=!1){if(window.cur.storiesDiscoverFetchingPromise)return window.cur.storiesDiscoverFetchingPromise;let t,r;const o=p(i.StoryListName.feed);return o&&(r=o.find((e=>e.type===i.StoryBlockType.discover)),r&&(t=r.track_code)),window.cur.storiesDiscoverFetchingPromise=S("",t,e).then((([e,t])=>(r&&(r.grouped=e,r.next_from=t),e))).finally((()=>{delete window.cur.storiesDiscoverFetchingPromise})),window.cur.storiesDiscoverFetchingPromise}function S(e="",t="",r=!1,o=15){if((0,n.isApiForVKCOMViewerEnabled)()){const s={count:o,startFrom:e,trackCode:t};return r&&(0,d.showBoxLoader)(),(0,_.fetchList)(i.StoryListName.discover,s).then((({list:e,nextFrom:t})=>[e,t])).finally((()=>{r&&(0,d.hideBoxLoader)()}))}return new Promise(((i,s)=>{window.ajax.post("al_stories.php",{act:"get_discover",start_from:e,count:o,track_code:t},{loader:r,onDone:(e,t)=>{i([e,t])},onFail:e=>(s(e),!0)})}))}function f(){return Boolean(window.cur.storiesDiscoverFetchingPromise)}function m(e){var t,r,i,o,s;return(null==(r=e)||null==(t=r.author)?void 0:t.id)&&(null==(o=e)||null==(i=o.narrative)?void 0:i.id)?`${e.author.id}narrative${null==(s=e.narrative)?void 0:s.id}`:`${e.id}`}function E(){const e="users_stack_stories_mask";let t=document.getElementById(e);t||(t=(0,o.se)(`\n        <svg width="0" height="0">\n          <defs>\n            <clipPath id="${e}">\n              <path transform="translate(1.5 0)" d="M1.20772 8C1.20772 6.32671 0.768742 4.75626 0 3.39821C1.44342 1.34278 3.8277 0 6.52463 0C10.9293 0 14.5 3.58172 14.5 8C14.5 12.4183 10.9293 16 6.52463 16C3.8277 16 1.44342 14.6572 0 12.6018C0.768742 11.2437 1.20772 9.6733 1.20772 8Z"></path>\n            </clipPath>\n          </defs>  \n        </svg>  \n      `),t&&(document.body.appendChild(t),(0,a.pushNavDestroy)((()=>{var e;null==(e=t)||e.remove()}))))}function h(){return(0,s.partConfigEnabled)("story_reactions_sending_feature_web")}},69574:(e,t,r)=>{r.d(t,{isApiForVKCOMViewerEnabled:()=>o});var i=r(839470);function o(){return(0,i.partConfigEnabled)("stories_web_api")}},42977:(e,t,r)=>{r.d(t,{BaseSexEnumNames:()=>i});const i={UNKNOWN:0,FEMALE:1,MALE:2}},492269:(e,t,r)=>{r.d(t,{FriendsFriendStatusStatusEnumNames:()=>i});const i={NOT_A_FRIEND:0,OUTCOMING_REQUEST:1,INCOMING_REQUEST:2,IS_FRIEND:3}},120718:(e,t,r)=>{r.d(t,{API_VERSION:()=>i,CLOSE_STATUS:()=>l,ERROR_CODES:()=>n,ERROR_REASONS:()=>_,ERROR_TYPES:()=>d,GROUP_STATUS:()=>p,NFT_APP_ID:()=>f,ORD_APP_ID:()=>S,PERMISSION_TYPES:()=>c,PLATFORM:()=>a,PMC_PART_CONFIG_KEY_LONG_ID:()=>g,SITPOSTING_APP_ID:()=>m,TEXTLIVE_APPS:()=>v,THROTTLE_SCROLL_TIME:()=>o,VKPAY_APPS:()=>u,VKPAY_TRANSACTION_EVENT:()=>s,VK_CONNECT_EVENTS:()=>h,VK_CONNECT_SUPERAPPKIT_EVENT_TYPE:()=>T,VMOJI_CONSTRUCTOR_APP_ID:()=>E});const i="5.95",o=200,s="VKWebAppActionDone",a={WEB:"web",MOBILE_WEB:"mobile-web"},n={UNKNOWN:1,MISSING_PARAM:2,OLD_MISSING_PARAM:100,CONNECTION_LOST:3,USER_DENIED:4,INVALID_PARAMS:5,UNSUPPORTED_PLATFORM:6,REQUESTS_LIMIT_REACHED:10,ACCESS_DENIED:11,CUSTOM:13,NO_ADS:20},_={ACCESS_DENIED:"Access denied",UNSUPPORTED_PLATFORM:"Unsupported platform",UNSUPPORTED_ACTION:"Unsupported action",NATIVE_APP_IS_NOT_INSTALLED:"VK client is not installed on device",USER_NOT_A_PRIVATE_GROUP_MEMBER:"User is not a member of the given private group",UNKNOWN_ERROR:"Unknown error",CONNECTION_LOST:"Connection lost",NETWORK_ERROR:"Network error",USER_DENIED:"User denied",INVALID_PARAMS:"Invalid params",NO_ADS:"No ads",ADS_ALREADY_PLAYED:"Ads already played",VK_PAY_DISABLED:"This app can't use VK Pay",SCROLL_SUBSCRIBER_ALREADY_EXIST:"Scroll subscriber already exist",SUBSCRIPTION_IS_ALREADY_CANCELLED:"Subscription is in invalid status: subscription is already cancelled",SURVEY_INIT_IN_PROGRESS:"Survey init in progress",SURVEY_ALREADY_INIT:"Survey already init",SURVEY_NO_MATCH:"Survey no match",SURVEY_USER_CANCEL:"Survey user cancel",ALREADY_IN_PROGRESS:"Already in progress",USER_IS_NOT_GROUP_ADMIN:"Only group admins have access to group tokens",DEVICE_CANT_GET_GEODATA:"Device can't get geodata",USER_DIDNT_ALLOWED_ACTION:"User didn't allowed"},d={CLIENT:"client_error",API:"api_error",AUTH:"auth_error"},c={DENIED:"denied",PROMPT:"prompt",GRANTED:"granted"},l=["success","failed"],p={OPEN:0,CLOSED:1,PRIVATE:2},u=[6217559,7131443],v=[7512376],S=51707812,f=51459963,m=7644481,E=7929683,h={VKWebAppAddToCommunity:"add_to_community",VKWebAppAddToCommunityPreload:"get_groups_list",VKWebAppAddToFavorites:"add_to_favorites",VKWebAppAddToFavoritesPreload:"already_added_to_favorites",VKWebAppAddToMenu:"add_to_menu",VKWebAppAddToMenuPreload:"is_in_left_menu",VKWebAppGetCommunityToken:"get_community_token",VKWebAppGetCommunityTokenPreload:"get_community_preload_settings",VKWebAppGetAuthToken:"get_auth_token",VKWebAppGetAuthTokenPreload:"get_auth_token_info",VKWebAppGetPhoneNumber:"get_phone_number",VKWebAppGetPhoneNumberPreload:"already_get_phone_number",VKWebAppGetEmail:"get_email",VKWebAppGetEmailPreload:"already_get_email",VKWebAppGetFriends:"get_friends",VKWebAppAllowNotificationsPreload:"are_notifications_allowed",VKWebAppAllowNotifications:"allow_notifications",VKWebAppDenyNotifications:"deny_notifications",VKWebAppAllowMessagesFromGroup:"allow_messages_from_group",VKWebAppAllowMessagesFromGroupPreload:"can_send_messages_from_group",VKWebAppJoinGroup:"join_group",VKWebAppJoinGroupPreload:"is_group_member",VKWebAppLeaveGroup:"leave_group",VKWebAppLeaveGroupPreload:"is_group_member",VKWebAppOpenApp:"open_app",VKWebAppSendPayload:"send_payload",VKWebAppSendToClient:"send_to_client",VKWebAppSendToClientPreload:"get_open_in_native_permission",VKWebAppShowOrderBox:"order",VKWebAppShowSubscriptionBox:"subscription",VKWebAppShowLeaderBoardBox:"show_leader_board",VKWebAppShowInviteBox:"invite_friends",VKWebAppShowStoryBox:"story_box",VKWebAppShowRequestBox:"send_request",VKWebAppShowRequestBoxPreload:"request_box_preload",VKWebAppStorageGetKeys:"storage_get_keys",VKWebAppStorageSet:"storage_set",VKWebAppStorageGet:"storage_get",VKWebAppOpenArticleEditor:"open_article_edit",VKWebAppSubscribeStoryApp:"subscribe_story_app",VKWebAppClose:"close",VKWebAppGetSilentToken:"get_silent_token",VKWebAppCheckAllowedScopes:"check_allowed_scopes",VKWebAppOpenPayForm:"open_pay_form",VKWebAppCheckSurvey:"check_survey",VKWebAppShowSurvey:"show_survey",VKWebAppAddToChat:"add_to_chat",VKWebAppTrackEvent:"track_event",VKWebAppCallStart:"call_start",VKWebAppCallJoin:"call_join",VKWebAppCallLeft:"call_left",VKWebAppCallFinished:"call_finished",VKWebAppCallGetStatus:"call_get_status"},T="vk-sak-sdk",g="mini_apps_long_id"},571039:(e,t,r)=>{r.d(t,{wrapAway:()=>a,wrapAwayIfExternal:()=>s});var i=r(404145);const o=new RegExp(`^(https?:\\/\\/)?([a-z0-9_\\-.]+\\.)?${i.VK_SITE_REGEX_SOURCE_UNSAFE}(\\/.*)?`);function s(e,t=!1){return function(e){const t=decodeURIComponent(e);return/^\/[^/]/.test(t)||o.test(t)}(e)?e:a(e,t)}function a(e,t){return"/away.php?to="+encodeURIComponent(decodeURIComponent(e))+(t?"&utf=1":"")}},386694:(e,t,r)=>{r.d(t,{clearStoriesLoadingStats:()=>S,clearStoriesNavigationStats:()=>c,getConnectionType:()=>a,getStoriesLoadingStats:()=>v,getStoriesNavigationStats:()=>d,saveNavigationStatEvent:()=>_,saveViewerStartTime:()=>u,serializeLoadingStats:()=>f,serializeNavigationStats:()=>l});var i=r(659397),o=r(168298),s=r(477932);function a(){const{connection:e}=navigator;if(!e)return"";const{effectiveType:t,downlink:r}=e;switch(t){case"slow-2g":return"GPRS";case"2g":return"EDGE";case"3g":return"3G";case"4g":return r>8?"wi-fi":"LTE"}return""}let n=[];function _({storyRawId:e,source:t,action:r}){let i=0,a=0;e&&([i,a]=(0,s.splitStoryRawId)(e)),"reply"===t&&(t="replies_list");const _={e:o.STATS_EVENT_TYPE_STORIES_VIEWER_NAVIGATION,owner_id:i,story_id:a,source:t,action:r};n.push(_)}function d(){return(0,i.isArray)(n)?n:[]}function c(){n=[]}function l(){const e=n.map((({owner_id:e,story_id:t,source:r,action:i})=>[e,t,r,i].join(","))).join(";");return n=[],e}let p=[];function u({storyRawId:e,source:t,time:r}){const[i,n]=(0,s.splitStoryRawId)(e),_={e:o.STATS_EVENT_TYPE_STORIES_VIEWING_START_TIME,owner_id:i,story_id:n,source:t,time:r,internet_type:a()};p.push(_)}function v(){return(0,i.isArray)(p)?p:[]}function S(){p=[]}function f(){const e=p.map((({owner_id:e,story_id:t,source:r,time:i})=>[e,t,r,i].join(","))).join(";");return p=[],e}},850343:(e,t,r)=>{var i;r.d(t,{AvailableHelpHints:()=>i}),function(e){e.ACCOUNT_HINT_NARRATIVES_ADD_TOOLTIP="narratives:add_tooltip",e.ACCOUNT_HINT_MVK_STORIES_ARCHIVE_ACTIONS_HINT="mvk:stories_archive:actions_hint",e.ACCOUNT_HINT_MINI_APPS_BUTTON_MVK_PROFILE="mini_apps:button_mvk_profile",e.ACCOUNT_HINT_MINI_APPS_BUTTON_MVK_APP_MENU="mini_apps:button_mvk_app_menu",e.ACCOUNT_HINT_MINI_APPS_COUNTER_TOGGLE_IN_ACTION_MENU="mini_apps:counter_toggle_in_action_menu",e.ACCOUNT_HINT_MINI_APPS_COUNTER_TOGGLE_IN_ACTION_MENU_INTRO="mini_apps:counter_toggle_in_action_menu_intro",e.ACCOUNT_HINT_MINI_APPS_OPEN_CATALOG_WITH_BADGES="mini_apps:open_catalog_with_badges",e.ACCOUNT_HINT_MINI_APPS_CATALOG_SECTION_WITH_BADGES="mini_apps:catalog_section_with_badges",e.ACCOUNT_HINT_SUPERAPP_RECOMMEND_ACTION_IN_MENU="superapp:recommend_action_in_menu",e.ACCOUNT_HINT_SUPERAPP_SHOW_RECOMMEND_ACTION="superapp:show_recommend_action",e.ACCOUNT_HINT_MINI_APPS_NAV_BUTTONS_THIRD_PARTY_BUTTONS="mini_apps:nav_buttons_third_party_buttons",e.ACCOUNT_HINT_POSTING_EDITOR_ORD_AD="posting:editor_ord_ad",e.ACCOUNT_HINT_PROFILE_REDESIGN_ONBOARDING_BANNER="profile:redesign_onboarding_banner",e.ACCOUNT_HINT_PROFILE_REDESIGN_ONBOARDING_BOTTOMSHEET="profile:redesign_onboarding_bottomsheet",e.ACCOUNT_HINT_PROFILE_SERVICES_MENU_BANNER="profile:services_menu_banner",e.ACCOUNT_HINT_PROFILE_SERVICES_ONBOARDING="profile:services_onboarding",e.ACCOUNT_HINT_MVK_PWA_TABBAR="mvk:pwa_tabbar",e.ACCOUNT_HINT_STORIES_MUSIC_ACTIONS="stories:music_actions",e.ACCOUNT_HINT_STORIES_PLAYLIST_ACTIONS="stories:playlist_actions",e.ACCOUNT_HINT_STORIES_EDITOR_ORD_AD="stories:editor_ord_ad",e.ACCOUNT_HINT_SUPERAPP_MVK_SHOWCASE="superapp:mvk_showcase",e.IM_INTEGRATION_APPS_TOOLTIP_ON_PICKER="superapp:im_integration_apps_tooltip_on_picker",e.ACCOUNT_HINT_IM_INTEGRATION_PICKER_APPS_BANNER="superapp:im_integration_picker_apps_banner",e.ACCOUNT_HINT_IM_INTEGRATION_PICKER_GAMES_BANNER="superapp:im_integration_picker_games_banner",e.ACCOUNT_HINT_FRIENDS_FOLLOWERS_MODE_FORCIBLY_ENABLED_ONBOARDING="friends:followers_mode_forcibly_enabled_onboarding",e.ACCOUNT_HINT_FOLLOWERS_MODE_CAN_BE_ENABLED_ONBOARDING="friends:followers_mode_can_be_enabled_onboarding",e.ACCOUNT_HINT_FRIENDS_FOLLOWERS_MODE_ABOUT_MODAL_IMAGES="friends:followers_mode_about_modal_images",e.ACCOUNT_HINT_IM_INTEGRATION_CATALOG_ONBOARDING="superapp:im_integration_catalog_onboarding",e.ACCOUNT_HINT_ONEPASS_ONBOARDING="profile:passkey_onboarding_web",e.ACCOUNT_HINT_MVK_TABBAR_LIKE_NATIVE_ONBOARDING="mvk:tabbar_like_native_onboarding",e.ACCOUNT_HINT_VIDEO_INTERACTIVE_VIDEO_ONBOARDING="video:interactive_video_onboarding"}(i||(i={}))},29260:(e,t,r)=>{r.d(t,{formatCount:()=>i});const i=(e,t)=>{var r,i,o,s,a,n,_;const d=(null==(r=t)?void 0:r.separator)||".";var c;const l=null!=(c=null==(i=t)?void 0:i.maximumFractionDigits)?c:1,p=(null==(o=t)?void 0:o.roundingMode)||void 0,u=(null==(s=t)?void 0:s.kLimit)||1e3,v=(null==(a=t)?void 0:a.mLimit)||1e6,S=(null==(n=t)?void 0:n.bLimit)||1e9,f=(null==(_=window.langConfig)?void 0:_.locale)||"ru",m=(e,t)=>{"floor"===p&&(e=Math.floor(e*Math.pow(10,l))/Math.pow(10,l));let r=e.toFixed(l);return Number(r).toLocaleString(f).replace(/\./,d)+t};if(e>-u&&e<u)return e.toLocaleString(f);const E=e/S;if(E>=1||E<=-1)return m(e/1e9,"B");const h=e/v;if(h>=1||h<=-1)return m(e/1e6,"M");const T=e/u;return T>=1||T<=-1?m(e/1e3,"K"):String(e)}},654198:(e,t,r)=>{r.d(t,{getOwnerFullName:()=>n,getOwnerHref:()=>a,getOwnerShortName:()=>_,isOwnerGroup:()=>s,isOwnerUser:()=>o});var i=r(42977);const o=e=>!!e&&"first_name"in e,s=e=>!!e&&"name"in e;function a(e,t=!1){let r="/";return e&&(s(e)?r+=e.screen_name||`club${e.id}`:r+=e.screen_name||e.domain||`id${e.id}`),t?window.location.origin+r:r}function n(e){let t="";return e?(e.first_name&&(t+=e.first_name.trim()),e.last_name&&(t+=` ${e.last_name.trim()}`),e.maiden_name&&e.sex===i.BaseSexEnumNames.FEMALE&&(t+=` (${e.maiden_name.trim()})`),t):t}function _(e){let t="";return e.first_name&&(t+=e.first_name.trim()),e.last_name&&(t+=` ${e.last_name.trim().slice(0,1)}.`),t}}}]);try{stManager.done("dist/8b5077165f4bdb8aa1b091f223e3f6ab.83efd3c49e92aa852d64.js")}catch(e){}