(self.webpackChunkvk=self.webpackChunkvk||[]).push([[76400],{763279:function(e,t,r){((e,t,r,n,a)=>{function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function i(e,t,n,a){let o=[r.step.run({fn:e=>t(e)})];if(a&&o.unshift(a),n){let t=r.createNode({node:o}),a=e.graphite.id,i=n.additionalLinks,s=i[a]||[];return i[a]=s,s.push(t),()=>{let e=s.indexOf(t);-1!==e&&s.splice(e,1),r.clearNode(t)}}{let t=r.createNode({node:o,parent:[e],family:{owners:e}});return()=>{r.clearNode(t)}}}function s(e,t){return t.displayName=e,t}function l(e,t){r.is.store(e)||v("expect useStore argument to be a store");let a=g.default.useCallback((r=>i(e,r,t)),[e,t]),o=g.default.useCallback((()=>S(e,t)),[e,t]);return n.useSyncExternalStore(a,o,o)}function u(e,t){let a=r.is.unit(e),o={};a?o={unit:e}:"@@unitShape"in e?"function"==typeof e["@@unitShape"]?o=e["@@unitShape"]():v("expect @@unitShape to be a function"):o=e;let s=Array.isArray(o),l=g.default.useRef({stale:1,justSubscribed:0,scope:t}),[u,c,f,d,p]=g.default.useMemo((()=>{l.current.stale=1;let e=Array.isArray(o)?[]:{},n=[],a=[],i=[],s=[];for(let l in o){let u=o[l];r.is.unit(u)||v("expect useUnit argument to be a unit"),r.is.event(u)||r.is.effect(u)?(e[l]=t?r.scopeBind(u,{scope:t}):u,i.push(l),s.push(u)):(e[l]=null,n.push(l),a.push(u))}return[e,n,a,i,s]}),[l,t,...Object.keys(o),...Object.values(o)]),m=g.default.useRef({value:u,storeKeys:c,eventKeys:d,eventValues:p}),h=g.default.useCallback((e=>{let n=l.current;n.justSubscribed=1;let a=()=>{n.stale||(n.stale=1,e())},o=r.step.compute({priority:"sampler",batch:1}),s=f.map((e=>i(e,a,t,o)));return()=>{s.forEach((e=>e()))}}),[f,t,m,l]),y=g.default.useCallback((()=>{let e,r=m.current,n=l.current,o=0,i=r.value,h=r.storeKeys,y=r.eventKeys,g=r.eventValues,v=t!==n.scope;if(n.stale||n.justSubscribed||v){o=!n.justSubscribed||v,e=s?[...u]:{...u},h.length===c.length&&y.length===d.length||(o=1);for(let r=0;r<c.length;r++){let n=S(f[r],t),a=c[r];o||(o=h.includes(a)?i[a]!==n:1),e[a]=n}for(let e=0;e<d.length;e++){let t=p[e],r=d[e];o||(o=y.includes(r)?g[y.indexOf(r)]!==t:1)}}return o&&(r.value=e),r.storeKeys=c,r.eventKeys=d,r.eventValues=p,n.stale=0,n.justSubscribed=!o,n.scope=t,a?r.value.unit:r.value}),[h,f,p,t,m,l]);return n.useSyncExternalStore(h,y,y)}function c([e,t],n){let o,s,l,u,c=w;t?(o=t,l=e,u=[]):({fn:o,store:l,keys:u,defaultValue:s,updateFilter:c=w}=e),r.is.store(l)||v("useStoreMap expects a store"),Array.isArray(u)||v("useStoreMap expects an array as keys"),"function"!=typeof o&&v("useStoreMap expects a function");let f=g.default.useCallback((e=>i(l,e,n)),[l,n]),d=g.default.useCallback((()=>S(l,n)),[l,n]),p=g.default.useRef(),m=g.default.useRef(),h=g.default.useRef(u);return a.useSyncExternalStoreWithSelector(f,d,d,(e=>{if(p.current!==e||!((e,t)=>{if(!e||!t||e.length!==t.length)return 0;let r=1;for(let n=0;n<e.length;n++)if(e[n]!==t[n]){r=0;break}return r})(h.current,u)){let t=o(e,u);void 0===t&&void 0!==s&&(t=s),p.current=e,h.current=u,void 0!==t&&(m.current=t)}return m.current}),((e,t)=>!c(t,e)))}function f(e,t={},r){let{open:n,close:a,set:o}=u({open:e.open,close:e.close,set:e.set},r),i=g.default.useMemo((()=>({open:n,close:a,set:o})),[e,n]),s=g.default.useRef({value:null,count:0});b((()=>(i.open(s.current.value),()=>i.close(s.current.value))),[i]),((e,t)=>{if(e===t)return 1;if("object"==typeof e&&null!==e&&"object"==typeof t&&null!==t){let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return 0;for(let n=0;n<r.length;n++){let a=r[n];if(e[a]!==t[a])return 0}return 1}return 0})(s.current.value,t)||(s.current.value=t,s.current.count+=1),b((()=>{i.set(s.current.value)}),[s.current.count])}function d(e){let t=g.default.useContext(k);return e&&!t&&v("No scope found, consider adding <Provider> to app root"),t}function p(e,t){return l(e,d(null==t?void 0:t.forceScope))}function m(e,t){function n(e){let r=g.default.useRef(e),n=p(a);b((()=>(i({props:r.current,state:a.getState()}),()=>{l({props:r.current,state:a.getState()})})),[]);let o=t(e,n);return r.current=e,o}let a;r.is.store(e)?a=e:"object"==typeof e&&null!==e?a=r.combine(e):v("shape should be a store or object with stores");let o="Unknown";a&&a.shortName&&(o=a.shortName);let i=r.createEvent(),l=r.createEvent();return n.mounted=i,n.unmounted=l,s(`${o}.View`,n)}function h(e,t){let r=t?e:e[0];(e=>{(e=>{if(!e)throw Error("expect first argument be an object")})(C(e)||(e=>"function"==typeof e)(e))})(r);let n=r.or,a=r.and;if(a){let r=t?a:a[0];if(C(r)&&"and"in r){let r=h(a,t);e=r[0],n={...n,...r[1]}}else e=a}return[e,n]}function y(e,t){let r,n=t&&(e=>C(e)&&(e.and||e.or))(t[0])?t:[{and:t}],[[a,o],i]=h(n),s={},l={},u=i;return"string"==typeof a?(l={name:a},(e=>C(e)&&"sid"in e)(o)||(s=o||{})):(e=>C(e)&&("domain"in e||"defaultState"in e||"name"in e))(a)&&(l=a,s=a.defaultState||{},r=a.domain),{hook:e,domain:r,defaultState:s,mainConfig:l,maybeConfig:u}}var g=o(t);let v=e=>{throw Error(e)},b="undefined"!=typeof window?g.default.useLayoutEffect:g.default.useEffect;const S=(e,t)=>t?t.getState(e):e.getState(),w=(e,t)=>e!==t,k=g.default.createContext(null);let{Provider:_}=k,x=e=>console.error(`${e} is deprecated`),M=e=>t=>{let r=e;return"function"!=typeof e&&(r=t,t=e),s(`Connect(${r.displayName||r.name||"Unknown"})`,(e=>g.default.createElement(r,{...e,...p(t)})))},C=e=>"object"==typeof e&&null!==e,O=(e,t={})=>(C(e)&&(O(e.or,t),((e,t)=>{for(let r in e)t(e[r],r)})(e,((e,r)=>{(e=>void 0===e)(e)||"or"===r||"and"===r||(t[r]=e)})),O(e.and,t)),t);e.Provider=_,e.connect=M,e.createComponent=m,e.createContextComponent=(e,t,r)=>(x("createContextComponent"),s(`${e.shortName||"Unknown"}.ContextComponent`,(n=>{let a=g.default.useContext(t),o=p(e);return r(n,o,a)}))),e.createGate=(...e)=>(({domain:e,defaultState:t,hook:n,mainConfig:a,maybeConfig:o})=>{function i(e){return n(i,e,d()),null}let l=O({or:o,and:a}),u=`${e?`${e.compositeName.fullName}/`:""}${l.name||"gate"}`,c=r.createEvent({name:`${u}.set`,sid:l.sid?`${l.sid}|set`:void 0}),f=r.createEvent({name:`${u}.open`,sid:l.sid?`${l.sid}|open`:void 0}),p=r.createEvent({name:`${u}.close`,sid:l.sid?`${l.sid}|close`:void 0}),m=r.createStore(Boolean(0),{name:`${u}.status`,serialize:"ignore"}).on(f,(()=>Boolean(1))).on(p,(()=>Boolean(0))),h=r.createStore(t,{name:`${u}.state`,sid:l.sid}).on(c,((e,t)=>t)).on(f,((e,t)=>t)).reset(p);if(e){let{hooks:t}=e;r.launch({target:[t.store,t.store,t.event,t.event,t.event],params:[m,h,f,p,c]})}return i.open=f,i.close=p,i.status=m,i.state=h,i.set=c,s(`Gate:${u}`,i)})(y(f,e)),e.createReactState=(e,t)=>(x("createReactState"),M(t)(e)),e.createStoreConsumer=e=>m(e,(({children:e},t)=>e(t))),e.useEvent=(e,t)=>((e,t)=>{if(!t)return e;let n=r.is.unit(e)||"object"!=typeof e?{event:e}:e;return g.default.useMemo((()=>{if(r.is.unit(e))return r.scopeBind(e,{scope:t});let n=Array.isArray(e)?[]:{};for(let a in e)n[a]=r.scopeBind(e[a],{scope:t});return n}),[t,...Object.keys(n),...Object.values(n)])})(e,d(null==t?void 0:t.forceScope)),e.useGate=(e,t={},r)=>f(e,t,d(null==r?void 0:r.forceScope)),e.useList=(e,t,n)=>((e,t,n)=>{let a,o,i,u=[];"object"==typeof t&&null!==t?(t.keys&&(u=t.keys),({fn:a,getKey:o,placeholder:i}=t)):a=t,r.is.store(e)||v("expect useList first argument to be a store"),"function"!=typeof a&&v("expect useList's renderItem to be a function"),Array.isArray(u)||v("expect useList's keys to be an array");let f=g.default.useMemo((()=>{let t=s(`${e.shortName||"Unknown"}.Item`,(t=>{let{index:r,keys:a,keyVal:o,value:i}=t;if(d.current[1])return d.current[0](i,o);let s=c([{store:e,keys:[r,...a],fn:(e,t)=>e[t[0]]}],n);return d.current[0](s,r)}));return g.default.memo(t)}),[e,n,!!o]),d=g.default.useRef([a,o]);d.current=[a,o];let p=g.default.useMemo((()=>u),u);if(o){let t=l(e,n);return 0===t.length&&i?i:t.map((e=>{let t=d.current[1](e);return g.default.createElement(f,{keyVal:t,key:t,keys:p,value:e})}))}{let t=c([{store:e,keys:[e],fn:e=>e.length}],n);return 0===t&&i?i:Array.from({length:t},((e,t)=>g.default.createElement(f,{index:t,key:t,keys:p})))}})(e,t,d(null==n?void 0:n.forceScope)),e.useStore=p,e.useStoreMap=(e,t)=>c([e,t],d(null==e?void 0:e.forceScope)),e.useUnit=(e,t)=>u(e,d(null==t?void 0:t.forceScope)),Object.defineProperty(e,"__esModule",{value:1})})(t,r(667294),r(228033),r(61688),r(552798))},228033:(e,t)=>{function r(e,t){for(let r in e)t(e[r],r)}function n(e,t){e.forEach(t)}function a(e,t){if(!e)throw Error(t)}function o(e,t){let r=C(e).meta||{};te={id:C(e).id,parent:te,value:e,template:r.template||ne(),sidRoot:r.sidRoot||te&&te.sidRoot,meta:r};try{return t()}finally{re("region"),te=A(te)}}function i({node:e=[],from:t,source:r,parent:a=t||r,to:o,target:i,child:s=o||i,scope:l={},meta:u={},family:c={type:"regular"},regional:f}={}){let d=ie(a),p=ie(c.links),m=ie(c.owners),h=[];n(e,(e=>e&&G(h,e)));let y={id:Z(),seq:h,next:ie(s),meta:u,scope:l,family:{type:c.type||"crosslink",links:p,owners:m}};return n(p,(e=>G(O(e),y))),n(m,(e=>G(j(e),y))),n(d,(e=>G(e.next,y))),f&&te&&oe(P(te),[y]),y}function s(e,t,r){let a,o=Le,i=null,s=qe;if(e.target&&(t=e.params,r=e.defer,a=e.meta,o="page"in e?e.page:o,e.stack&&(i=e.stack),s=R(e)||s,e=e.target),s&&qe&&s!==qe&&(qe=null),Array.isArray(e))for(let r=0;r<e.length;r++)$e("pure",o,C(e[r]),i,t[r],s,a);else $e("pure",o,C(e),i,t,s,a);if(r&&!Fe)return;let l,u,c,f,d,p,m={isRoot:Fe,currentPage:Le,scope:qe,isWatch:Te,isPure:Be};Fe=0;e:for(;f=Re();){let{idx:e,stack:t,type:r}=f;c=t.node,Le=d=t.page,qe=R(t),d?p=d.reg:qe&&(p=qe.reg);let a=!!d,o=!!qe,i={fail:0,scope:c.scope};l=u=0;for(let n=e;n<c.seq.length&&!l;n++){let s=c.seq[n];if(s.order){let{priority:a,barrierID:o}=s.order,i=o?d?`${d.fullID}_${o}`:o:0;if(n!==e||r!==a){o?Ie.has(i)||(Ie.add(i),ze(n,t,a,o)):ze(n,t,a);continue e}o&&Ie.delete(i)}switch(s.type){case"mov":{let e,r=s.data;switch(r.from){case M:e=P(t);break;case"a":case"b":e=t[r.from];break;case"value":e=r.store;break;case"store":if(p&&!p[r.store.id])if(a){let e=Ke(d,r.store.id);t.page=d=e,e?p=e.reg:o?(Ye(qe,r.store,0,1,r.softRead),p=qe.reg):p=void 0}else o&&Ye(qe,r.store,0,1,r.softRead);e=Oe(p&&p[r.store.id]||r.store)}switch(r.to){case M:t.value=e;break;case"a":case"b":t[r.to]=e;break;case"store":Ge(d,qe,c,r.target).current=e}break}case"compute":let e=s.data;if(e.fn){Te="watch"===$(c,"op"),Be=e.pure;let r=e.safe?(0,e.fn)(P(t),i.scope,t):Je(i,e.fn,t);e.filter?u=!r:t.value=r,Te=m.isWatch,Be=m.isPure}}l=i.fail||u}if(Ve&&Ve(t,i),!l){let e=P(t),r=R(t);if(n(c.next,(n=>{$e("child",d,n,t,e,r)})),r){$(c,"needFxCounter")&&$e("child",d,r.fxCount,t,e,r),$(c,"storeChange")&&$e("child",d,r.storeChange,t,e,r),$(c,"warnSerialize")&&$e("child",d,r.warnSerializeNode,t,e,r);let a=r.additionalLinks[c.id];a&&n(a,(n=>{$e("child",d,n,t,e,r)}))}}}Fe=m.isRoot,Le=m.currentPage,qe=R(m)}function l(e,t="combine"){let n=t+"(",a="",o=0;return r(e,(e=>{o<25&&(null!=e&&(n+=a,n+=I(e)?D(e).fullName:e.toString()),o+=1,a=", ")})),n+")"}function u(e,t){let r,n,a=e;if(t){let a=D(t);0===e.length?(r=a.path,n=a.fullName):(r=a.path.concat([e]),n=0===a.fullName.length?e:a.fullName+"/"+e)}else r=0===e.length?[]:[e],n=e;return{shortName:a,fullName:n,path:r}}function c(e,t){let r=t?e:e[0];ce(r);let n=r.or,a=r.and;if(a){let r=t?a:a[0];if(se(r)&&"and"in r){let r=c(a,t);e=r[0],n={...n,...r[1]}}else e=a}return[e,n]}function f(e,...t){let r=ne();if(r){let n=r.handlers[e];if(n)return n(r,...t)}}function d(e,t){let r=Xe({or:t,and:"string"==typeof e?{name:e}:e}),n=(e,...t)=>(H(!$(n,"derived"),"call of derived event","createEvent"),H(!Be,"unit call from pure function","operators like sample"),Le?((e,t,r,n)=>{let a=Le,o=null;if(t)for(o=Le;o&&o.template!==t;)o=A(o);We(o);let i=e.create(r,n);return We(a),i})(n,a,e,t):n.create(e,t)),a=ne(),o=Object.assign(n,{graphite:i({meta:it(r.actualOp||"event",n,r),regional:1}),create:e=>(s({target:n,params:e,scope:qe}),e),watch:e=>at(n,e),map:e=>st(n,x,e,[xe()]),filter:e=>st(n,"filter",e.fn?e:e.fn,[xe(ye,1)]),filterMap:e=>st(n,"filterMap",e,[xe(),ke((e=>!ue(e)),1)]),prepend(e){let t=d("* → "+n.shortName,{parent:A(n)});return f("eventPrepend",C(t)),nt(t,n,[xe()],"prepend",e),ot(n,t),t}});return null!=r&&r.domain&&r.domain.hooks.event(o),z(o,"id",o.graphite.id),re(o.graphite),o}function p(e,t,r,o){return de(r,t,"first argument"),a(le(o),"second argument should be a function"),H(!$(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`),n(Array.isArray(r)?r:[r],(t=>{e.off(t),N(e).set(t,rt(lt(t,e,"on",he,o)))})),e}function m(e,t){let r=Xe(t),o=Ce(e),l=d({named:"updates",derived:1});f("storeBase",o);let u=o.id,c={subscribers:new Map,updates:l,defaultState:e,stateRef:o,getState(){let e,t=o;if(Le){let t=Le;for(;t&&!t.reg[u];)t=A(t);t&&(e=t)}return!e&&qe&&(Ye(qe,o,1),e=qe),e&&(t=e.reg[u]),Oe(t)},setState:e=>s({target:c,params:e,defer:1,scope:qe}),reset:(...e)=>(n(e,(e=>p(c,".reset",e,(()=>c.defaultState)))),c),on:(e,t)=>p(c,".on",e,t),off(e){let t=N(c).get(e);return t&&(t(),N(c).delete(e)),c},map(e,t){let r,n;se(e)&&(r=e,e=e.fn),H(ue(t),"second argument of store.map","updateFilter");let a=c.getState();ne()?n=null:ue(a)||(n=e(a,t));let i=m(n,{name:`${c.shortName} → *`,derived:1,and:r}),s=lt(c,i,x,me,e);return je(E(i),{type:x,fn:e,from:o}),E(i).noInit=1,f("storeMap",o,s),i},watch(e,t){if(!t||!I(e)){let t=at(c,e);return f("storeWatch",o,e)||e(c.getState()),t}return a(le(t),"second argument should be a function"),e.watch((e=>t(c.getState(),e)))}},h=it("store",c,r),y=c.defaultConfig.updateFilter;c.graphite=i({scope:{state:o,fn:y},node:[ke(((e,t,r)=>(r.scope&&!r.scope.reg[o.id]&&(r.b=1),e))),_e(o),ke(((e,t,{a:r,b:n})=>!ue(e)&&(e!==r||n)),1),y&&xe(me,1),be({from:M,target:o})],child:l,meta:{...h,defaultState:e},regional:1}),z(c,"id",c.graphite.id),z(c,"rootStateRefId",u);let g=$(c,"serialize"),v=$(c,"derived"),b="ignore"===g,S=$(c,"sid");return S&&(z(c,"storeChange",1),o.sid=S),S||b||v||z(c,"warnSerialize",1),a(v||!ue(e),"current state can't be undefined, use null instead"),oe(c,[l]),null!=r&&r.domain&&r.domain.hooks.store(c),v||(c.reinit=d({named:"reinit"}),c.reset(c.reinit)),o.meta=c.graphite.meta,re(c.graphite),c}function h(...e){let t,r,n;[e,n]=c(e);let o,i,s,l=e[e.length-1];if(le(l)?(r=e.slice(0,-1),t=l):r=e,1===r.length){let e=r[0];F(e)||(o=e,i=1)}if(!i&&(o=r,t)){s=1;let e=t;t=t=>e(...t)}return a(se(o),"shape should be an object"),ut(Array.isArray(o),!s,o,n,t)}function y(){let e={};return e.req=new Promise(((t,r)=>{e.rs=t,e.rj=r})),e.req.catch((()=>{})),e}function g(e,t={}){let r=Xe(le(e)?{handler:e}:e,t),n=d(le(e)?{handler:e}:e,{...t,actualOp:"effect"}),o=C(n);z(o,"op",n.kind="effect"),n.use=e=>(a(le(e),".use argument should be a function"),h.scope.handler=e,n),n.use.getCurrent=()=>h.scope.handler;let l=n.finally=d({named:"finally",derived:1}),u=n.done=l.filterMap({named:"done",fn({status:e,params:t,result:r}){if("done"===e)return{params:t,result:r}}}),c=n.fail=l.filterMap({named:"fail",fn({status:e,params:t,error:r}){if("fail"===e)return{params:t,error:r}}}),f=n.doneData=u.map({named:"doneData",fn:({result:e})=>e}),p=n.failData=c.map({named:"failData",fn:({error:e})=>e}),h=i({scope:{handler:n.defaultConfig.handler||(()=>a(0,`no handler used in ${n.getType()}`))},node:[ke(((e,t,r)=>{let a=t.handler,o=R(r);if(o){let e=o.handlers.unitMap.get(n)||o.handlers.sidMap[n.sid];e&&(a=e)}return e.handler=a,e}),0,1),ke((({params:e,req:t,handler:r,args:n=[e]},a,o)=>{let i=ft(o),s=dt(e,t,1,l,o,i),u=dt(e,t,0,l,o,i),[c,f]=ct(r,u,n);c&&(se(f)&&le(f.then)?f.then(s,u):s(f))}),0,1)],meta:{op:"fx",fx:"runner"}});o.scope.runner=h,G(o.seq,ke(((e,{runner:t},r)=>{let n=A(r)?{params:e,req:{rs(e){},rj(e){}}}:e;return r.meta||(r.meta={fxID:ee()}),s({target:t,params:n,defer:1,scope:R(r),meta:r.meta}),n.params}),0,1)),n.create=e=>{let t=y(),r={params:e,req:t};if(qe&&!Te){let e=qe;t.req.finally((()=>{Ue(e)})).catch((()=>{}))}return s({target:n,params:r,scope:qe}),t.req};let g=n.inFlight=m(0,{serialize:"ignore",named:($(n,"name")||n.graphite.id)+".inFlight"}).on(n,(e=>e+1)).on(l,(e=>e-1)).map({fn:e=>e,named:"inFlight"});z(l,"needFxCounter","dec"),z(n,"needFxCounter",1);let v=n.pending=g.map({fn:e=>e>0,named:"pending"});return oe(n,[l,u,c,f,p,v,g]),null!=r&&r.domain&&r.domain.hooks.effect(n),n}function v(e,t){de(e,"merge","first argument");let r=d({name:l(e,"merge"),derived:1,and:t});return nt(e,r,[],"merge"),r}function b(e,t){let r=0;return n(mt,(n=>{n in e&&(a(null!=e[n],ht(t,n)),r=1)})),r}function S(e,t,r){let a=[];!function e(o){K(a,o)||(G(a,o),"store"===$(o,"op")&&(r||$(o,"sid"))&&t(o,$(o,"sid")),n(o.next,e),n(O(o),e),n(j(o),e))}(e)}function w(e,t){let r=Array.isArray(e)?new Map(e):e,o=new Map,i=0;if(r instanceof Map){let e={};return n(r,((r,n)=>{a(I(n),"Map key should be a unit"),t&&t(n,r),n.sid&&(n.sid in e&&(i=1),e[n.sid]=r),o.set(n,r)})),{sidMap:e,unitMap:o,hasSidDoubles:i}}return{sidMap:r,unitMap:o}}function k(e){let t=()=>e();return t.unsubscribe=()=>e(),t}Object.defineProperty(t,"__esModule",{value:1});let _="undefined"!=typeof Symbol&&Symbol.observable||"@@observable",x="map",M="stack",C=e=>e.graphite||e,O=e=>e.family.owners,j=e=>e.family.links,E=e=>e.stateRef,P=e=>e.value,N=e=>e.subscribers,A=e=>e.parent,R=e=>e.scope,$=(e,t)=>C(e).meta[t],z=(e,t,r)=>C(e).meta[t]=r,D=e=>e.compositeName,I=e=>(le(e)||se(e))&&"kind"in e;const q=e=>t=>I(t)&&t.kind===e;let F=q("store"),T=q("event"),B=q("effect"),L=q("domain"),U=q("scope");var W={__proto__:null,unit:I,store:F,event:T,effect:B,domain:L,scope:U,attached:e=>B(e)&&1==$(e,"attached")};let K=(e,t)=>e.includes(t),V=(e,t)=>{let r=e.indexOf(t);-1!==r&&e.splice(r,1)},G=(e,t)=>e.push(t),H=(e,t,r)=>!e&&console.error(`${t} is deprecated${r?`, use ${r} instead`:""}`);const Y=()=>{let e=0;return()=>""+ ++e};let J,X=Y(),Q=Y(),Z=Y(),ee=Y(),te=null,re=e=>{J&&J(e,te)},ne=()=>te&&te.template,ae=e=>(e&&te&&te.sidRoot&&(e=`${te.sidRoot}|${e}`),e),oe=(e,t)=>{let r=C(e);n(t,(e=>{let t=C(e);"domain"!==r.family.type&&(t.family.type="crosslink"),G(O(t),r),G(j(r),t)}))},ie=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(C),se=e=>"object"==typeof e&&null!==e,le=e=>"function"==typeof e,ue=e=>void 0===e,ce=e=>a(se(e)||le(e),"expect first argument be an object");const fe=(e,t,r,n)=>a(!(!se(e)&&!le(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${r} to be a unit (store, event or effect)${n}`);let de=(e,t,r)=>{Array.isArray(e)?n(e,((e,n)=>fe(e,t,`${n} item of ${r}`,""))):fe(e,t,r," or array of units")},pe=(e,t,r="target")=>n(ie(t),(t=>H(!$(t,"derived"),`${e}: derived unit in "${r}"`,"createEvent/createStore"))),me=(e,{fn:t},{a:r})=>t(e,r),he=(e,{fn:t},{a:r})=>t(r,e),ye=(e,{fn:t})=>t(e);const ge=(e,t,r,n)=>{let a={id:Q(),type:e,data:t};return r&&(a.order={priority:r},n&&(a.order.barrierID=++ve)),a};let ve=0,be=({from:e="store",store:t,target:r,to:n=(r?"store":M),batch:a,priority:o})=>ge("mov",{from:e,store:t,to:n,target:r},o,a),Se=({fn:e,batch:t,priority:r,safe:n=0,filter:a=0,pure:o=0})=>ge("compute",{fn:e,safe:n,filter:a,pure:o},r,t),we=({fn:e})=>Se({fn:e,priority:"effect"}),ke=(e,t,r)=>Se({fn:e,safe:1,filter:t,priority:r&&"effect"}),_e=(e,t,r)=>be({store:e,to:t?M:"a",priority:r&&"sampler",batch:1}),xe=(e=ye,t)=>Se({fn:e,pure:1,filter:t}),Me={mov:be,compute:Se,filter:({fn:e,pure:t})=>Se({fn:e,filter:1,pure:t}),run:we},Ce=e=>({id:Q(),current:e}),Oe=({current:e})=>e,je=(e,t)=>{e.before||(e.before=[]),G(e.before,t)},Ee=null;const Pe=(e,t)=>{if(!e)return t;if(!t)return e;let r;return(e.v.type===t.v.type&&e.v.id>t.v.id||De(e.v.type)>De(t.v.type))&&(r=e,e=t,t=r),r=Pe(e.r,t),e.r=e.l,e.l=r,e},Ne=[];let Ae=0;for(;Ae<6;)G(Ne,{first:null,last:null,size:0}),Ae+=1;const Re=()=>{for(let e=0;e<6;e++){let t=Ne[e];if(t.size>0){if(3===e||4===e){t.size-=1;let e=Ee.v;return Ee=Pe(Ee.l,Ee.r),e}1===t.size&&(t.last=null);let r=t.first;return t.first=r.r,t.size-=1,r.v}}},$e=(e,t,r,n,a,o,i)=>ze(0,{a:null,b:null,node:r,parent:n,value:a,page:t,scope:o,meta:i},e),ze=(e,t,r,n=0)=>{let a=De(r),o=Ne[a],i={v:{idx:e,stack:t,type:r,id:n},l:null,r:null};3===a||4===a?Ee=Pe(Ee,i):(0===o.size?o.first=i:o.last.r=i,o.last=i),o.size+=1},De=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},Ie=new Set;let qe,Fe=1,Te=0,Be=0,Le=null,Ue=e=>{qe=e},We=e=>{Le=e};const Ke=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=A(e);if(e)return e}return null};let Ve,Ge=(e,t,r,n,a)=>{let o=Ke(e,n.id);return o?o.reg[n.id]:t?(Ye(t,n,a),t.reg[n.id]):n};const He=e=>e;let Ye=(e,t,r,a,o)=>{var i;let s=e.reg,l=t.sid,u=null==t||null===(i=t.meta)||void 0===i?void 0:i.serialize,c=e.fromSerialize&&"ignore"!==u&&(null==u?void 0:u.read)||He;if(s[t.id])return;let f={id:t.id,current:t.current,meta:t.meta};if(f.id in e.values.idMap)f.current=e.values.idMap[f.id];else if(l&&l in e.values.sidMap&&!(l in e.sidIdMap))f.current=c(e.values.sidMap[l]);else if(t.before&&!o){let o=0,i=r||!t.noInit||a;n(t.before,(t=>{switch(t.type){case x:{let n=t.from;if(n||t.fn){n&&Ye(e,n,r,a);let o=n&&s[n.id].current;i&&(f.current=t.fn?t.fn(o):o)}break}case"field":o||(o=1,f.current=Array.isArray(f.current)?[...f.current]:{...f.current}),Ye(e,t.from,r,a),i&&(f.current[t.field]=s[s[t.from.id].id].current)}}))}l&&(e.sidIdMap[l]=t.id),s[t.id]=f};const Je=(e,t,r)=>{try{return t(P(r),e.scope,r)}catch(t){console.error(t),e.fail=1,e.failReason=t}};let Xe=(e,t={})=>(se(e)&&(Xe(e.or,t),r(e,((e,r)=>{ue(e)||"or"===r||"and"===r||(t[r]=e)})),Xe(e.and,t)),t);const Qe=(e,t)=>{V(e.next,t),V(O(e),t),V(j(e),t)},Ze=(e,t,r)=>{let n;e.next.length=0,e.seq.length=0,e.scope=null;let a=j(e);for(;n=a.pop();)Qe(n,e),(t||r&&"sample"!==$(e,"op")||"crosslink"===n.family.type)&&Ze(n,t,"on"!==$(n,"op")&&r);for(a=O(e);n=a.pop();)Qe(n,e),r&&"crosslink"===n.family.type&&Ze(n,t,"on"!==$(n,"op")&&r)},et=e=>e.clear();let tt=(e,{deep:t}={})=>{let r=0;if(e.ownerSet&&e.ownerSet.delete(e),F(e))et(N(e));else if(L(e)){r=1;let t=e.history;et(t.events),et(t.effects),et(t.stores),et(t.domains)}Ze(C(e),!!t,r)},rt=e=>{let t=()=>tt(e);return t.unsubscribe=t,t},nt=(e,t,r,n,a)=>i({node:r,parent:e,child:t,scope:{fn:a},meta:{op:n},family:{owners:[e,t],links:t},regional:1}),at=(e,t)=>(a(le(t),".watch argument should be a function"),rt(i({scope:{fn:t},node:[we({fn:ye})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),ot=(e,t,r="event")=>{A(e)&&A(e).hooks[r](t)},it=(e,t,r)=>{let n=Xe(r),a="domain"===e,o=X(),{sid:i=null,named:s=null,domain:l=null,parent:c=l}=n,f=s||n.name||(a?"":o),d=u(f,c),p={op:t.kind=e,name:t.shortName=f,sid:t.sid=ae(i),named:s,unitId:t.id=o,serialize:n.serialize,derived:n.derived,config:n};if(t.parent=c,t.compositeName=d,t.defaultConfig=n,t.thru=e=>(H(0,"thru","js pipe"),e(t)),t.getType=()=>d.fullName,!a){t.subscribe=e=>(ce(e),t.watch(le(e)?e:t=>e.next&&e.next(t))),t[_]=()=>t;let e=ne();e&&(p.nativeTemplate=e)}return p};const st=(e,t,r,n)=>{let a;se(r)&&(a=r,r=r.fn);let o=d({name:`${e.shortName} → *`,derived:1,and:a});return nt(e,o,n,t,r),o},lt=(e,t,r,n,a)=>{let o=E(t),i=be({store:o,to:"a",priority:"read"});r===x&&(i.data.softRead=1);let s=[i,xe(n)];return f("storeOnMap",o,s,F(e)&&E(e)),nt(e,t,s,r,a)},ut=(e,t,n,o,i)=>{let s=e?e=>[...e]:e=>({...e}),u=e?[]:{},c=s(u),d=Ce(c),p=Ce(1);d.type=e?"list":"shape",d.noInit=1,f("combineBase",d,p);let h=m(c,{name:l(n),derived:1,and:o}),y=E(h);y.noInit=1,z(h,"isCombine",1);let g=_e(d);g.order={priority:"barrier"};let v=[ke(((e,t,r)=>(r.scope&&!r.scope.reg[d.id]&&(r.c=1),e))),g,be({store:p,to:"b"}),ke(((e,{key:r},n)=>{if(n.c||e!==n.a[r])return t&&n.b&&(n.a=s(n.a)),n.a[r]=e,1}),1),be({from:"a",target:d}),be({from:"value",store:0,target:p}),be({from:"value",store:1,target:p,priority:"barrier",batch:1}),_e(d,1),i&&xe()];return r(n,((e,t)=>{if(!F(e))return a(!I(e)&&!ue(e),`combine expects a store in a field ${t}`),void(c[t]=u[t]=e);u[t]=e.defaultState,c[t]=e.getState();let r=nt(e,h,v,"combine",i);r.scope.key=t;let n=E(e);je(d,{type:"field",field:t,from:n}),f("combineField",n,r)})),h.defaultShape=n,je(y,{type:x,from:d,fn:i}),ne()||(h.defaultState=i?y.current=i(c):u),h};let ct=(e,t,r)=>{try{return[1,e(...r)]}catch(e){return t(e),[0,null]}},ft=e=>{let t=R(e),r={ref:t};return t&&G(t.activeEffects,r),r},dt=(e,t,r,n,a,o)=>i=>{o.ref&&V(o.ref.activeEffects,o),s({target:[n,pt],params:[r?{status:"done",params:e,result:i}:{status:"fail",params:e,error:i},{value:i,fn:r?t.rs:t.rj}],defer:1,page:a.page,scope:o.ref,meta:a.meta})};const pt=i({node:[we({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}}),mt=["source","clock","target"],ht=(e,t)=>e+`: ${t} should be defined`;let yt=(e,t,r,n,o,i,s,l,u,c,p,y)=>{let g=!!o;a(!ue(r)||!ue(t),ht(e,"either source or clock"));let b=0;ue(r)?b=1:I(r)||(r=h(r)),ue(t)?t=r:(de(t,e,"clock"),Array.isArray(t)&&(t=v(t))),b&&(r=t),l||s||(s=r.shortName);let S="none";(p||n)&&(I(n)?S="unit":(a(le(n),"`filter` should be function or unit"),S="fn")),o?(de(o,e,"target"),pe(e,o)):"none"===S&&c&&F(r)&&F(t)?o=m(i?i(Oe(E(r)),Oe(E(t))):Oe(E(r)),{name:s,sid:y,or:l}):(o=d({name:s,derived:1,or:l}),f("sampleTarget",C(o)));let w=Ce(),k=[];if("unit"===S){let[r,a]=vt(n,o,t,w,e);k=[...gt(a),...gt(r)]}let[_,x]=vt(r,o,t,w,e),O=nt(t,o,[f("sampleSourceLoader"),be({from:M,target:w}),...gt(x),_e(_,1,u),...k,_e(w),"fn"===S&&xe(((e,t,{a:r})=>n(e,r)),1),i&&xe(me),f("sampleSourceUpward",g)],e,i);return oe(r,[O]),Object.assign(O.meta,l,{joint:1}),o};const gt=e=>[_e(e),ke(((e,t,{a:r})=>r),1)],vt=(e,t,r,n,a)=>{let o=F(e),s=o?E(e):Ce(),l=Ce(o);return o||i({parent:e,node:[be({from:M,target:s}),be({from:"value",store:1,target:l})],family:{owners:[e,t,r],links:t},meta:{op:a},regional:1}),f("sampleSource",l,s,n),[s,l]},bt=(e,t,r,n)=>{let a=e[t];a&&s({target:a,params:Array.isArray(a)?a.map((()=>r)):r,defer:1,stack:n})},St=e=>e;t.allSettled=(e,{scope:t,params:r}={})=>{if(!I(e))return Promise.reject(new Error("first argument should be unit"));if(!(B(e)||T(e)||F(e)||U(e)))return Promise.reject(new Error("first argument accepts only effects, events, stores or scopes"));U(e)&&(t=e);let n=y();n.parentFork=qe;let{fxCount:a}=t;G(a.scope.defers,n);let o=[],i=[];return U(e)||(G(o,e),G(i,B(e)?{params:r,req:{rs(e){n.value={status:"done",value:e}},rj(e){n.value={status:"fail",value:e}}}}:r)),G(o,a),G(i,null),s({target:o,params:i,scope:t}),n.req},t.attach=e=>{let t;[e,t]=c(e,1);let{source:r,effect:n,mapParams:a}=e,o=g(e,t);z(o,"attached",1);let i,{runner:l}=C(o).scope,f=ke(((e,t,n)=>{let i,{params:l,req:u,handler:c}=e,f=o.finally,d=ft(n),p=dt(l,u,0,f,n,d),m=n.a,h=B(c),y=1;if(a?[y,i]=ct(a,p,[l,m]):i=r&&h?m:l,y){if(!h)return e.args=[m,i],1;s({target:c,params:{params:i,req:{rs:dt(l,u,1,f,n,d),rj:p}},page:n.page,defer:1,meta:n.meta})}}),1,1);if(r){let e;F(r)?(e=r,oe(e,[o])):(e=h(r),oe(o,[e])),i=[_e(E(e)),f]}else i=[f];l.seq.splice(1,0,...i),o.use(n);let d=A(n);return d&&(Object.assign(D(o),u(o.shortName,d)),o.defaultConfig.parent=d),ot(n,o,"effect"),o},t.clearNode=tt,t.combine=h,t.createApi=(...e)=>{let[[t,n],a]=c(e),o={};return r(n,((e,r)=>{let n=o[r]=d(r,{parent:A(t),config:a});t.on(n,e),ot(t,n)})),o},t.createDomain=function e(t,a){let o=Xe({or:a,and:"string"==typeof t?{name:t}:t}),l=i({family:{type:"domain"},regional:1,parent:(null==o?void 0:o.domain)||(null==o?void 0:o.parent)}),u={history:{},graphite:l,hooks:{}};l.meta=it("domain",u,{parent:(null==o?void 0:o.domain)||(null==o?void 0:o.parent),or:o}),r({Event:d,Effect:g,Store:m,Domain:e},((e,t)=>{let r=t.toLowerCase(),a=d({named:`on${t}`});u.hooks[r]=a;let o=new Set;u.history[`${r}s`]=o,a.create=e=>(s(a,e),e),G(C(a).seq,ke(((e,t,r)=>(r.scope=null,e)))),a.watch((e=>{oe(u,[e]),o.add(e),e.ownerSet||(e.ownerSet=o),A(e)||(e.parent=u)})),oe(u,[a]),u[`onCreate${t}`]=e=>(n(o,e),a.watch(e)),u[`create${t}`]=u[r]=(t,r)=>{let n=Xe({and:r,or:t});return null!=n&&n.domain?e(t,r):a(e(t,{parent:u,or:n}))}}));let c=A(u);return c&&r(u.hooks,((e,t)=>nt(e,c.hooks[t]))),null!=o&&o.domain&&o.domain.hooks.domain(u),u},t.createEffect=g,t.createEvent=d,t.createNode=i,t.createStore=m,t.createStoreObject=(...e)=>(H(0,"createStoreObject","combine"),h(...e)),t.createWatch=({unit:e,fn:t,scope:r})=>{let n=[Me.run({fn:e=>t(e)})];if(r){let t=i({node:n}),a=e.graphite.id,o=r.additionalLinks,s=o[a]||[];return o[a]=s,s.push(t),k((()=>{let e=s.indexOf(t);-1!==e&&s.splice(e,1),tt(t)}))}{let t=i({node:n,parent:[e],family:{owners:e}});return k((()=>{tt(t)}))}},t.fork=(e,t)=>{let r,o=e;L(e)&&(r=e,o=t);let s=(e=>{let t=i({scope:{defers:[],inFlight:0,fxID:0},node:[ke(((e,t,r)=>{A(r)?"dec"===$(A(r).node,"needFxCounter")?t.inFlight-=1:(t.inFlight+=1,t.fxID+=1):t.fxID+=1})),Se({priority:"sampler",batch:1}),ke(((e,t)=>{let{defers:r,fxID:a}=t;t.inFlight>0||0===r.length||Promise.resolve().then((()=>{t.fxID===a&&n(r.splice(0,r.length),(e=>{Ue(e.parentFork),e.rs(e.value)}))}))}),0,1)]}),r=i({node:[ke(((e,t,r)=>{let n=A(r);if(n){let t=n.node;if(!$(t,"isCombine")||A(n)&&"combine"!==$(A(n).node,"op")){let n=R(r),a=t.scope.state.id,o=$(t,"sid");n.sidIdMap[o]=a,n.values.sidMap[o]=e;let i=$(t,"serialize");i&&n.sidSerializeSettings.set(o,"ignore"===i?{ignore:1}:{ignore:0,write:i.write})}}}))]}),a=i({node:[ke(((e,t,r)=>{let n=R(r);if(n){let e=A(r);e&&(!$(e.node,"isCombine")||A(e)&&"combine"!==$(A(e).node,"op"))&&(n.warnSerialize=1)}}))]}),o={cloneOf:e,reg:{},values:{sidMap:{},idMap:{}},sidIdMap:{},sidSerializeSettings:new Map,getState(e){if("current"in e)return Ge(Le,o,null,e).current;let t=C(e);return Ge(Le,o,t,t.scope.state,1).current},kind:"scope",graphite:i({family:{type:"domain",links:[t,r,a]},meta:{unit:"fork"},scope:{forkInFlightCounter:t}}),additionalLinks:{},handlers:{sidMap:{},unitMap:new Map},fxCount:t,storeChange:r,warnSerializeNode:a,activeEffects:[]};return o})(r);if(o){let e=o.scope;if(e){let t=e.activeEffects;e.activeEffects=[],s.activeEffects=t,n(t,(e=>e.ref=s))}if(o.values){let{sidMap:e,unitMap:t,hasSidDoubles:r}=w(o.values,(e=>a(F(e),"Values map can contain only stores as keys")));Object.assign(s.values.sidMap,e),n(t,((e,t)=>{s.values.idMap[t.stateRef.id]=e})),s.fromSerialize=!(Array.isArray(o.values)||o.values instanceof Map),s.hasSidDoubles=r}o.handlers&&(s.handlers=w(o.handlers,(e=>a(B(e),"Handlers map can contain only effects as keys"))))}return s},t.forward=e=>{let t="forward",[{from:r,to:n},a]=c(e,1);return de(r,t,'"from"'),de(n,t,'"to"'),pe(t,n,"to"),rt(i({parent:r,child:n,meta:{op:t,config:a},family:{},regional:1}))},t.fromObservable=e=>{ce(e);let t=_ in e?e[_]():e;a(t.subscribe,"expect observable to have .subscribe");let r=d(),n=rt(r);return t.subscribe({next:r,error:n,complete:n}),r},t.guard=(...e)=>{let[[t,r],n]=c(e);return r||(r=t,t=r.source),b(r,"guard"),yt("guard",r.clock,t,r.filter,r.target,null,r.name,n,!r.greedy,0,1)},t.hydrate=(e,{values:t})=>{a(se(t),"values property should be an object");let{sidMap:r,unitMap:o}=w(t),i=Object.getOwnPropertyNames(r),l={};n(o,((e,t)=>{l[t.stateRef.id]=t}));let u,c,f,d=[],p=[];U(e)?(u=e,f=1,a(u.cloneOf,"scope should be created from domain"),c=C(u.cloneOf)):L(e)?c=C(e):a(0,"first argument of hydrate should be domain or scope"),S(c,((e,t)=>{if(t&&K(i,t)){G(d,e);let n=$(e,"serialize");n&&"ignore"!==n&&(r[t]=n.read(r[t])),G(p,r[t])}else e.scope.state.id in l&&(G(d,e),G(p,o.get(l[e.scope.state.id])))}),1),s({target:d,params:p,scope:u}),f&&Object.assign(u.values.sidMap,r)},t.is=W,t.launch=s,t.merge=v,t.restore=(e,t,n)=>{if(F(e))return H(0,"restore($store)"),e;if(T(e)||B(e)){let r=A(e),a=m(t,{parent:r,name:e.shortName,and:n});return nt(B(e)?e.doneData:e,a),r&&r.hooks.store(a),a}let a=Array.isArray(e)?[]:{};return r(e,((e,t)=>a[t]=F(e)?e:m(e,{name:t}))),a},t.sample=(...e)=>{let t,r,n,a,[[o,i,s],l]=c(e),u=1;return ue(i)&&se(o)&&b(o,"sample")&&(i=o.clock,s=o.fn,u=!o.greedy,a=o.filter,t=o.target,r=o.name,n=o.sid,o=o.source),yt("sample",i,o,a,t,s,r,l,u,1,0,n)},t.scopeBind=(e,{scope:t,safe:r}={})=>{a(t||qe||r,"scopeBind cannot be called outside of forked .watch");let n=t||qe;return B(e)?t=>{let r=y();return s({target:e,params:{params:t,req:r},scope:n}),r.req}:t=>(s({target:e,params:t,scope:n}),t)},t.serialize=(e,t={})=>{e.warnSerialize&&console.error("There is a store without sid in this scope, its value is omitted"),a(!e.hasSidDoubles,"duplicate sid found in this scope");let n=t.ignore?t.ignore.map((({sid:e})=>e)):[],o={};return r(e.values.sidMap,((t,r)=>{var a;if(K(n,r))return;let i=e.sidIdMap[r],s=null!==(a=e.sidSerializeSettings.get(r))&&void 0!==a?a:{ignore:0,write:St};s.ignore||(o[r]=(0,s.write)(i&&i in e.reg?e.reg[i].current:t))})),"onlyChanges"in t&&!t.onlyChanges&&(a(e.cloneOf,"scope should be created from domain"),S(C(e.cloneOf),((t,r)=>{r in o||K(n,r)||$(t,"isCombine")||"ignore"===$(t,"serialize")||(o[r]=e.getState(t))}))),o},t.setGraphInspector=e=>{J=e},t.setInspector=e=>{Ve=e},t.setStoreName=(e,t)=>{e.shortName=t,Object.assign(D(e),u(t,A(e)))},t.split=(...e)=>{let t,n,o="split",[[s,l],u]=c(e),p=!l;p&&(t=s.cases,l=s.match,n=s.clock,s=s.source);let m=F(l),h=!I(l)&&le(l),y=!m&&!h&&se(l);a(I(s),"source must be a unit"),t||(t={}),p?r(t,((e,t)=>pe(o,e,`cases.${t}`))):(a(y,"match should be an object"),r(l,((e,r)=>t[r]=d({derived:1,named:`cases.${r}`,and:u}))),t.__=d({derived:1,named:"cases.__",and:u}));let g,v=new Set([].concat(s,n||[],Object.values(t))),b=Object.keys(m||h?t:l);if(m||h)m&&v.add(l),g=[m&&_e(E(l),0,1),Se({safe:m,filter:1,pure:!m,fn(e,t,r){let n=String(m?r.a:l(e));bt(t,K(b,n)?n:"__",e,r)}})];else if(y){let e=Ce({});e.type="shape";let t,n=[];r(l,((r,a)=>{if(I(r)){t=1,G(n,a),v.add(r);let o=nt(r,[],[_e(e),ke(((e,t,{a:r})=>r[a]=e))]);if(F(r)){e.current[a]=r.getState();let t=E(r);je(e,{from:t,field:a,type:"field"}),f("splitMatchStore",t,o)}}})),t&&f("splitBase",e),g=[t&&_e(e,0,1),xe(((e,t,r)=>{for(let a=0;a<b.length;a++){let o=b[a];if(K(n,o)?r.a[o]:l[o](e))return void bt(t,o,e,r)}bt(t,"__",e,r)}),1)]}else a(0,"expect match to be unit, function or object");let S=i({meta:{op:o},parent:n?[]:s,scope:t,node:g,family:{owners:Array.from(v)},regional:1});if(n&&yt(o,n,s,null,S,null,o,u,0,0,0),!p)return t},t.step=Me,t.version="22.8.6",t.withFactory=({sid:e,name:t,loc:r,method:n,fn:a})=>o(i({meta:{sidRoot:ae(e),sid:e,name:t,loc:r,method:n,type:"factory"}}),a),t.withRegion=o},484957:function(e,t){(e=>{function t(e,t){for(let r in e)t(e[r],r)}function r(e,t){e.forEach(t)}function n(e,t){if(!e)throw Error(t)}function a(e,t){let r=D(e).meta||{};fe={id:D(e).id,parent:fe,value:e,template:r.template||pe(),sidRoot:r.sidRoot||fe&&fe.sidRoot,meta:r};try{return t()}finally{de("region"),fe=L(fe)}}function o({node:e=[],from:t,source:n,parent:a=t||n,to:o,target:i,child:s=o||i,scope:l={},meta:u={},family:c={type:"regular"},regional:f}={}){let d=ye(a),p=ye(c.links),m=ye(c.owners),h=[];r(e,(e=>e&&ne(h,e)));let y={id:ue(),seq:h,next:ye(s),meta:u,scope:l,family:{type:c.type||E,links:p,owners:m}};return r(p,(e=>ne(I(e),y))),r(m,(e=>ne(q(e),y))),r(d,(e=>ne(e.next,y))),f&&fe&&he(T(fe),[y]),y}function i(e,t,n){let a,o=Qe,i=null,s=He;if(e.target&&(t=e.params,n=e.defer,a=e.meta,o="page"in e?e.page:o,e.stack&&(i=e.stack),s=U(e)||s,e=e.target),s&&He&&s!==He&&(He=null),Array.isArray(e))for(let r=0;r<e.length;r++)We("pure",o,D(e[r]),i,t[r],s,a);else We("pure",o,D(e),i,t,s,a);if(n&&!Ye)return;let l,u,c,f,d,p,m={isRoot:Ye,currentPage:Qe,scope:He,isWatch:Je,isPure:Xe};Ye=0;e:for(;f=Ue();){let{idx:e,stack:t,type:n}=f;c=t.node,Qe=d=t.page,He=U(t),d?p=d.reg:He&&(p=He.reg);let a=!!d,o=!!He,i={fail:0,scope:c.scope};l=u=0;for(let r=e;r<c.seq.length&&!l;r++){let s=c.seq[r];if(s.order){let{priority:a,barrierID:o}=s.order,i=o?d?`${d.fullID}_${o}`:o:0;if(r!==e||n!==a){o?Ge.has(i)||(Ge.add(i),Ke(r,t,a,o)):Ke(r,t,a);continue e}o&&Ge.delete(i)}switch(s.type){case"mov":{let e,r=s.data;switch(r.from){case N:e=T(t);break;case z:case"b":e=t[r.from];break;case R:e=r.store;break;case _:if(p&&!p[r.store.id])if(a){let e=tt(d,r.store.id);t.page=d=e,e?p=e.reg:o?(ot(He,r.store,0,1,r.softRead),p=He.reg):p=void 0}else o&&ot(He,r.store,0,1,r.softRead);e=Ie(p&&p[r.store.id]||r.store)}switch(r.to){case N:t.value=e;break;case z:case"b":t[r.to]=e;break;case _:nt(d,He,c,r.target).current=e}break}case"compute":let e=s.data;if(e.fn){Je="watch"===W(c,"op"),Xe=e.pure;let r=e.safe?(0,e.fn)(T(t),i.scope,t):it(i,e.fn,t);e.filter?u=!r:t.value=r,Je=m.isWatch,Xe=m.isPure}}l=i.fail||u}if(rt&&rt(t,i),!l){let e=T(t),n=U(t);if(r(c.next,(r=>{We("child",d,r,t,e,n)})),n){W(c,"needFxCounter")&&We("child",d,n.fxCount,t,e,n),W(c,"storeChange")&&We("child",d,n.storeChange,t,e,n),W(c,"warnSerialize")&&We("child",d,n.warnSerializeNode,t,e,n);let a=n.additionalLinks[c.id];a&&r(a,(r=>{We("child",d,r,t,e,n)}))}}}Ye=m.isRoot,Qe=m.currentPage,He=U(m)}function s(e,r="combine"){let n=r+"(",a="",o=0;return t(e,(e=>{o<25&&(null!=e&&(n+=a,n+=G(e)?V(e).fullName:e.toString()),o+=1,a=", ")})),n+")"}function l(e,t){let r,n,a=e;if(t){let a=V(t);0===e.length?(r=a.path,n=a.fullName):(r=a.path.concat([e]),n=0===a.fullName.length?e:a.fullName+"/"+e)}else r=0===e.length?[]:[e],n=e;return{shortName:a,fullName:n,path:r}}function u(e,t){let r=t?e:e[0];Se(r);let n=r.or,a=r.and;if(a){let r=t?a:a[0];if(ge(r)&&"and"in r){let r=u(a,t);e=r[0],n={...n,...r[1]}}else e=a}return[e,n]}function c(e,...t){let r=pe();if(r){let n=r.handlers[e];if(n)return n(r,...t)}}function f(e,t){let r=st({or:t,and:"string"==typeof e?{name:e}:e}),n=(e,...t)=>(ae(!W(n,"derived"),"call of derived event","createEvent"),ae(!Xe,"unit call from pure function","operators like sample"),Qe?((e,t,r,n)=>{let a=Qe,o=null;if(t)for(o=Qe;o&&o.template!==t;)o=L(o);et(o);let i=e.create(r,n);return et(a),i})(n,a,e,t):n.create(e,t)),a=pe(),s=Object.assign(n,{graphite:o({meta:yt(r.actualOp||x,n,r),regional:1}),create:e=>(i({target:n,params:e,scope:He}),e),watch:e=>mt(n,e),map:e=>gt(n,P,e,[$e()]),filter:e=>gt(n,"filter",e.fn?e:e.fn,[$e(Ce,1)]),filterMap:e=>gt(n,"filterMap",e,[$e(),Ae((e=>!be(e)),1)]),prepend(e){let t=f("* → "+n.shortName,{parent:L(n)});return c("eventPrepend",D(t)),pt(t,n,[$e()],"prepend",e),ht(n,t),t}});return null!=r&&r.domain&&r.domain.hooks.event(s),K(s,"id",s.graphite.id),de(s.graphite),s}function d(e,t,a,o){return ke(a,t,"first argument"),n(ve(o),"second argument should be a function"),ae(!W(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`),r(Array.isArray(a)?a:[a],(t=>{e.off(t),B(e).set(t,dt(vt(t,e,"on",Me,o)))})),e}function p(e,t){let a=st(t),s=De(e),l=f({named:"updates",derived:1});c("storeBase",s);let u=s.id,m={subscribers:new Map,updates:l,defaultState:e,stateRef:s,getState(){let e,t=s;if(Qe){let t=Qe;for(;t&&!t.reg[u];)t=L(t);t&&(e=t)}return!e&&He&&(ot(He,s,1),e=He),e&&(t=e.reg[u]),Ie(t)},setState:e=>i({target:m,params:e,defer:1,scope:He}),reset:(...e)=>(r(e,(e=>d(m,".reset",e,(()=>m.defaultState)))),m),on:(e,t)=>d(m,".on",e,t),off(e){let t=B(m).get(e);return t&&(t(),B(m).delete(e)),m},map(e,t){let r,n;ge(e)&&(r=e,e=e.fn),ae(be(t),"second argument of store.map","updateFilter");let a=m.getState();pe()?n=null:be(a)||(n=e(a,t));let o=p(n,{name:`${m.shortName} → *`,derived:1,and:r}),i=vt(m,o,P,xe,e);return qe(F(o),{type:P,fn:e,from:s}),F(o).noInit=1,c("storeMap",s,i),o},watch(e,t){if(!t||!G(e)){let t=mt(m,e);return c("storeWatch",s,e)||e(m.getState()),t}return n(ve(t),"second argument should be a function"),e.watch((e=>t(m.getState(),e)))}},h=yt(_,m,a),y=m.defaultConfig.updateFilter;m.graphite=o({scope:{state:s,fn:y},node:[Ae(((e,t,r)=>(r.scope&&!r.scope.reg[s.id]&&(r.b=1),e))),Re(s),Ae(((e,t,{a:r,b:n})=>!be(e)&&(e!==r||n)),1),y&&$e(xe,1),Ee({from:N,target:s})],child:l,meta:{...h,defaultState:e},regional:1}),K(m,"id",m.graphite.id),K(m,"rootStateRefId",u);let g=W(m,"serialize"),v=W(m,"derived"),b="ignore"===g,S=W(m,"sid");return S&&(K(m,"storeChange",1),s.sid=S),S||b||v||K(m,"warnSerialize",1),n(v||!be(e),"current state can't be undefined, use null instead"),he(m,[l]),null!=a&&a.domain&&a.domain.hooks.store(m),v||(m.reinit=f({named:"reinit"}),m.reset(m.reinit)),s.meta=m.graphite.meta,de(m.graphite),m}function m(...e){let t,r,a;[e,a]=u(e);let o,i,s,l=e[e.length-1];if(ve(l)?(r=e.slice(0,-1),t=l):r=e,1===r.length){let e=r[0];Y(e)||(o=e,i=1)}if(!i&&(o=r,t)){s=1;let e=t;t=t=>e(...t)}return n(ge(o),"shape should be an object"),bt(Array.isArray(o),!s,o,a,t)}function h(){let e={};return e.req=new Promise(((t,r)=>{e.rs=t,e.rj=r})),e.req.catch((()=>{})),e}function y(e,t={}){let r=st(ve(e)?{handler:e}:e,t),a=f(ve(e)?{handler:e}:e,{...t,actualOp:M}),s=D(a);K(s,"op",a.kind=M),a.use=e=>(n(ve(e),".use argument should be a function"),y.scope.handler=e,a),a.use.getCurrent=()=>y.scope.handler;let l=a.finally=f({named:"finally",derived:1}),u=a.done=l.filterMap({named:"done",fn({status:e,params:t,result:r}){if("done"===e)return{params:t,result:r}}}),c=a.fail=l.filterMap({named:"fail",fn({status:e,params:t,error:r}){if("fail"===e)return{params:t,error:r}}}),d=a.doneData=u.map({named:"doneData",fn:({result:e})=>e}),m=a.failData=c.map({named:"failData",fn:({error:e})=>e}),y=o({scope:{handler:a.defaultConfig.handler||(()=>n(0,`no handler used in ${a.getType()}`))},node:[Ae(((e,t,r)=>{let n=t.handler,o=U(r);if(o){let e=o.handlers.unitMap.get(a)||o.handlers.sidMap[a.sid];e&&(n=e)}return e.handler=n,e}),0,1),Ae((({params:e,req:t,handler:r,args:n=[e]},a,o)=>{let i=wt(o),s=kt(e,t,1,l,o,i),u=kt(e,t,0,l,o,i),[c,f]=St(r,u,n);c&&(ge(f)&&ve(f.then)?f.then(s,u):s(f))}),0,1)],meta:{op:"fx",fx:"runner"}});s.scope.runner=y,ne(s.seq,Ae(((e,{runner:t},r)=>{let n=L(r)?{params:e,req:{rs(e){},rj(e){}}}:e;return r.meta||(r.meta={fxID:ce()}),i({target:t,params:n,defer:1,scope:U(r),meta:r.meta}),n.params}),0,1)),a.create=e=>{let t=h(),r={params:e,req:t};if(He&&!Je){let e=He;t.req.finally((()=>{Ze(e)})).catch((()=>{}))}return i({target:a,params:r,scope:He}),t.req};let g=a.inFlight=p(0,{serialize:"ignore",named:(W(a,"name")||a.graphite.id)+".inFlight"}).on(a,(e=>e+1)).on(l,(e=>e-1)).map({fn:e=>e,named:"inFlight"});K(l,"needFxCounter","dec"),K(a,"needFxCounter",1);let v=a.pending=g.map({fn:e=>e>0,named:"pending"});return he(a,[l,u,c,d,m,v,g]),null!=r&&r.domain&&r.domain.hooks.effect(a),a}function g(e,t){ke(e,"merge","first argument");let r=f({name:s(e,"merge"),derived:1,and:t});return pt(e,r,[],"merge"),r}function v(e,t){let a=0;return r(xt,(r=>{r in e&&(n(null!=e[r],Mt(t,r)),a=1)})),a}function b(e,t,n){let a=[];!function e(o){te(a,o)||(ne(a,o),W(o,"op")===_&&(n||W(o,"sid"))&&t(o,W(o,"sid")),r(o.next,e),r(I(o),e),r(q(o),e))}(e)}function S(e,t){let a=Array.isArray(e)?new Map(e):e,o=new Map,i=0;if(a instanceof Map){let e={};return r(a,((r,a)=>{n(G(a),"Map key should be a unit"),t&&t(a,r),a.sid&&(a.sid in e&&(i=1),e[a.sid]=r),o.set(a,r)})),{sidMap:e,unitMap:o,hasSidDoubles:i}}return{sidMap:a,unitMap:o}}function w(e){let t=()=>e();return t.unsubscribe=()=>e(),t}let k="undefined"!=typeof Symbol&&Symbol.observable||"@@observable",_="store",x="event",M="effect",C="domain",O="scope",j="sampler",E="crosslink",P="map",N="stack",A="barrier",R="value",$="sample",z="a",D=e=>e.graphite||e,I=e=>e.family.owners,q=e=>e.family.links,F=e=>e.stateRef,T=e=>e.value,B=e=>e.subscribers,L=e=>e.parent,U=e=>e.scope,W=(e,t)=>D(e).meta[t],K=(e,t,r)=>D(e).meta[t]=r,V=e=>e.compositeName,G=e=>(ve(e)||ge(e))&&"kind"in e;const H=e=>t=>G(t)&&t.kind===e;let Y=H(_),J=H(x),X=H(M),Q=H(C),Z=H(O);var ee={__proto__:null,unit:G,store:Y,event:J,effect:X,domain:Q,scope:Z,attached:e=>X(e)&&1==W(e,"attached")};let te=(e,t)=>e.includes(t),re=(e,t)=>{let r=e.indexOf(t);-1!==r&&e.splice(r,1)},ne=(e,t)=>e.push(t),ae=(e,t,r)=>!e&&console.error(`${t} is deprecated${r?`, use ${r} instead`:""}`);const oe=()=>{let e=0;return()=>""+ ++e};let ie,se=oe(),le=oe(),ue=oe(),ce=oe(),fe=null,de=e=>{ie&&ie(e,fe)},pe=()=>fe&&fe.template,me=e=>(e&&fe&&fe.sidRoot&&(e=`${fe.sidRoot}|${e}`),e),he=(e,t)=>{let n=D(e);r(t,(e=>{let t=D(e);n.family.type!==C&&(t.family.type=E),ne(I(t),n),ne(q(n),t)}))},ye=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(D),ge=e=>"object"==typeof e&&null!==e,ve=e=>"function"==typeof e,be=e=>void 0===e,Se=e=>n(ge(e)||ve(e),"expect first argument be an object");const we=(e,t,r,a)=>n(!(!ge(e)&&!ve(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${r} to be a unit (store, event or effect)${a}`);let ke=(e,t,n)=>{Array.isArray(e)?r(e,((e,r)=>we(e,t,`${r} item of ${n}`,""))):we(e,t,n," or array of units")},_e=(e,t,n="target")=>r(ye(t),(t=>ae(!W(t,"derived"),`${e}: derived unit in "${n}"`,"createEvent/createStore"))),xe=(e,{fn:t},{a:r})=>t(e,r),Me=(e,{fn:t},{a:r})=>t(r,e),Ce=(e,{fn:t})=>t(e);const Oe=(e,t,r,n)=>{let a={id:le(),type:e,data:t};return r&&(a.order={priority:r},n&&(a.order.barrierID=++je)),a};let je=0,Ee=({from:e=_,store:t,target:r,to:n=(r?_:N),batch:a,priority:o})=>Oe("mov",{from:e,store:t,to:n,target:r},o,a),Pe=({fn:e,batch:t,priority:r,safe:n=0,filter:a=0,pure:o=0})=>Oe("compute",{fn:e,safe:n,filter:a,pure:o},r,t),Ne=({fn:e})=>Pe({fn:e,priority:M}),Ae=(e,t,r)=>Pe({fn:e,safe:1,filter:t,priority:r&&M}),Re=(e,t,r)=>Ee({store:e,to:t?N:z,priority:r&&j,batch:1}),$e=(e=Ce,t)=>Pe({fn:e,pure:1,filter:t}),ze={mov:Ee,compute:Pe,filter:({fn:e,pure:t})=>Pe({fn:e,filter:1,pure:t}),run:Ne},De=e=>({id:le(),current:e}),Ie=({current:e})=>e,qe=(e,t)=>{e.before||(e.before=[]),ne(e.before,t)},Fe=null;const Te=(e,t)=>{if(!e)return t;if(!t)return e;let r;return(e.v.type===t.v.type&&e.v.id>t.v.id||Ve(e.v.type)>Ve(t.v.type))&&(r=e,e=t,t=r),r=Te(e.r,t),e.r=e.l,e.l=r,e},Be=[];let Le=0;for(;Le<6;)ne(Be,{first:null,last:null,size:0}),Le+=1;const Ue=()=>{for(let e=0;e<6;e++){let t=Be[e];if(t.size>0){if(3===e||4===e){t.size-=1;let e=Fe.v;return Fe=Te(Fe.l,Fe.r),e}1===t.size&&(t.last=null);let r=t.first;return t.first=r.r,t.size-=1,r.v}}},We=(e,t,r,n,a,o,i)=>Ke(0,{a:null,b:null,node:r,parent:n,value:a,page:t,scope:o,meta:i},e),Ke=(e,t,r,n=0)=>{let a=Ve(r),o=Be[a],i={v:{idx:e,stack:t,type:r,id:n},l:null,r:null};3===a||4===a?Fe=Te(Fe,i):(0===o.size?o.first=i:o.last.r=i,o.last=i),o.size+=1},Ve=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case A:return 3;case j:return 4;case M:return 5;default:return-1}},Ge=new Set;let He,Ye=1,Je=0,Xe=0,Qe=null,Ze=e=>{He=e},et=e=>{Qe=e};const tt=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=L(e);if(e)return e}return null};let rt,nt=(e,t,r,n,a)=>{let o=tt(e,n.id);return o?o.reg[n.id]:t?(ot(t,n,a),t.reg[n.id]):n};const at=e=>e;let ot=(e,t,n,a,o)=>{var i;let s=e.reg,l=t.sid,u=null==t||null===(i=t.meta)||void 0===i?void 0:i.serialize,c=e.fromSerialize&&"ignore"!==u&&(null==u?void 0:u.read)||at;if(s[t.id])return;let f={id:t.id,current:t.current,meta:t.meta};if(f.id in e.values.idMap)f.current=e.values.idMap[f.id];else if(l&&l in e.values.sidMap&&!(l in e.sidIdMap))f.current=c(e.values.sidMap[l]);else if(t.before&&!o){let o=0,i=n||!t.noInit||a;r(t.before,(t=>{switch(t.type){case P:{let r=t.from;if(r||t.fn){r&&ot(e,r,n,a);let o=r&&s[r.id].current;i&&(f.current=t.fn?t.fn(o):o)}break}case"field":o||(o=1,f.current=Array.isArray(f.current)?[...f.current]:{...f.current}),ot(e,t.from,n,a),i&&(f.current[t.field]=s[s[t.from.id].id].current)}}))}l&&(e.sidIdMap[l]=t.id),s[t.id]=f};const it=(e,t,r)=>{try{return t(T(r),e.scope,r)}catch(t){console.error(t),e.fail=1,e.failReason=t}};let st=(e,r={})=>(ge(e)&&(st(e.or,r),t(e,((e,t)=>{be(e)||"or"===t||"and"===t||(r[t]=e)})),st(e.and,r)),r);const lt=(e,t)=>{re(e.next,t),re(I(e),t),re(q(e),t)},ut=(e,t,r)=>{let n;e.next.length=0,e.seq.length=0,e.scope=null;let a=q(e);for(;n=a.pop();)lt(n,e),(t||r&&"sample"!==W(e,"op")||n.family.type===E)&&ut(n,t,"on"!==W(n,"op")&&r);for(a=I(e);n=a.pop();)lt(n,e),r&&n.family.type===E&&ut(n,t,"on"!==W(n,"op")&&r)},ct=e=>e.clear();let ft=(e,{deep:t}={})=>{let r=0;if(e.ownerSet&&e.ownerSet.delete(e),Y(e))ct(B(e));else if(Q(e)){r=1;let t=e.history;ct(t.events),ct(t.effects),ct(t.stores),ct(t.domains)}ut(D(e),!!t,r)},dt=e=>{let t=()=>ft(e);return t.unsubscribe=t,t},pt=(e,t,r,n,a)=>o({node:r,parent:e,child:t,scope:{fn:a},meta:{op:n},family:{owners:[e,t],links:t},regional:1}),mt=(e,t)=>(n(ve(t),".watch argument should be a function"),dt(o({scope:{fn:t},node:[Ne({fn:Ce})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),ht=(e,t,r=x)=>{L(e)&&L(e).hooks[r](t)},yt=(e,t,r)=>{let n=st(r),a=e===C,o=se(),{sid:i=null,named:s=null,domain:u=null,parent:c=u}=n,f=s||n.name||(a?"":o),d=l(f,c),p={op:t.kind=e,name:t.shortName=f,sid:t.sid=me(i),named:s,unitId:t.id=o,serialize:n.serialize,derived:n.derived,config:n};if(t.parent=c,t.compositeName=d,t.defaultConfig=n,t.thru=e=>(ae(0,"thru","js pipe"),e(t)),t.getType=()=>d.fullName,!a){t.subscribe=e=>(Se(e),t.watch(ve(e)?e:t=>e.next&&e.next(t))),t[k]=()=>t;let e=pe();e&&(p.nativeTemplate=e)}return p};const gt=(e,t,r,n)=>{let a;ge(r)&&(a=r,r=r.fn);let o=f({name:`${e.shortName} → *`,derived:1,and:a});return pt(e,o,n,t,r),o},vt=(e,t,r,n,a)=>{let o=F(t),i=Ee({store:o,to:z,priority:"read"});r===P&&(i.data.softRead=1);let s=[i,$e(n)];return c("storeOnMap",o,s,Y(e)&&F(e)),pt(e,t,s,r,a)},bt=(e,r,a,o,i)=>{let l=e?e=>[...e]:e=>({...e}),u=e?[]:{},f=l(u),d=De(f),m=De(1);d.type=e?"list":"shape",d.noInit=1,c("combineBase",d,m);let h=p(f,{name:s(a),derived:1,and:o}),y=F(h);y.noInit=1,K(h,"isCombine",1);let g=Re(d);g.order={priority:"barrier"};let v=[Ae(((e,t,r)=>(r.scope&&!r.scope.reg[d.id]&&(r.c=1),e))),g,Ee({store:m,to:"b"}),Ae(((e,{key:t},n)=>{if(n.c||e!==n.a[t])return r&&n.b&&(n.a=l(n.a)),n.a[t]=e,1}),1),Ee({from:z,target:d}),Ee({from:R,store:0,target:m}),Ee({from:R,store:1,target:m,priority:A,batch:1}),Re(d,1),i&&$e()];return t(a,((e,t)=>{if(!Y(e))return n(!G(e)&&!be(e),`combine expects a store in a field ${t}`),void(f[t]=u[t]=e);u[t]=e.defaultState,f[t]=e.getState();let r=pt(e,h,v,"combine",i);r.scope.key=t;let a=F(e);qe(d,{type:"field",field:t,from:a}),c("combineField",a,r)})),h.defaultShape=a,qe(y,{type:P,from:d,fn:i}),pe()||(h.defaultState=i?y.current=i(f):u),h};let St=(e,t,r)=>{try{return[1,e(...r)]}catch(e){return t(e),[0,null]}},wt=e=>{let t=U(e),r={ref:t};return t&&ne(t.activeEffects,r),r},kt=(e,t,r,n,a,o)=>s=>{o.ref&&re(o.ref.activeEffects,o),i({target:[n,_t],params:[r?{status:"done",params:e,result:s}:{status:"fail",params:e,error:s},{value:s,fn:r?t.rs:t.rj}],defer:1,page:a.page,scope:o.ref,meta:a.meta})};const _t=o({node:[Ne({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}}),xt=["source","clock","target"],Mt=(e,t)=>e+`: ${t} should be defined`;let Ct=(e,t,r,a,o,i,s,l,u,d,h,y)=>{let v=!!o;n(!be(r)||!be(t),Mt(e,"either source or clock"));let b=0;be(r)?b=1:G(r)||(r=m(r)),be(t)?t=r:(ke(t,e,"clock"),Array.isArray(t)&&(t=g(t))),b&&(r=t),l||s||(s=r.shortName);let S="none";(h||a)&&(G(a)?S="unit":(n(ve(a),"`filter` should be function or unit"),S="fn")),o?(ke(o,e,"target"),_e(e,o)):"none"===S&&d&&Y(r)&&Y(t)?o=p(i?i(Ie(F(r)),Ie(F(t))):Ie(F(r)),{name:s,sid:y,or:l}):(o=f({name:s,derived:1,or:l}),c("sampleTarget",D(o)));let w=De(),k=[];if("unit"===S){let[r,n]=jt(a,o,t,w,e);k=[...Ot(n),...Ot(r)]}let[_,x]=jt(r,o,t,w,e),M=pt(t,o,[c("sampleSourceLoader"),Ee({from:N,target:w}),...Ot(x),Re(_,1,u),...k,Re(w),"fn"===S&&$e(((e,t,{a:r})=>a(e,r)),1),i&&$e(xe),c("sampleSourceUpward",v)],e,i);return he(r,[M]),Object.assign(M.meta,l,{joint:1}),o};const Ot=e=>[Re(e),Ae(((e,t,{a:r})=>r),1)],jt=(e,t,r,n,a)=>{let i=Y(e),s=i?F(e):De(),l=De(i);return i||o({parent:e,node:[Ee({from:N,target:s}),Ee({from:R,store:1,target:l})],family:{owners:[e,t,r],links:t},meta:{op:a},regional:1}),c("sampleSource",l,s,n),[s,l]},Et=(e,t,r,n)=>{let a=e[t];a&&i({target:a,params:Array.isArray(a)?a.map((()=>r)):r,defer:1,stack:n})},Pt=e=>e;e.allSettled=(e,{scope:t,params:r}={})=>{if(!G(e))return Promise.reject(new Error("first argument should be unit"));if(!(X(e)||J(e)||Y(e)||Z(e)))return Promise.reject(new Error("first argument accepts only effects, events, stores or scopes"));Z(e)&&(t=e);let n=h();n.parentFork=He;let{fxCount:a}=t;ne(a.scope.defers,n);let o=[],s=[];return Z(e)||(ne(o,e),ne(s,X(e)?{params:r,req:{rs(e){n.value={status:"done",value:e}},rj(e){n.value={status:"fail",value:e}}}}:r)),ne(o,a),ne(s,null),i({target:o,params:s,scope:t}),n.req},e.attach=e=>{let t;[e,t]=u(e,1);let{source:r,effect:n,mapParams:a}=e,o=y(e,t);K(o,"attached",1);let s,{runner:c}=D(o).scope,f=Ae(((e,t,n)=>{let s,{params:l,req:u,handler:c}=e,f=o.finally,d=wt(n),p=kt(l,u,0,f,n,d),m=n.a,h=X(c),y=1;if(a?[y,s]=St(a,p,[l,m]):s=r&&h?m:l,y){if(!h)return e.args=[m,s],1;i({target:c,params:{params:s,req:{rs:kt(l,u,1,f,n,d),rj:p}},page:n.page,defer:1,meta:n.meta})}}),1,1);if(r){let e;Y(r)?(e=r,he(e,[o])):(e=m(r),he(o,[e])),s=[Re(F(e)),f]}else s=[f];c.seq.splice(1,0,...s),o.use(n);let d=L(n);return d&&(Object.assign(V(o),l(o.shortName,d)),o.defaultConfig.parent=d),ht(n,o,M),o},e.clearNode=ft,e.combine=m,e.createApi=(...e)=>{let[[r,n],a]=u(e),o={};return t(n,((e,t)=>{let n=o[t]=f(t,{parent:L(r),config:a});r.on(n,e),ht(r,n)})),o},e.createDomain=function e(n,a){let s=st({or:a,and:"string"==typeof n?{name:n}:n}),l=o({family:{type:C},regional:1,parent:(null==s?void 0:s.domain)||(null==s?void 0:s.parent)}),u={history:{},graphite:l,hooks:{}};l.meta=yt(C,u,{parent:(null==s?void 0:s.domain)||(null==s?void 0:s.parent),or:s}),t({Event:f,Effect:y,Store:p,Domain:e},((e,t)=>{let n=t.toLowerCase(),a=(e=>f({named:e}))(`on${t}`);u.hooks[n]=a;let o=new Set;u.history[`${n}s`]=o,a.create=e=>(i(a,e),e),ne(D(a).seq,Ae(((e,t,r)=>(r.scope=null,e)))),a.watch((e=>{he(u,[e]),o.add(e),e.ownerSet||(e.ownerSet=o),L(e)||(e.parent=u)})),he(u,[a]),u[`onCreate${t}`]=e=>(r(o,e),a.watch(e)),u[`create${t}`]=u[n]=(t,r)=>{let n=st({and:r,or:t});return null!=n&&n.domain?e(t,r):a(e(t,{parent:u,or:n}))}}));let c=L(u);return c&&t(u.hooks,((e,t)=>pt(e,c.hooks[t]))),null!=s&&s.domain&&s.domain.hooks.domain(u),u},e.createEffect=y,e.createEvent=f,e.createNode=o,e.createStore=p,e.createStoreObject=(...e)=>(ae(0,"createStoreObject","combine"),m(...e)),e.createWatch=({unit:e,fn:t,scope:r})=>{let n=[ze.run({fn:e=>t(e)})];if(r){let t=o({node:n}),a=e.graphite.id,i=r.additionalLinks,s=i[a]||[];return i[a]=s,s.push(t),w((()=>{let e=s.indexOf(t);-1!==e&&s.splice(e,1),ft(t)}))}{let t=o({node:n,parent:[e],family:{owners:e}});return w((()=>{ft(t)}))}},e.fork=(e,t)=>{let a,i=e;Q(e)&&(a=e,i=t);let s=(e=>{let t=o({scope:{defers:[],inFlight:0,fxID:0},node:[Ae(((e,t,r)=>{L(r)?"dec"===W(L(r).node,"needFxCounter")?t.inFlight-=1:(t.inFlight+=1,t.fxID+=1):t.fxID+=1})),Pe({priority:j,batch:1}),Ae(((e,t)=>{let{defers:n,fxID:a}=t;t.inFlight>0||0===n.length||Promise.resolve().then((()=>{t.fxID===a&&r(n.splice(0,n.length),(e=>{Ze(e.parentFork),e.rs(e.value)}))}))}),0,1)]}),n=o({node:[Ae(((e,t,r)=>{let n=L(r);if(n){let t=n.node;if(!W(t,"isCombine")||L(n)&&"combine"!==W(L(n).node,"op")){let n=U(r),a=t.scope.state.id,o=W(t,"sid");n.sidIdMap[o]=a,n.values.sidMap[o]=e;let i=W(t,"serialize");i&&n.sidSerializeSettings.set(o,"ignore"===i?{ignore:1}:{ignore:0,write:i.write})}}}))]}),a=o({node:[Ae(((e,t,r)=>{let n=U(r);if(n){let e=L(r);e&&(!W(e.node,"isCombine")||L(e)&&"combine"!==W(L(e).node,"op"))&&(n.warnSerialize=1)}}))]}),i={cloneOf:e,reg:{},values:{sidMap:{},idMap:{}},sidIdMap:{},sidSerializeSettings:new Map,getState(e){if("current"in e)return nt(Qe,i,null,e).current;let t=D(e);return nt(Qe,i,t,t.scope.state,1).current},kind:O,graphite:o({family:{type:C,links:[t,n,a]},meta:{unit:"fork"},scope:{forkInFlightCounter:t}}),additionalLinks:{},handlers:{sidMap:{},unitMap:new Map},fxCount:t,storeChange:n,warnSerializeNode:a,activeEffects:[]};return i})(a);if(i){let e=i.scope;if(e){let t=e.activeEffects;e.activeEffects=[],s.activeEffects=t,r(t,(e=>e.ref=s))}if(i.values){let{sidMap:e,unitMap:t,hasSidDoubles:a}=S(i.values,(e=>n(Y(e),"Values map can contain only stores as keys")));Object.assign(s.values.sidMap,e),r(t,((e,t)=>{s.values.idMap[t.stateRef.id]=e})),s.fromSerialize=!(Array.isArray(i.values)||i.values instanceof Map),s.hasSidDoubles=a}i.handlers&&(s.handlers=S(i.handlers,(e=>n(X(e),"Handlers map can contain only effects as keys"))))}return s},e.forward=e=>{let t="forward",[{from:r,to:n},a]=u(e,1);return ke(r,t,'"from"'),ke(n,t,'"to"'),_e(t,n,"to"),dt(o({parent:r,child:n,meta:{op:t,config:a},family:{},regional:1}))},e.fromObservable=e=>{Se(e);let t=k in e?e[k]():e;n(t.subscribe,"expect observable to have .subscribe");let r=f(),a=dt(r);return t.subscribe({next:r,error:a,complete:a}),r},e.guard=(...e)=>{let[[t,r],n]=u(e);return r||(r=t,t=r.source),v(r,"guard"),Ct("guard",r.clock,t,r.filter,r.target,null,r.name,n,!r.greedy,0,1)},e.hydrate=(e,{values:t})=>{n(ge(t),"values property should be an object");let{sidMap:a,unitMap:o}=S(t),s=Object.getOwnPropertyNames(a),l={};r(o,((e,t)=>{l[t.stateRef.id]=t}));let u,c,f,d=[],p=[];Z(e)?(u=e,f=1,n(u.cloneOf,"scope should be created from domain"),c=D(u.cloneOf)):Q(e)?c=D(e):n(0,"first argument of hydrate should be domain or scope"),b(c,((e,t)=>{if(t&&te(s,t)){ne(d,e);let r=W(e,"serialize");r&&"ignore"!==r&&(a[t]=r.read(a[t])),ne(p,a[t])}else e.scope.state.id in l&&(ne(d,e),ne(p,o.get(l[e.scope.state.id])))}),1),i({target:d,params:p,scope:u}),f&&Object.assign(u.values.sidMap,a)},e.is=ee,e.launch=i,e.merge=g,e.restore=(e,r,n)=>{if(Y(e))return ae(0,"restore($store)"),e;if(J(e)||X(e)){let t=L(e),a=p(r,{parent:t,name:e.shortName,and:n});return pt(X(e)?e.doneData:e,a),t&&t.hooks.store(a),a}let a=Array.isArray(e)?[]:{};return t(e,((e,t)=>a[t]=Y(e)?e:p(e,{name:t}))),a},e.sample=(...e)=>{let t,r,n,a,[[o,i,s],l]=u(e),c=1;return be(i)&&ge(o)&&v(o,$)&&(i=o.clock,s=o.fn,c=!o.greedy,a=o.filter,t=o.target,r=o.name,n=o.sid,o=o.source),Ct($,i,o,a,t,s,r,l,c,1,0,n)},e.scopeBind=(e,{scope:t,safe:r}={})=>{n(t||He||r,"scopeBind cannot be called outside of forked .watch");let a=t||He;return X(e)?t=>{let r=h();return i({target:e,params:{params:t,req:r},scope:a}),r.req}:t=>(i({target:e,params:t,scope:a}),t)},e.serialize=(e,r={})=>{e.warnSerialize&&console.error("There is a store without sid in this scope, its value is omitted"),n(!e.hasSidDoubles,"duplicate sid found in this scope");let a=r.ignore?r.ignore.map((({sid:e})=>e)):[],o={};return t(e.values.sidMap,((t,r)=>{var n;if(te(a,r))return;let i=e.sidIdMap[r],s=null!==(n=e.sidSerializeSettings.get(r))&&void 0!==n?n:{ignore:0,write:Pt};s.ignore||(o[r]=(0,s.write)(i&&i in e.reg?e.reg[i].current:t))})),"onlyChanges"in r&&!r.onlyChanges&&(n(e.cloneOf,"scope should be created from domain"),b(D(e.cloneOf),((t,r)=>{r in o||te(a,r)||W(t,"isCombine")||"ignore"===W(t,"serialize")||(o[r]=e.getState(t))}))),o},e.setGraphInspector=e=>{ie=e},e.setInspector=e=>{rt=e},e.setStoreName=(e,t)=>{e.shortName=t,Object.assign(V(e),l(t,L(e)))},e.split=(...e)=>{let r,a,i="split",[[s,l],d]=u(e),p=!l;p&&(r=s.cases,l=s.match,a=s.clock,s=s.source);let m=Y(l),h=!G(l)&&ve(l),y=!m&&!h&&ge(l);n(G(s),"source must be a unit"),r||(r={}),p?t(r,((e,t)=>_e(i,e,`cases.${t}`))):(n(y,"match should be an object"),t(l,((e,t)=>r[t]=f({derived:1,named:`cases.${t}`,and:d}))),r.__=f({derived:1,named:"cases.__",and:d}));let g,v=new Set([].concat(s,a||[],Object.values(r))),b=Object.keys(m||h?r:l);if(m||h)m&&v.add(l),g=[m&&Re(F(l),0,1),Pe({safe:m,filter:1,pure:!m,fn(e,t,r){let n=String(m?r.a:l(e));Et(t,te(b,n)?n:"__",e,r)}})];else if(y){let e=De({});e.type="shape";let r,n=[];t(l,((t,a)=>{if(G(t)){r=1,ne(n,a),v.add(t);let o=pt(t,[],[Re(e),Ae(((e,t,{a:r})=>r[a]=e))]);if(Y(t)){e.current[a]=t.getState();let r=F(t);qe(e,{from:r,field:a,type:"field"}),c("splitMatchStore",r,o)}}})),r&&c("splitBase",e),g=[r&&Re(e,0,1),$e(((e,t,r)=>{for(let a=0;a<b.length;a++){let o=b[a];if(te(n,o)?r.a[o]:l[o](e))return void Et(t,o,e,r)}Et(t,"__",e,r)}),1)]}else n(0,"expect match to be unit, function or object");let S=o({meta:{op:i},parent:a?[]:s,scope:r,node:g,family:{owners:Array.from(v)},regional:1});if(a&&Ct(i,a,s,null,S,null,i,d,0,0,0),!p)return r},e.step=ze,e.version="22.8.6",e.withFactory=({sid:e,name:t,loc:r,method:n,fn:i})=>a(o({meta:{sidRoot:me(e),sid:e,name:t,loc:r,method:n,type:"factory"}}),i),e.withRegion=a,Object.defineProperty(e,"__esModule",{value:1})})(t)},453934:(e,t,r)=>{"use strict";r.d(t,{castDraft:()=>ne,createDraft:()=>te,current:()=>J,enableMapSet:()=>Q,finishDraft:()=>re,isDraft:()=>m,produce:()=>ee});var n=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&s(e,r,t[r]);if(a)for(var r of a(t))i.call(t,r)&&s(e,r,t[r]);return e},u=Symbol.for("immer-nothing"),c=Symbol.for("immer-draftable"),f=Symbol.for("immer-state");function d(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var p=Object.getPrototypeOf;function m(e){return!!e&&!!e[f]}function h(e){var t;return!!e&&(g(e)||Array.isArray(e)||!!e[c]||!!(null==(t=e.constructor)?void 0:t[c])||k(e)||_(e))}var y=Object.prototype.constructor.toString();function g(e){if(!e||"object"!=typeof e)return!1;const t=p(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===y}function v(e,t){0===b(e)?Object.entries(e).forEach((([r,n])=>{t(r,n,e)})):e.forEach(((r,n)=>t(n,r,e)))}function b(e){const t=e[f];return t?t.type_:Array.isArray(e)?1:k(e)?2:_(e)?3:0}function S(e,t){return 2===b(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function w(e,t,r){const n=b(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function k(e){return e instanceof Map}function _(e){return e instanceof Set}function x(e){return e.copy_||e.base_}function M(e,t){if(k(e))return new Map(e);if(_(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&g(e)){if(!p(e)){const t=Object.create(null);return Object.assign(t,e)}return l({},e)}const r=Object.getOwnPropertyDescriptors(e);delete r[f];let n=Reflect.ownKeys(r);for(let t=0;t<n.length;t++){const a=n[t],o=r[a];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(p(e),r)}function C(e,t=!1){return j(e)||m(e)||!h(e)||(b(e)>1&&(e.set=e.add=e.clear=e.delete=O),Object.freeze(e),t&&v(e,((e,t)=>C(t,!0)))),e}function O(){d(2)}function j(e){return Object.isFrozen(e)}var E,P={};function N(e){const t=P[e];return t||d(0),t}function A(e,t){P[e]||(P[e]=t)}function R(){return E}function $(e,t){t&&(N("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function z(e){D(e),e.drafts_.forEach(q),e.drafts_=null}function D(e){e===E&&(E=e.parent_)}function I(e){return E={drafts_:[],parent_:E,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function q(e){const t=e[f];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function F(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[f].modified_&&(z(t),d(4)),h(e)&&(e=T(t,e),t.parent_||L(t,e)),t.patches_&&N("Patches").generateReplacementPatches_(r[f].base_,e,t.patches_,t.inversePatches_)):e=T(t,r,[]),z(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==u?e:void 0}function T(e,t,r){if(j(t))return t;const n=t[f];if(!n)return v(t,((a,o)=>B(e,n,t,a,o,r))),t;if(n.scope_!==e)return t;if(!n.modified_)return L(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let a=t,o=!1;3===n.type_&&(a=new Set(t),t.clear(),o=!0),v(a,((a,i)=>B(e,n,t,a,i,r,o))),L(e,t,!1),r&&e.patches_&&N("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function B(e,t,r,n,a,o,i){if(m(a)){const i=T(e,a,o&&t&&3!==t.type_&&!S(t.assigned_,n)?o.concat(n):void 0);if(w(r,n,i),!m(i))return;e.canAutoFreeze_=!1}else i&&r.add(a);if(h(a)&&!j(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;T(e,a),t&&t.scope_.parent_||L(e,a)}}function L(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&C(t,r)}var U={get(e,t){if(t===f)return e;const r=x(e);if(!S(r,t))return function(e,t,r){var n;const a=V(t,r);return a?"value"in a?a.value:null==(n=a.get)?void 0:n.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!h(n)?n:n===K(e.base_,t)?(H(e),e.copy_[t]=Y(n,e)):n},has:(e,t)=>t in x(e),ownKeys:e=>Reflect.ownKeys(x(e)),set(e,t,r){const n=V(x(e),t);if(null==n?void 0:n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=K(x(e),t),i=null==n?void 0:n[f];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((a=r)===(o=n)?0!==a||1/a==1/o:a!=a&&o!=o)&&(void 0!==r||S(e.base_,t)))return!0;H(e),G(e)}var a,o;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==K(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,H(e),G(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=x(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){d(11)},getPrototypeOf:e=>p(e.base_),setPrototypeOf(){d(12)}},W={};function K(e,t){const r=e[f];return(r?x(r):e)[t]}function V(e,t){if(!(t in e))return;let r=p(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=p(r)}}function G(e){e.modified_||(e.modified_=!0,e.parent_&&G(e.parent_))}function H(e){e.copy_||(e.copy_=M(e.base_,e.scope_.immer_.useStrictShallowCopy_))}v(U,((e,t)=>{W[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),W.deleteProperty=function(e,t){return W.set.call(this,e,t,void 0)},W.set=function(e,t,r){return U.set.call(this,e[0],t,r,e[0])};function Y(e,t){const r=k(e)?N("MapSet").proxyMap_(e,t):_(e)?N("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:R(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,o=U;r&&(a=[n],o=W);const{revoke:i,proxy:s}=Proxy.revocable(a,o);return n.draft_=s,n.revoke_=i,s}(e,t);return(t?t.scope_:R()).drafts_.push(r),r}function J(e){return m(e)||d(10),X(e)}function X(e){if(!h(e)||j(e))return e;const t=e[f];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=M(e,t.scope_.immer_.useStrictShallowCopy_)}else r=M(e,!0);return v(r,((e,t)=>{w(r,e,X(t))})),t&&(t.finalized_=!1),r}function Q(){class e extends Map{constructor(e,t){super(),this[f]={type_:2,parent_:t,scope_:t?t.scope_:R(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:e,draft_:this,isManual_:!1,revoked_:!1}}get size(){return x(this[f]).size}has(e){return x(this[f]).has(e)}set(e,r){const n=this[f];return a(n),x(n).has(e)&&x(n).get(e)===r||(t(n),G(n),n.assigned_.set(e,!0),n.copy_.set(e,r),n.assigned_.set(e,!0)),this}delete(e){if(!this.has(e))return!1;const r=this[f];return a(r),t(r),G(r),r.base_.has(e)?r.assigned_.set(e,!1):r.assigned_.delete(e),r.copy_.delete(e),!0}clear(){const e=this[f];a(e),x(e).size&&(t(e),G(e),e.assigned_=new Map,v(e.base_,(t=>{e.assigned_.set(t,!1)})),e.copy_.clear())}forEach(e,t){x(this[f]).forEach(((r,n,a)=>{e.call(t,this.get(n),n,this)}))}get(e){const r=this[f];a(r);const n=x(r).get(e);if(r.finalized_||!h(n))return n;if(n!==r.base_.get(e))return n;const o=Y(n,r);return t(r),r.copy_.set(e,o),o}keys(){return x(this[f]).keys()}values(){const e=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const t=e.next();if(t.done)return t;return{done:!1,value:this.get(t.value)}}}}entries(){const e=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const t=e.next();if(t.done)return t;const r=this.get(t.value);return{done:!1,value:[t.value,r]}}}}[Symbol.iterator](){return this.entries()}}function t(e){e.copy_||(e.assigned_=new Map,e.copy_=new Map(e.base_))}class r extends Set{constructor(e,t){super(),this[f]={type_:3,parent_:t,scope_:t?t.scope_:R(),modified_:!1,finalized_:!1,copy_:void 0,base_:e,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return x(this[f]).size}has(e){const t=this[f];return a(t),t.copy_?!!t.copy_.has(e)||!(!t.drafts_.has(e)||!t.copy_.has(t.drafts_.get(e))):t.base_.has(e)}add(e){const t=this[f];return a(t),this.has(e)||(n(t),G(t),t.copy_.add(e)),this}delete(e){if(!this.has(e))return!1;const t=this[f];return a(t),n(t),G(t),t.copy_.delete(e)||!!t.drafts_.has(e)&&t.copy_.delete(t.drafts_.get(e))}clear(){const e=this[f];a(e),x(e).size&&(n(e),G(e),e.copy_.clear())}values(){const e=this[f];return a(e),n(e),e.copy_.values()}entries(){const e=this[f];return a(e),n(e),e.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(e,t){const r=this.values();let n=r.next();for(;!n.done;)e.call(t,n.value,n.value,this),n=r.next()}}function n(e){e.copy_||(e.copy_=new Set,e.base_.forEach((t=>{if(h(t)){const r=Y(t,e);e.drafts_.set(t,r),e.copy_.add(r)}else e.copy_.add(t)})))}function a(e){e.revoked_&&d(3,JSON.stringify(x(e)))}A("MapSet",{proxyMap_:function(t,r){return new e(t,r)},proxySet_:function(e,t){return new r(e,t)}})}var Z=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const n=this;return function(e=r,...a){return n.produce(e,(e=>t.call(this,e,...a)))}}let n;if("function"!=typeof t&&d(6),void 0!==r&&"function"!=typeof r&&d(7),h(e)){const a=I(this),o=Y(e,void 0);let i=!0;try{n=t(o),i=!1}finally{i?z(a):D(a)}return $(a,r),F(n,a)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===u&&(n=void 0),this.autoFreeze_&&C(n,!0),r){const t=[],a=[];N("Patches").generateReplacementPatches_(e,n,t,a),r(t,a)}return n}d(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){h(e)||d(8),m(e)&&(e=J(e));const t=I(this),r=Y(e,void 0);return r[f].isManual_=!0,D(t),r}finishDraft(e,t){const r=e&&e[f];r&&r.isManual_||d(9);const{scope_:n}=r;return $(n,t),F(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=N("Patches").applyPatches_;return m(e)?n(e,t):this.produce(e,(e=>n(e,t)))}},ee=Z.produce,te=(Z.produceWithPatches.bind(Z),Z.setAutoFreeze.bind(Z),Z.setUseStrictShallowCopy.bind(Z),Z.applyPatches.bind(Z),Z.createDraft.bind(Z)),re=Z.finishDraft.bind(Z);function ne(e){return e}},306526:(e,t,r)=>{"use strict";r.d(t,{ReactReduxContext:()=>n});var n=r(667294).createContext(null)},60682:(e,t,r)=>{"use strict";r.d(t,{default:()=>f});var n=r(497326),a=r(894578),o=r(667294),i=r(45697),s=r.n(i),l=r(306526),u=r(286496),c=function(e){function t(t){var r;r=e.call(this,t)||this;var a=t.store;r.notifySubscribers=r.notifySubscribers.bind((0,n.default)(r));var o=new u.default(a);return o.onStateChange=r.notifySubscribers,r.state={store:a,subscription:o},r.previousState=a.getState(),r}(0,a.default)(t,e);var r=t.prototype;return r.componentDidMount=function(){this._isMounted=!0,this.state.subscription.trySubscribe(),this.previousState!==this.props.store.getState()&&this.state.subscription.notifyNestedSubs()},r.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe(),this.state.subscription.tryUnsubscribe(),this._isMounted=!1},r.componentDidUpdate=function(e){if(this.props.store!==e.store){this.state.subscription.tryUnsubscribe();var t=new u.default(this.props.store);t.onStateChange=this.notifySubscribers,this.setState({store:this.props.store,subscription:t})}},r.notifySubscribers=function(){this.state.subscription.notifyNestedSubs()},r.render=function(){var e=this.props.context||l.ReactReduxContext;return o.createElement(e.Provider,{value:this.state},this.props.children)},t}(o.Component);c.propTypes={store:s().shape({subscribe:s().func.isRequired,dispatch:s().func.isRequired,getState:s().func.isRequired}),context:s().object,children:s().any};const f=c},726685:(e,t,r)=>{"use strict";r.d(t,{default:()=>v});var n=r(487462),a=r(263366),o=r(108679),i=r.n(o),s=r(441143),l=r.n(s),u=r(667294),c=r(659864),f=r(286496),d=r(306526),p=[],m=[null,null];function h(e,t){var r=e[1];return[t.payload,r+1]}var y=function(){return[null,0]},g="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?u.useLayoutEffect:u.useEffect;function v(e,t){void 0===t&&(t={});var r=t,o=r.getDisplayName,s=void 0===o?function(e){return"ConnectAdvanced("+e+")"}:o,v=r.methodName,b=void 0===v?"connectAdvanced":v,S=r.renderCountProp,w=void 0===S?void 0:S,k=r.shouldHandleStateChanges,_=void 0===k||k,x=r.storeKey,M=void 0===x?"store":x,C=r.withRef,O=void 0!==C&&C,j=r.forwardRef,E=void 0!==j&&j,P=r.context,N=void 0===P?d.ReactReduxContext:P,A=(0,a.default)(r,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);l()(void 0===w,"renderCountProp is removed. render counting is built into the latest React Dev Tools profiling extension"),l()(!O,"withRef is removed. To access the wrapped instance, use a ref on the connected component");l()("store"===M,"storeKey has been removed and does not do anything. To use a custom Redux store for specific components, create a custom React context with React.createContext(), and pass the context object to React Redux's Provider and specific components like: <Provider context={MyContext}><ConnectedComponent context={MyContext} /></Provider>. You may also pass a {context : MyContext} option to connect");var R=N;return function(t){var r=t.displayName||t.name||"Component",o=s(r),d=(0,n.default)({},A,{getDisplayName:s,methodName:b,renderCountProp:w,shouldHandleStateChanges:_,storeKey:M,displayName:o,wrappedComponentName:r,WrappedComponent:t}),v=A.pure;var S=v?u.useMemo:function(e){return e()};function k(r){var i=(0,u.useMemo)((function(){var e=r.forwardedRef,t=(0,a.default)(r,["forwardedRef"]);return[r.context,e,t]}),[r]),s=i[0],v=i[1],b=i[2],w=(0,u.useMemo)((function(){return s&&s.Consumer&&(0,c.isContextConsumer)(u.createElement(s.Consumer,null))?s:R}),[s,R]),k=(0,u.useContext)(w),x=Boolean(r.store),M=Boolean(k)&&Boolean(k.store);l()(x||M,'Could not find "store" in the context of "'+o+'". Either wrap the root component in a <Provider>, or pass a custom React context provider to <Provider> and the corresponding React context consumer to '+o+" in connect options.");var C=r.store||k.store,O=(0,u.useMemo)((function(){return function(t){return e(t.dispatch,d)}(C)}),[C]),j=(0,u.useMemo)((function(){if(!_)return m;var e=new f.default(C,x?null:k.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[C,x,k]),E=j[0],P=j[1],N=(0,u.useMemo)((function(){return x?k:(0,n.default)({},k,{subscription:E})}),[x,k,E]),A=(0,u.useReducer)(h,p,y),$=A[0][0],z=A[1];if($&&$.error)throw $.error;var D=(0,u.useRef)(),I=(0,u.useRef)(b),q=(0,u.useRef)(),F=(0,u.useRef)(!1),T=S((function(){return q.current&&b===I.current?q.current:O(C.getState(),b)}),[C,$,b]);g((function(){I.current=b,D.current=T,F.current=!1,q.current&&(q.current=null,P())})),g((function(){if(_){var e=!1,t=null,r=function(){if(!e){var r,n,a=C.getState();try{r=O(a,I.current)}catch(e){n=e,t=e}n||(t=null),r===D.current?F.current||P():(D.current=r,q.current=r,F.current=!0,z({type:"STORE_UPDATED",payload:{latestStoreState:a,error:n}}))}};E.onStateChange=r,E.trySubscribe(),r();return function(){if(e=!0,E.tryUnsubscribe(),t)throw t}}}),[C,E,O]);var B=(0,u.useMemo)((function(){return u.createElement(t,(0,n.default)({},T,{ref:v}))}),[v,t,T]);return(0,u.useMemo)((function(){return _?u.createElement(w.Provider,{value:N},B):B}),[w,B,N])}var x=v?u.memo(k):k;if(x.WrappedComponent=t,x.displayName=o,E){var C=u.forwardRef((function(e,t){return u.createElement(x,(0,n.default)({},e,{forwardedRef:t}))}));return C.displayName=o,C.WrappedComponent=t,i()(C,t)}return i()(x,t)}}},757034:(e,t,r)=>{"use strict";r.d(t,{default:()=>p});var n=r(487462),a=r(263366),o=r(726685),i=r(235067),s=r(955112),l=r(611743),u=r(105532),c=r(538548);function f(e,t,r){for(var n=t.length-1;n>=0;n--){var a=t[n](e);if(a)return a}return function(t,n){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+n.wrappedComponentName+".")}}function d(e,t){return e===t}const p=(y=(h=void 0===m?{}:m).connectHOC,g=void 0===y?o.default:y,v=h.mapStateToPropsFactories,b=void 0===v?l.default:v,S=h.mapDispatchToPropsFactories,w=void 0===S?s.default:S,k=h.mergePropsFactories,_=void 0===k?u.default:k,x=h.selectorFactory,M=void 0===x?c.default:x,function(e,t,r,o){void 0===o&&(o={});var s=o,l=s.pure,u=void 0===l||l,c=s.areStatesEqual,p=void 0===c?d:c,m=s.areOwnPropsEqual,h=void 0===m?i.default:m,y=s.areStatePropsEqual,v=void 0===y?i.default:y,S=s.areMergedPropsEqual,k=void 0===S?i.default:S,x=(0,a.default)(s,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),C=f(e,b,"mapStateToProps"),O=f(t,w,"mapDispatchToProps"),j=f(r,_,"mergeProps");return g(M,(0,n.default)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:C,initMapDispatchToProps:O,initMergeProps:j,pure:u,areStatesEqual:p,areOwnPropsEqual:h,areStatePropsEqual:v,areMergedPropsEqual:k},x))});var m,h,y,g,v,b,S,w,k,_,x,M},955112:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var n=r(14890),a=r(326343);const o=[function(e){return"function"==typeof e?(0,a.wrapMapToPropsFunc)(e,"mapDispatchToProps"):void 0},function(e){return e?void 0:(0,a.wrapMapToPropsConstant)((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?(0,a.wrapMapToPropsConstant)((function(t){return(0,n.bindActionCreators)(e,t)})):void 0}]},611743:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var n=r(326343);const a=[function(e){return"function"==typeof e?(0,n.wrapMapToPropsFunc)(e,"mapStateToProps"):void 0},function(e){return e?void 0:(0,n.wrapMapToPropsConstant)((function(){return{}}))}]},105532:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var n=r(487462);function a(e,t,r){return(0,n.default)({},r,e,t)}const o=[function(e){return"function"==typeof e?function(e){return function(t,r){r.displayName;var n,a=r.pure,o=r.areMergedPropsEqual,i=!1;return function(t,r,s){var l=e(t,r,s);return i?a&&o(l,n)||(n=l):(i=!0,n=l),n}}}(e):void 0},function(e){return e?void 0:function(){return a}}]},538548:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var n=r(263366);function a(e,t,r,n){return function(a,o){return r(e(a,o),t(n,o),o)}}function o(e,t,r,n,a){var o,i,s,l,u,c=a.areStatesEqual,f=a.areOwnPropsEqual,d=a.areStatePropsEqual,p=!1;function m(a,p){var m,h,y=!f(p,i),g=!c(a,o);return o=a,i=p,y&&g?(s=e(o,i),t.dependsOnOwnProps&&(l=t(n,i)),u=r(s,l,i)):y?(e.dependsOnOwnProps&&(s=e(o,i)),t.dependsOnOwnProps&&(l=t(n,i)),u=r(s,l,i)):g?(m=e(o,i),h=!d(m,s),s=m,h&&(u=r(s,l,i)),u):u}return function(a,c){return p?m(a,c):(s=e(o=a,i=c),l=t(n,i),u=r(s,l,i),p=!0,u)}}function i(e,t){var r=t.initMapStateToProps,i=t.initMapDispatchToProps,s=t.initMergeProps,l=(0,n.default)(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),u=r(e,l),c=i(e,l),f=s(e,l);return(l.pure?o:a)(u,c,f,e,l)}},326343:(e,t,r)=>{"use strict";function n(e){return function(t,r){var n=e(t,r);function a(){return n}return a.dependsOnOwnProps=!1,a}}function a(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function o(e,t){return function(t,r){r.displayName;var n=function(e,t){return n.dependsOnOwnProps?n.mapToProps(e,t):n.mapToProps(e)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,r){n.mapToProps=e,n.dependsOnOwnProps=a(e);var o=n(t,r);return"function"==typeof o&&(n.mapToProps=o,n.dependsOnOwnProps=a(o),o=n(t,r)),o},n}}r.d(t,{wrapMapToPropsConstant:()=>n,wrapMapToPropsFunc:()=>o})},172307:(e,t,r)=>{"use strict";r.d(t,{useDispatch:()=>a});var n=r(900420);function a(){return(0,n.useStore)().dispatch}},202975:(e,t,r)=>{"use strict";r.d(t,{useReduxContext:()=>s});var n=r(667294),a=r(441143),o=r.n(a),i=r(306526);function s(){var e=(0,n.useContext)(i.ReactReduxContext);return o()(e,"could not find react-redux context value; please ensure the component is wrapped in a <Provider>"),e}},259854:(e,t,r)=>{"use strict";r.d(t,{useSelector:()=>c});var n=r(667294),a=r(441143),o=r.n(a),i=r(202975),s=r(286496),l="undefined"!=typeof window?n.useLayoutEffect:n.useEffect,u=function(e,t){return e===t};function c(e,t){void 0===t&&(t=u),o()(e,"You must pass a selector to useSelectors");var r,a=(0,i.useReduxContext)(),c=a.store,f=a.subscription,d=(0,n.useReducer)((function(e){return e+1}),0)[1],p=(0,n.useMemo)((function(){return new s.default(c,f)}),[c,f]),m=(0,n.useRef)(),h=(0,n.useRef)(),y=(0,n.useRef)();try{r=e!==h.current||m.current?e(c.getState()):y.current}catch(e){var g="An error occured while selecting the store state: "+e.message+".";throw m.current&&(g+="\nThe error may be correlated with this previous error:\n"+m.current.stack+"\n\nOriginal stack trace:"),new Error(g)}return l((function(){h.current=e,y.current=r,m.current=void 0})),l((function(){function e(){try{var e=h.current(c.getState());if(t(e,y.current))return;y.current=e}catch(e){m.current=e}d({})}return p.onStateChange=e,p.trySubscribe(),e(),function(){return p.tryUnsubscribe()}}),[c,p]),r}},900420:(e,t,r)=>{"use strict";r.d(t,{useStore:()=>a});var n=r(202975);function a(){return(0,n.useReduxContext)().store}},50533:(e,t,r)=>{"use strict";r.d(t,{Provider:()=>n.default,batch:()=>u.unstable_batchedUpdates,connect:()=>a.default,shallowEqual:()=>c.default,useDispatch:()=>o.useDispatch,useSelector:()=>i.useSelector,useStore:()=>s.useStore});var n=r(60682),a=(r(726685),r(306526),r(757034)),o=r(172307),i=r(259854),s=r(900420),l=r(209256),u=r(471679),c=r(235067);(0,l.setBatch)(u.unstable_batchedUpdates)},286496:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var n=r(209256),a=null,o={notify:function(){}};var i=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=o,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){var e,t,r;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=(e=(0,n.getBatch)(),t=[],r=[],{clear:function(){r=a,t=a},notify:function(){var n=t=r;e((function(){for(var e=0;e<n.length;e++)n[e]()}))},get:function(){return r},subscribe:function(e){var n=!0;return r===t&&(r=t.slice()),r.push(e),function(){n&&t!==a&&(n=!1,r===t&&(r=t.slice()),r.splice(r.indexOf(e),1))}}}))},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=o)},e}()},209256:(e,t,r)=>{"use strict";r.d(t,{getBatch:()=>o,setBatch:()=>a});var n=function(e){e()},a=function(e){return n=e},o=function(){return n}},471679:(e,t,r)=>{"use strict";r.d(t,{unstable_batchedUpdates:()=>n.unstable_batchedUpdates});var n=r(973935)},235067:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var n=Object.prototype.hasOwnProperty;function a(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function o(e,t){if(a(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(var i=0;i<r.length;i++)if(!n.call(t,r[i])||!a(e[r[i]],t[r[i]]))return!1;return!0}},753894:(e,t,r)=>{"use strict";function n(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(a){return"function"==typeof a?a(r,n,e):t(a)}}}}r.d(t,{default:()=>o});var a=n();a.withExtraArgument=n;const o=a},14890:(e,t,r)=>{"use strict";r.d(t,{applyMiddleware:()=>m,bindActionCreators:()=>f,combineReducers:()=>u,compose:()=>p,createStore:()=>s});var n=r(427164),a=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+a(),REPLACE:"@@redux/REPLACE"+a(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+a()}};function i(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function s(e,t,r){var a;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(s)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var l=e,u=t,c=[],f=c,d=!1;function p(){f===c&&(f=c.slice())}function m(){if(d)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return u}function h(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(d)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return p(),f.push(e),function(){if(t){if(d)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,p();var r=f.indexOf(e);f.splice(r,1)}}}function y(e){if(!i(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,u=l(u,e)}finally{d=!1}for(var t=c=f,r=0;r<t.length;r++){(0,t[r])()}return e}return y({type:o.INIT}),(a={dispatch:y,subscribe:h,getState:m,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");l=e,y({type:o.REPLACE})}})[n.default]=function(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function r(){e.next&&e.next(m())}return r(),{unsubscribe:t(r)}}})[n.default]=function(){return this},e},a}function l(e,t){var r=t&&t.type;return"Given "+(r&&'action "'+String(r)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function u(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];0,"function"==typeof e[a]&&(r[a]=e[a])}var i,s=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:o.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var n=!1,a={},o=0;o<s.length;o++){var u=s[o],c=r[u],f=e[u],d=c(f,t);if(void 0===d){var p=l(u,t);throw new Error(p)}a[u]=d,n=n||d!==f}return n?a:e}}function c(e,t){return function(){return t(e.apply(this,arguments))}}function f(e,t){if("function"==typeof e)return c(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(e),n={},a=0;a<r.length;a++){var o=r[a],i=e[o];"function"==typeof i&&(n[o]=c(i,t))}return n}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function m(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},a={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},o=t.map((function(e){return e(a)}));return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){d(e,t,r[t])}))}return e}({},r,{dispatch:n=p.apply(void 0,o)(r.dispatch)})}}}},504190:(e,t,r)=>{"use strict";r.d(t,{createGate:()=>k,useEvent:()=>m,useGate:()=>b,useList:()=>v,useStore:()=>h,useStoreMap:()=>g,useUnit:()=>y});var n=r(667294),a=r(798116),o=r(552798),i=r(61688);function s(e,t,r,n){let o=[a.step.run({fn:e=>t(e)})];if(n&&o.unshift(n),r){let t=(0,a.createNode)({node:o}),n=e.graphite.id,i=r.additionalLinks,s=i[n]||[];return i[n]=s,s.push(t),()=>{let e=s.indexOf(t);-1!==e&&s.splice(e,1),(0,a.clearNode)(t)}}{let t=(0,a.createNode)({node:o,parent:[e],family:{owners:e}});return()=>{(0,a.clearNode)(t)}}}function l(e,t){return t.displayName=e,t}function u(e,t){a.is.store(e)||_("expect useStore argument to be a store");let r=n.useCallback((r=>s(e,r,t)),[e,t]),o=n.useCallback((()=>O(e,t)),[e,t]);return M(r,o,o)}function c(e,t){let r=a.is.unit(e),o={};r?o={unit:e}:"@@unitShape"in e?"function"==typeof e["@@unitShape"]?o=e["@@unitShape"]():_("expect @@unitShape to be a function"):o=e;let i=Array.isArray(o),l=n.useRef({stale:1,justSubscribed:0,scope:t}),[u,c,f,d,p]=n.useMemo((()=>{l.current.stale=1;let e=Array.isArray(o)?[]:{},r=[],n=[],i=[],s=[];for(let l in o){let u=o[l];a.is.unit(u)||_("expect useUnit argument to be a unit"),a.is.event(u)||a.is.effect(u)?(e[l]=t?(0,a.scopeBind)(u,{scope:t}):u,i.push(l),s.push(u)):(e[l]=null,r.push(l),n.push(u))}return[e,r,n,i,s]}),[l,t,...Object.keys(o),...Object.values(o)]),m=n.useRef({value:u,storeKeys:c,eventKeys:d,eventValues:p}),h=n.useCallback((e=>{let r=l.current;r.justSubscribed=1;let n=()=>{r.stale||(r.stale=1,e())},o=a.step.compute({priority:"sampler",batch:1}),i=f.map((e=>s(e,n,t,o)));return()=>{i.forEach((e=>e()))}}),[f,t,m,l]),y=n.useCallback((()=>{let e,n=m.current,a=l.current,o=0,s=n.value,h=n.storeKeys,y=n.eventKeys,g=n.eventValues,v=t!==a.scope;if(a.stale||a.justSubscribed||v){o=!a.justSubscribed||v,e=i?[...u]:{...u},h.length===c.length&&y.length===d.length||(o=1);for(let r=0;r<c.length;r++){let n=O(f[r],t),a=c[r];o||(o=h.includes(a)?s[a]!==n:1),e[a]=n}for(let e=0;e<d.length;e++){let t=p[e],r=d[e];o||(o=y.includes(r)?g[y.indexOf(r)]!==t:1)}}return o&&(n.value=e),n.storeKeys=c,n.eventKeys=d,n.eventValues=p,a.stale=0,a.justSubscribed=!o,a.scope=t,r?n.value.unit:n.value}),[h,f,p,t,m,l]);return M(h,y,y)}function f([e,t],r){let o,i,l,u,c=j;t?(o=t,l=e,u=[]):({fn:o,store:l,keys:u,defaultValue:i,updateFilter:c=j}=e),a.is.store(l)||_("useStoreMap expects a store"),Array.isArray(u)||_("useStoreMap expects an array as keys"),"function"!=typeof o&&_("useStoreMap expects a function");let f=n.useCallback((e=>s(l,e,r)),[l,r]),d=n.useCallback((()=>O(l,r)),[l,r]),p=n.useRef(),m=n.useRef(),h=n.useRef(u);return C(f,d,d,(e=>{if(p.current!==e||!((e,t)=>{if(!e||!t||e.length!==t.length)return 0;let r=1;for(let n=0;n<e.length;n++)if(e[n]!==t[n]){r=0;break}return r})(h.current,u)){let t=o(e,u);void 0===t&&void 0!==i&&(t=i),p.current=e,h.current=u,void 0!==t&&(m.current=t)}return m.current}),((e,t)=>!c(t,e)))}function d(e,t={},r){let{open:a,close:o,set:i}=c({open:e.open,close:e.close,set:e.set},r),s=n.useMemo((()=>({open:a,close:o,set:i})),[e,a]),l=n.useRef({value:null,count:0});x((()=>(s.open(l.current.value),()=>s.close(l.current.value))),[s]),((e,t)=>{if(e===t)return 1;if("object"==typeof e&&null!==e&&"object"==typeof t&&null!==t){let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return 0;for(let n=0;n<r.length;n++){let a=r[n];if(e[a]!==t[a])return 0}return 1}return 0})(l.current.value,t)||(l.current.value=t,l.current.count+=1),x((()=>{s.set(l.current.value)}),[l.current.count])}function p(e){let t=n.useContext(E);return e&&!t&&_("No scope found, consider adding <Provider> to app root"),t}function m(e,t){return((e,t)=>{if(!t)return e;let r=a.is.unit(e)||"object"!=typeof e?{event:e}:e;return n.useMemo((()=>{if(a.is.unit(e))return(0,a.scopeBind)(e,{scope:t});let r=Array.isArray(e)?[]:{};for(let n in e)r[n]=(0,a.scopeBind)(e[n],{scope:t});return r}),[t,...Object.keys(r),...Object.values(r)])})(e,p(null==t?void 0:t.forceScope))}function h(e,t){return u(e,p(null==t?void 0:t.forceScope))}function y(e,t){return c(e,p(null==t?void 0:t.forceScope))}function g(e,t){return f([e,t],p(null==e?void 0:e.forceScope))}function v(e,t,r){return((e,t,r)=>{let o,i,s,c=[];"object"==typeof t&&null!==t?(t.keys&&(c=t.keys),({fn:o,getKey:i,placeholder:s}=t)):o=t,a.is.store(e)||_("expect useList first argument to be a store"),"function"!=typeof o&&_("expect useList's renderItem to be a function"),Array.isArray(c)||_("expect useList's keys to be an array");let d=n.useMemo((()=>{let t=l(`${e.shortName||"Unknown"}.Item`,(t=>{let{index:n,keys:a,keyVal:o,value:i}=t;if(p.current[1])return p.current[0](i,o);let s=f([{store:e,keys:[n,...a],fn:(e,t)=>e[t[0]]}],r);return p.current[0](s,n)}));return n.memo(t)}),[e,r,!!i]),p=n.useRef([o,i]);p.current=[o,i];let m=n.useMemo((()=>c),c);if(i){let t=u(e,r);return 0===t.length&&s?s:t.map((e=>{let t=p.current[1](e);return n.createElement(d,{keyVal:t,key:t,keys:m,value:e})}))}{let t=f([{store:e,keys:[e],fn:e=>e.length}],r);return 0===t&&s?s:Array.from({length:t},((e,t)=>n.createElement(d,{index:t,key:t,keys:m})))}})(e,t,p(null==r?void 0:r.forceScope))}function b(e,t={},r){return d(e,t,p(null==r?void 0:r.forceScope))}function S(e,t){let r=t?e:e[0];var n;(e=>{if(!e)throw Error("expect first argument be an object")})(N(n=r)||(e=>"function"==typeof e)(n));let a=r.or,o=r.and;if(o){let r=t?o:o[0];if(N(r)&&"and"in r){let r=S(o,t);e=r[0],a={...a,...r[1]}}else e=o}return[e,a]}function w(e,t){let r=t&&N(n=t[0])&&(n.and||n.or)?t:[{and:t}];var n;let a,[[o,i],s]=S(r),l={},u={},c=s;var f;return"string"==typeof o?(u={name:o},N(f=i)&&"sid"in f||(l=i||{})):(e=>N(e)&&("domain"in e||"defaultState"in e||"name"in e))(o)&&(u=o,l=o.defaultState||{},a=o.domain),{hook:e,domain:a,defaultState:l,mainConfig:u,maybeConfig:c}}function k(...e){return(({domain:e,defaultState:t,hook:r,mainConfig:n,maybeConfig:o})=>{function i(e){return r(i,e,p()),null}let s=A({or:o,and:n}),u=`${e?`${e.compositeName.fullName}/`:""}${s.name||"gate"}`,c=(0,a.createEvent)({name:`${u}.set`,sid:s.sid?`${s.sid}|set`:void 0}),f=(0,a.createEvent)({name:`${u}.open`,sid:s.sid?`${s.sid}|open`:void 0}),d=(0,a.createEvent)({name:`${u}.close`,sid:s.sid?`${s.sid}|close`:void 0}),m=(0,a.createStore)(Boolean(0),{name:`${u}.status`,serialize:"ignore"}).on(f,(()=>Boolean(1))).on(d,(()=>Boolean(0))),h=(0,a.createStore)(t,{name:`${u}.state`,sid:s.sid}).on(c,((e,t)=>t)).on(f,((e,t)=>t)).reset(d);if(e){let{hooks:t}=e;(0,a.launch)({target:[t.store,t.store,t.event,t.event,t.event],params:[m,h,f,d,c]})}return i.open=f,i.close=d,i.status=m,i.state=h,i.set=c,l(`Gate:${u}`,i)})(w(d,e))}let _=e=>{throw Error(e)},x="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;const{useSyncExternalStore:M}=i,{useSyncExternalStoreWithSelector:C}=o,O=(e,t)=>t?t.getState(e):e.getState(),j=(e,t)=>e!==t,E=n.createContext(null);let{Provider:P}=E,N=e=>"object"==typeof e&&null!==e,A=(e,t={})=>(N(e)&&(A(e.or,t),(e=>{for(let a in e)n=a,(e=>void 0===e)(r=e[a])||"or"===n||"and"===n||(t[n]=r);var r,n})(e),A(e.and,t)),t)},798116:(e,t,r)=>{"use strict";function n(e,t){for(let r in e)t(e[r],r)}function a(e,t){e.forEach(t)}function o(e,t){if(!e)throw Error(t)}function i(e,t){let r=z(e).meta||{};fe={id:z(e).id,parent:fe,value:e,template:r.template||pe(),sidRoot:r.sidRoot||fe&&fe.sidRoot,meta:r};try{return t()}finally{de("region"),fe=B(fe)}}function s({node:e=[],from:t,source:r,parent:n=t||r,to:o,target:i,child:s=o||i,scope:l={},meta:u={},family:c={type:"regular"},regional:f}={}){let d=ye(n),p=ye(c.links),m=ye(c.owners),h=[];a(e,(e=>e&&re(h,e)));let y={id:le(),seq:h,next:ye(s),meta:u,scope:l,family:{type:c.type||"crosslink",links:p,owners:m}};return a(p,(e=>re(D(e),y))),a(m,(e=>re(I(e),y))),a(d,(e=>re(e.next,y))),f&&fe&&he(F(fe),[y]),y}function l(e,t,r){let n,o=Qe,i=null,s=He;if(e.target&&(t=e.params,r=e.defer,n=e.meta,o="page"in e?e.page:o,e.stack&&(i=e.stack),s=L(e)||s,e=e.target),s&&He&&s!==He&&(He=null),Array.isArray(e))for(let r=0;r<e.length;r++)We("pure",o,z(e[r]),i,t[r],s,n);else We("pure",o,z(e),i,t,s,n);if(r&&!Ye)return;let l,u,c,f,d,p,m={isRoot:Ye,currentPage:Qe,scope:He,isWatch:Je,isPure:Xe};Ye=0;e:for(;f=Ue();){let{idx:e,stack:t,type:r}=f;c=t.node,Qe=d=t.page,He=L(t),d?p=d.reg:He&&(p=He.reg);let n=!!d,o=!!He,i={fail:0,scope:c.scope};l=u=0;for(let a=e;a<c.seq.length&&!l;a++){let s=c.seq[a];if(s.order){let{priority:n,barrierID:o}=s.order,i=o?d?`${d.fullID}_${o}`:o:0;if(a!==e||r!==n){o?Ge.has(i)||(Ge.add(i),Ke(a,t,n,o)):Ke(a,t,n);continue e}o&&Ge.delete(i)}switch(s.type){case"mov":{let e,r=s.data;switch(r.from){case $:e=F(t);break;case"a":case"b":e=t[r.from];break;case"value":e=r.store;break;case"store":if(p&&!p[r.store.id])if(n){let e=tt(d,r.store.id);t.page=d=e,e?p=e.reg:o?(it(He,r.store,0,1,r.softRead),p=He.reg):p=void 0}else o&&it(He,r.store,0,1,r.softRead);e=Ie(p&&p[r.store.id]||r.store)}switch(r.to){case $:t.value=e;break;case"a":case"b":t[r.to]=e;break;case"store":nt(d,He,c,r.target).current=e}break}case"compute":let e=s.data;if(e.fn){Je="watch"===U(c,"op"),Xe=e.pure;let r=e.safe?(0,e.fn)(F(t),i.scope,t):st(i,e.fn,t);e.filter?u=!r:t.value=r,Je=m.isWatch,Xe=m.isPure}}l=i.fail||u}if(rt&&rt(t,i),!l){let e=F(t),r=L(t);if(a(c.next,(n=>{We("child",d,n,t,e,r)})),r){U(c,"needFxCounter")&&We("child",d,r.fxCount,t,e,r),U(c,"storeChange")&&We("child",d,r.storeChange,t,e,r),U(c,"warnSerialize")&&We("child",d,r.warnSerializeNode,t,e,r);let n=r.additionalLinks[c.id];n&&a(n,(n=>{We("child",d,n,t,e,r)}))}}}Ye=m.isRoot,Qe=m.currentPage,He=L(m)}function u(e,t="combine"){let r=t+"(",a="",o=0;return n(e,(e=>{o<25&&(null!=e&&(r+=a,r+=V(e)?K(e).fullName:e.toString()),o+=1,a=", ")})),r+")"}function c(e,t){let r,n,a=e;if(t){let a=K(t);0===e.length?(r=a.path,n=a.fullName):(r=a.path.concat([e]),n=0===a.fullName.length?e:a.fullName+"/"+e)}else r=0===e.length?[]:[e],n=e;return{shortName:a,fullName:n,path:r}}function f(e,t){let r=t?e:e[0];Se(r);let n=r.or,a=r.and;if(a){let r=t?a:a[0];if(ge(r)&&"and"in r){let r=f(a,t);e=r[0],n={...n,...r[1]}}else e=a}return[e,n]}function d(e,...t){let r=pe();if(r){let n=r.handlers[e];if(n)return n(r,...t)}}function p(e,t){let r=lt({or:t,and:"string"==typeof e?{name:e}:e}),n=(e,...t)=>(ne(!U(n,"derived"),"call of derived event","createEvent"),ne(!Xe,"unit call from pure function","operators like sample"),Qe?((e,t,r,n)=>{let a=Qe,o=null;if(t)for(o=Qe;o&&o.template!==t;)o=B(o);et(o);let i=e.create(r,n);return et(a),i})(n,a,e,t):n.create(e,t)),a=pe(),o=Object.assign(n,{graphite:s({meta:vt(r.actualOp||"event",n,r),regional:1}),create:e=>(l({target:n,params:e,scope:He}),e),watch:e=>yt(n,e),map:e=>bt(n,R,e,[$e()]),filter:e=>bt(n,"filter",e.fn?e:e.fn,[$e(Ce,1)]),filterMap:e=>bt(n,"filterMap",e,[$e(),Ae((e=>!be(e)),1)]),prepend(e){let t=p("* → "+n.shortName,{parent:B(n)});return d("eventPrepend",z(t)),mt(t,n,[$e()],"prepend",e),gt(n,t),t}});return null!=r&&r.domain&&r.domain.hooks.event(o),W(o,"id",o.graphite.id),de(o.graphite),o}function m(e,t,r,n){return ke(r,t,"first argument"),o(ve(n),"second argument should be a function"),ne(!U(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`),a(Array.isArray(r)?r:[r],(t=>{e.off(t),T(e).set(t,pt(St(t,e,"on",Me,n)))})),e}function h(e,t){let r=lt(t),n=De(e),i=p({named:"updates",derived:1});d("storeBase",n);let u=n.id,c={subscribers:new Map,updates:i,defaultState:e,stateRef:n,getState(){let e,t=n;if(Qe){let t=Qe;for(;t&&!t.reg[u];)t=B(t);t&&(e=t)}return!e&&He&&(it(He,n,1),e=He),e&&(t=e.reg[u]),Ie(t)},setState:e=>l({target:c,params:e,defer:1,scope:He}),reset:(...e)=>(a(e,(e=>m(c,".reset",e,(()=>c.defaultState)))),c),on:(e,t)=>m(c,".on",e,t),off(e){let t=T(c).get(e);return t&&(t(),T(c).delete(e)),c},map(e,t){let r,a;ge(e)&&(r=e,e=e.fn),ne(be(t),"second argument of store.map","updateFilter");let o=c.getState();pe()?a=null:be(o)||(a=e(o,t));let i=h(a,{name:`${c.shortName} → *`,derived:1,and:r}),s=St(c,i,R,xe,e);return qe(q(i),{type:R,fn:e,from:n}),q(i).noInit=1,d("storeMap",n,s),i},watch(e,t){if(!t||!V(e)){let t=yt(c,e);return d("storeWatch",n,e)||e(c.getState()),t}return o(ve(t),"second argument should be a function"),e.watch((e=>t(c.getState(),e)))}},f=vt("store",c,r),y=c.defaultConfig.updateFilter;c.graphite=s({scope:{state:n,fn:y},node:[Ae(((e,t,r)=>(r.scope&&!r.scope.reg[n.id]&&(r.b=1),e))),Re(n),Ae(((e,t,{a:r,b:n})=>!be(e)&&(e!==r||n)),1),y&&$e(xe,1),Ee({from:$,target:n})],child:i,meta:{...f,defaultState:e},regional:1}),W(c,"id",c.graphite.id),W(c,"rootStateRefId",u);let g=U(c,"serialize"),v=U(c,"derived"),b="ignore"===g,S=U(c,"sid");return S&&(W(c,"storeChange",1),n.sid=S),S||b||v||W(c,"warnSerialize",1),o(v||!be(e),"current state can't be undefined, use null instead"),he(c,[i]),null!=r&&r.domain&&r.domain.hooks.store(c),v||(c.reinit=p({named:"reinit"}),c.reset(c.reinit)),n.meta=c.graphite.meta,de(c.graphite),c}function y(...e){let t,r,n;[e,n]=f(e);let a,i,s,l=e[e.length-1];if(ve(l)?(r=e.slice(0,-1),t=l):r=e,1===r.length){let e=r[0];H(e)||(a=e,i=1)}if(!i&&(a=r,t)){s=1;let e=t;t=t=>e(...t)}return o(ge(a),"shape should be an object"),wt(Array.isArray(a),!s,a,n,t)}function g(){let e={};return e.req=new Promise(((t,r)=>{e.rs=t,e.rj=r})),e.req.catch((()=>{})),e}function v(e,t={}){let r=lt(ve(e)?{handler:e}:e,t),n=p(ve(e)?{handler:e}:e,{...t,actualOp:"effect"}),a=z(n);W(a,"op",n.kind="effect"),n.use=e=>(o(ve(e),".use argument should be a function"),m.scope.handler=e,n),n.use.getCurrent=()=>m.scope.handler;let i=n.finally=p({named:"finally",derived:1}),u=n.done=i.filterMap({named:"done",fn({status:e,params:t,result:r}){if("done"===e)return{params:t,result:r}}}),c=n.fail=i.filterMap({named:"fail",fn({status:e,params:t,error:r}){if("fail"===e)return{params:t,error:r}}}),f=n.doneData=u.map({named:"doneData",fn:({result:e})=>e}),d=n.failData=c.map({named:"failData",fn:({error:e})=>e}),m=s({scope:{handler:n.defaultConfig.handler||(()=>o(0,`no handler used in ${n.getType()}`))},node:[Ae(((e,t,r)=>{let a=t.handler,o=L(r);if(o){let e=o.handlers.unitMap.get(n)||o.handlers.sidMap[n.sid];e&&(a=e)}return e.handler=a,e}),0,1),Ae((({params:e,req:t,handler:r,args:n=[e]},a,o)=>{let s=_t(o),l=xt(e,t,1,i,o,s),u=xt(e,t,0,i,o,s),[c,f]=kt(r,u,n);c&&(ge(f)&&ve(f.then)?f.then(l,u):l(f))}),0,1)],meta:{op:"fx",fx:"runner"}});a.scope.runner=m,re(a.seq,Ae(((e,{runner:t},r)=>{let n=B(r)?{params:e,req:{rs(e){},rj(e){}}}:e;return r.meta||(r.meta={fxID:ue()}),l({target:t,params:n,defer:1,scope:L(r),meta:r.meta}),n.params}),0,1)),n.create=e=>{let t=g(),r={params:e,req:t};if(He&&!Je){let e=He;t.req.finally((()=>{Ze(e)})).catch((()=>{}))}return l({target:n,params:r,scope:He}),t.req};let y=n.inFlight=h(0,{serialize:"ignore",named:(U(n,"name")||n.graphite.id)+".inFlight"}).on(n,(e=>e+1)).on(i,(e=>e-1)).map({fn:e=>e,named:"inFlight"});W(i,"needFxCounter","dec"),W(n,"needFxCounter",1);let v=n.pending=y.map({fn:e=>e>0,named:"pending"});return he(n,[i,u,c,f,d,v,y]),null!=r&&r.domain&&r.domain.hooks.effect(n),n}function b(e){let t;[e,t]=f(e,1);let{source:r,effect:n,mapParams:a}=e,o=v(e,t);W(o,"attached",1);let i,{runner:s}=z(o).scope,u=Ae(((e,t,n)=>{let i,{params:s,req:u,handler:c}=e,f=o.finally,d=_t(n),p=xt(s,u,0,f,n,d),m=n.a,h=J(c),y=1;if(a?[y,i]=kt(a,p,[s,m]):i=r&&h?m:s,y){if(!h)return e.args=[m,i],1;l({target:c,params:{params:i,req:{rs:xt(s,u,1,f,n,d),rj:p}},page:n.page,defer:1,meta:n.meta})}}),1,1);if(r){let e;H(r)?(e=r,he(e,[o])):(e=y(r),he(o,[e])),i=[Re(q(e)),u]}else i=[u];s.seq.splice(1,0,...i),o.use(n);let d=B(n);return d&&(Object.assign(K(o),c(o.shortName,d)),o.defaultConfig.parent=d),gt(n,o,"effect"),o}function S(...e){let[[t,r],a]=f(e),o={};return n(r,((e,r)=>{let n=o[r]=p(r,{parent:B(t),config:a});t.on(n,e),gt(t,n)})),o}function w(e,t){let r=lt({or:t,and:"string"==typeof e?{name:e}:e}),o=s({family:{type:"domain"},regional:1,parent:(null==r?void 0:r.domain)||(null==r?void 0:r.parent)}),i={history:{},graphite:o,hooks:{}};o.meta=vt("domain",i,{parent:(null==r?void 0:r.domain)||(null==r?void 0:r.parent),or:r}),n({Event:p,Effect:v,Store:h,Domain:w},((e,t)=>{let r=t.toLowerCase(),n=p({named:`on${t}`});i.hooks[r]=n;let o=new Set;i.history[`${r}s`]=o,n.create=e=>(l(n,e),e),re(z(n).seq,Ae(((e,t,r)=>(r.scope=null,e)))),n.watch((e=>{he(i,[e]),o.add(e),e.ownerSet||(e.ownerSet=o),B(e)||(e.parent=i)})),he(i,[n]),i[`onCreate${t}`]=e=>(a(o,e),n.watch(e)),i[`create${t}`]=i[r]=(t,r)=>{let a=lt({and:r,or:t});return null!=a&&a.domain?e(t,r):n(e(t,{parent:i,or:a}))}}));let u=B(i);return u&&n(i.hooks,((e,t)=>mt(e,u.hooks[t]))),null!=r&&r.domain&&r.domain.hooks.domain(i),i}function k(e,t){ke(e,"merge","first argument");let r=p({name:u(e,"merge"),derived:1,and:t});return mt(e,r,[],"merge"),r}function _(e,t){let r=0;return a(Ct,(n=>{n in e&&(o(null!=e[n],Ot(t,n)),r=1)})),r}function x(...e){let t,r,n,a,[[o,i,s],l]=f(e),u=1;return be(i)&&ge(o)&&_(o,"sample")&&(i=o.clock,s=o.fn,u=!o.greedy,a=o.filter,t=o.target,r=o.name,n=o.sid,o=o.source),jt("sample",i,o,a,t,s,r,l,u,1,0,n)}function M(...e){let[[t,r],n]=f(e);return r||(r=t,t=r.source),_(r,"guard"),jt("guard",r.clock,t,r.filter,r.target,null,r.name,n,!r.greedy,0,1)}function C(e,t,r){if(H(e))return ne(0,"restore($store)"),e;if(Y(e)||J(e)){let n=B(e),a=h(t,{parent:n,name:e.shortName,and:r});return mt(J(e)?e.doneData:e,a),n&&n.hooks.store(a),a}let a=Array.isArray(e)?[]:{};return n(e,((e,t)=>a[t]=H(e)?e:h(e,{name:t}))),a}function O(...e){let t,r,a="split",[[i,l],u]=f(e),c=!l;c&&(t=i.cases,l=i.match,r=i.clock,i=i.source);let m=H(l),h=!V(l)&&ve(l),y=!m&&!h&&ge(l);o(V(i),"source must be a unit"),t||(t={}),c?n(t,((e,t)=>_e(a,e,`cases.${t}`))):(o(y,"match should be an object"),n(l,((e,r)=>t[r]=p({derived:1,named:`cases.${r}`,and:u}))),t.__=p({derived:1,named:"cases.__",and:u}));let g,v=new Set([].concat(i,r||[],Object.values(t))),b=Object.keys(m||h?t:l);if(m||h)m&&v.add(l),g=[m&&Re(q(l),0,1),Pe({safe:m,filter:1,pure:!m,fn(e,t,r){let n=String(m?r.a:l(e));Nt(t,ee(b,n)?n:"__",e,r)}})];else if(y){let e=De({});e.type="shape";let t,r=[];n(l,((n,a)=>{if(V(n)){t=1,re(r,a),v.add(n);let o=mt(n,[],[Re(e),Ae(((e,t,{a:r})=>r[a]=e))]);if(H(n)){e.current[a]=n.getState();let t=q(n);qe(e,{from:t,field:a,type:"field"}),d("splitMatchStore",t,o)}}})),t&&d("splitBase",e),g=[t&&Re(e,0,1),$e(((e,t,n)=>{for(let a=0;a<b.length;a++){let o=b[a];if(ee(r,o)?n.a[o]:l[o](e))return void Nt(t,o,e,n)}Nt(t,"__",e,n)}),1)]}else o(0,"expect match to be unit, function or object");let S=s({meta:{op:a},parent:r?[]:i,scope:t,node:g,family:{owners:Array.from(v)},regional:1});if(r&&jt(a,r,i,null,S,null,a,u,0,0,0),!c)return t}function j(e,{scope:t,params:r}={}){if(!V(e))return Promise.reject(new Error("first argument should be unit"));if(!(J(e)||Y(e)||H(e)||Q(e)))return Promise.reject(new Error("first argument accepts only effects, events, stores or scopes"));Q(e)&&(t=e);let n=g();n.parentFork=He;let{fxCount:a}=t;re(a.scope.defers,n);let o=[],i=[];return Q(e)||(re(o,e),re(i,J(e)?{params:r,req:{rs(e){n.value={status:"done",value:e}},rj(e){n.value={status:"fail",value:e}}}}:r)),re(o,a),re(i,null),l({target:o,params:i,scope:t}),n.req}function E(e,t){let r=Array.isArray(e)?new Map(e):e,n=new Map,i=0;if(r instanceof Map){let e={};return a(r,((r,a)=>{o(V(a),"Map key should be a unit"),t&&t(a,r),a.sid&&(a.sid in e&&(i=1),e[a.sid]=r),n.set(a,r)})),{sidMap:e,unitMap:n,hasSidDoubles:i}}return{sidMap:r,unitMap:n}}function P(e,t){let r,n=e;X(e)&&(r=e,n=t);let i=(e=>{let t=s({scope:{defers:[],inFlight:0,fxID:0},node:[Ae(((e,t,r)=>{B(r)?"dec"===U(B(r).node,"needFxCounter")?t.inFlight-=1:(t.inFlight+=1,t.fxID+=1):t.fxID+=1})),Pe({priority:"sampler",batch:1}),Ae(((e,t)=>{let{defers:r,fxID:n}=t;t.inFlight>0||0===r.length||Promise.resolve().then((()=>{t.fxID===n&&a(r.splice(0,r.length),(e=>{Ze(e.parentFork),e.rs(e.value)}))}))}),0,1)]}),r=s({node:[Ae(((e,t,r)=>{let n=B(r);if(n){let t=n.node;if(!U(t,"isCombine")||B(n)&&"combine"!==U(B(n).node,"op")){let n=L(r),a=t.scope.state.id,o=U(t,"sid");n.sidIdMap[o]=a,n.values.sidMap[o]=e;let i=U(t,"serialize");i&&n.sidSerializeSettings.set(o,"ignore"===i?{ignore:1}:{ignore:0,write:i.write})}}}))]}),n=s({node:[Ae(((e,t,r)=>{let n=L(r);if(n){let e=B(r);e&&(!U(e.node,"isCombine")||B(e)&&"combine"!==U(B(e).node,"op"))&&(n.warnSerialize=1)}}))]}),o={cloneOf:e,reg:{},values:{sidMap:{},idMap:{}},sidIdMap:{},sidSerializeSettings:new Map,getState(e){if("current"in e)return nt(Qe,o,null,e).current;let t=z(e);return nt(Qe,o,t,t.scope.state,1).current},kind:"scope",graphite:s({family:{type:"domain",links:[t,r,n]},meta:{unit:"fork"},scope:{forkInFlightCounter:t}}),additionalLinks:{},handlers:{sidMap:{},unitMap:new Map},fxCount:t,storeChange:r,warnSerializeNode:n,activeEffects:[]};return o})(r);if(n){let e=n.scope;if(e){let t=e.activeEffects;e.activeEffects=[],i.activeEffects=t,a(t,(e=>e.ref=i))}if(n.values){let{sidMap:e,unitMap:t,hasSidDoubles:r}=E(n.values,(e=>o(H(e),"Values map can contain only stores as keys")));Object.assign(i.values.sidMap,e),a(t,((e,t)=>{i.values.idMap[t.stateRef.id]=e})),i.fromSerialize=!(Array.isArray(n.values)||n.values instanceof Map),i.hasSidDoubles=r}n.handlers&&(i.handlers=E(n.handlers,(e=>o(J(e),"Handlers map can contain only effects as keys"))))}return i}function N(e,{scope:t,safe:r}={}){o(t||He||r,"scopeBind cannot be called outside of forked .watch");let n=t||He;return J(e)?t=>{let r=g();return l({target:e,params:{params:t,req:r},scope:n}),r.req}:t=>(l({target:e,params:t,scope:n}),t)}r.d(t,{allSettled:()=>j,attach:()=>b,clearNode:()=>dt,combine:()=>y,createApi:()=>S,createDomain:()=>w,createEffect:()=>v,createEvent:()=>p,createNode:()=>s,createStore:()=>h,fork:()=>P,forward:()=>ht,guard:()=>M,is:()=>Z,launch:()=>l,merge:()=>k,restore:()=>C,sample:()=>x,scopeBind:()=>N,setGraphInspector:()=>ce,setInspector:()=>at,split:()=>O,step:()=>ze,withRegion:()=>i});let A="undefined"!=typeof Symbol&&Symbol.observable||"@@observable",R="map",$="stack",z=e=>e.graphite||e,D=e=>e.family.owners,I=e=>e.family.links,q=e=>e.stateRef,F=e=>e.value,T=e=>e.subscribers,B=e=>e.parent,L=e=>e.scope,U=(e,t)=>z(e).meta[t],W=(e,t,r)=>z(e).meta[t]=r,K=e=>e.compositeName,V=e=>(ve(e)||ge(e))&&"kind"in e;const G=e=>t=>V(t)&&t.kind===e;let H=G("store"),Y=G("event"),J=G("effect"),X=G("domain"),Q=G("scope");var Z={__proto__:null,unit:V,store:H,event:Y,effect:J,domain:X,scope:Q,attached:e=>J(e)&&1==U(e,"attached")};let ee=(e,t)=>e.includes(t),te=(e,t)=>{let r=e.indexOf(t);-1!==r&&e.splice(r,1)},re=(e,t)=>e.push(t),ne=(e,t,r)=>!e&&console.error(`${t} is deprecated${r?`, use ${r} instead`:""}`);const ae=()=>{let e=0;return()=>""+ ++e};let oe,ie=ae(),se=ae(),le=ae(),ue=ae(),ce=e=>{oe=e},fe=null,de=e=>{oe&&oe(e,fe)},pe=()=>fe&&fe.template,me=e=>(e&&fe&&fe.sidRoot&&(e=`${fe.sidRoot}|${e}`),e),he=(e,t)=>{let r=z(e);a(t,(e=>{let t=z(e);"domain"!==r.family.type&&(t.family.type="crosslink"),re(D(t),r),re(I(r),t)}))},ye=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(z),ge=e=>"object"==typeof e&&null!==e,ve=e=>"function"==typeof e,be=e=>void 0===e,Se=e=>o(ge(e)||ve(e),"expect first argument be an object");const we=(e,t,r,n)=>o(!(!ge(e)&&!ve(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${r} to be a unit (store, event or effect)${n}`);let ke=(e,t,r)=>{Array.isArray(e)?a(e,((e,n)=>we(e,t,`${n} item of ${r}`,""))):we(e,t,r," or array of units")},_e=(e,t,r="target")=>a(ye(t),(t=>ne(!U(t,"derived"),`${e}: derived unit in "${r}"`,"createEvent/createStore"))),xe=(e,{fn:t},{a:r})=>t(e,r),Me=(e,{fn:t},{a:r})=>t(r,e),Ce=(e,{fn:t})=>t(e);const Oe=(e,t,r,n)=>{let a={id:se(),type:e,data:t};return r&&(a.order={priority:r},n&&(a.order.barrierID=++je)),a};let je=0,Ee=({from:e="store",store:t,target:r,to:n=(r?"store":$),batch:a,priority:o})=>Oe("mov",{from:e,store:t,to:n,target:r},o,a),Pe=({fn:e,batch:t,priority:r,safe:n=0,filter:a=0,pure:o=0})=>Oe("compute",{fn:e,safe:n,filter:a,pure:o},r,t),Ne=({fn:e})=>Pe({fn:e,priority:"effect"}),Ae=(e,t,r)=>Pe({fn:e,safe:1,filter:t,priority:r&&"effect"}),Re=(e,t,r)=>Ee({store:e,to:t?$:"a",priority:r&&"sampler",batch:1}),$e=(e=Ce,t)=>Pe({fn:e,pure:1,filter:t}),ze={mov:Ee,compute:Pe,filter:({fn:e,pure:t})=>Pe({fn:e,filter:1,pure:t}),run:Ne},De=e=>({id:se(),current:e}),Ie=({current:e})=>e,qe=(e,t)=>{e.before||(e.before=[]),re(e.before,t)},Fe=null;const Te=(e,t)=>{if(!e)return t;if(!t)return e;let r;return(e.v.type===t.v.type&&e.v.id>t.v.id||Ve(e.v.type)>Ve(t.v.type))&&(r=e,e=t,t=r),r=Te(e.r,t),e.r=e.l,e.l=r,e},Be=[];let Le=0;for(;Le<6;)re(Be,{first:null,last:null,size:0}),Le+=1;const Ue=()=>{for(let e=0;e<6;e++){let t=Be[e];if(t.size>0){if(3===e||4===e){t.size-=1;let e=Fe.v;return Fe=Te(Fe.l,Fe.r),e}1===t.size&&(t.last=null);let r=t.first;return t.first=r.r,t.size-=1,r.v}}},We=(e,t,r,n,a,o,i)=>Ke(0,{a:null,b:null,node:r,parent:n,value:a,page:t,scope:o,meta:i},e),Ke=(e,t,r,n=0)=>{let a=Ve(r),o=Be[a],i={v:{idx:e,stack:t,type:r,id:n},l:null,r:null};3===a||4===a?Fe=Te(Fe,i):(0===o.size?o.first=i:o.last.r=i,o.last=i),o.size+=1},Ve=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},Ge=new Set;let He,Ye=1,Je=0,Xe=0,Qe=null,Ze=e=>{He=e},et=e=>{Qe=e};const tt=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=B(e);if(e)return e}return null};let rt,nt=(e,t,r,n,a)=>{let o=tt(e,n.id);return o?o.reg[n.id]:t?(it(t,n,a),t.reg[n.id]):n},at=e=>{rt=e};const ot=e=>e;let it=(e,t,r,n,o)=>{var i;let s=e.reg,l=t.sid,u=null==t||null===(i=t.meta)||void 0===i?void 0:i.serialize,c=e.fromSerialize&&"ignore"!==u&&(null==u?void 0:u.read)||ot;if(s[t.id])return;let f={id:t.id,current:t.current,meta:t.meta};if(f.id in e.values.idMap)f.current=e.values.idMap[f.id];else if(l&&l in e.values.sidMap&&!(l in e.sidIdMap))f.current=c(e.values.sidMap[l]);else if(t.before&&!o){let o=0,i=r||!t.noInit||n;a(t.before,(t=>{switch(t.type){case R:{let a=t.from;if(a||t.fn){a&&it(e,a,r,n);let o=a&&s[a.id].current;i&&(f.current=t.fn?t.fn(o):o)}break}case"field":o||(o=1,f.current=Array.isArray(f.current)?[...f.current]:{...f.current}),it(e,t.from,r,n),i&&(f.current[t.field]=s[s[t.from.id].id].current)}}))}l&&(e.sidIdMap[l]=t.id),s[t.id]=f};const st=(e,t,r)=>{try{return t(F(r),e.scope,r)}catch(t){console.error(t),e.fail=1,e.failReason=t}};let lt=(e,t={})=>(ge(e)&&(lt(e.or,t),n(e,((e,r)=>{be(e)||"or"===r||"and"===r||(t[r]=e)})),lt(e.and,t)),t);const ut=(e,t)=>{te(e.next,t),te(D(e),t),te(I(e),t)},ct=(e,t,r)=>{let n;e.next.length=0,e.seq.length=0,e.scope=null;let a=I(e);for(;n=a.pop();)ut(n,e),(t||r&&"sample"!==U(e,"op")||"crosslink"===n.family.type)&&ct(n,t,"on"!==U(n,"op")&&r);for(a=D(e);n=a.pop();)ut(n,e),r&&"crosslink"===n.family.type&&ct(n,t,"on"!==U(n,"op")&&r)},ft=e=>e.clear();let dt=(e,{deep:t}={})=>{let r=0;if(e.ownerSet&&e.ownerSet.delete(e),H(e))ft(T(e));else if(X(e)){r=1;let t=e.history;ft(t.events),ft(t.effects),ft(t.stores),ft(t.domains)}ct(z(e),!!t,r)},pt=e=>{let t=()=>dt(e);return t.unsubscribe=t,t},mt=(e,t,r,n,a)=>s({node:r,parent:e,child:t,scope:{fn:a},meta:{op:n},family:{owners:[e,t],links:t},regional:1}),ht=e=>{let t="forward",[{from:r,to:n},a]=f(e,1);return ke(r,t,'"from"'),ke(n,t,'"to"'),_e(t,n,"to"),pt(s({parent:r,child:n,meta:{op:t,config:a},family:{},regional:1}))},yt=(e,t)=>(o(ve(t),".watch argument should be a function"),pt(s({scope:{fn:t},node:[Ne({fn:Ce})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),gt=(e,t,r="event")=>{B(e)&&B(e).hooks[r](t)},vt=(e,t,r)=>{let n=lt(r),a="domain"===e,o=ie(),{sid:i=null,named:s=null,domain:l=null,parent:u=l}=n,f=s||n.name||(a?"":o),d=c(f,u),p={op:t.kind=e,name:t.shortName=f,sid:t.sid=me(i),named:s,unitId:t.id=o,serialize:n.serialize,derived:n.derived,config:n};if(t.parent=u,t.compositeName=d,t.defaultConfig=n,t.thru=e=>(ne(0,"thru","js pipe"),e(t)),t.getType=()=>d.fullName,!a){t.subscribe=e=>(Se(e),t.watch(ve(e)?e:t=>e.next&&e.next(t))),t[A]=()=>t;let e=pe();e&&(p.nativeTemplate=e)}return p};const bt=(e,t,r,n)=>{let a;ge(r)&&(a=r,r=r.fn);let o=p({name:`${e.shortName} → *`,derived:1,and:a});return mt(e,o,n,t,r),o},St=(e,t,r,n,a)=>{let o=q(t),i=Ee({store:o,to:"a",priority:"read"});r===R&&(i.data.softRead=1);let s=[i,$e(n)];return d("storeOnMap",o,s,H(e)&&q(e)),mt(e,t,s,r,a)},wt=(e,t,r,a,i)=>{let s=e?e=>[...e]:e=>({...e}),l=e?[]:{},c=s(l),f=De(c),p=De(1);f.type=e?"list":"shape",f.noInit=1,d("combineBase",f,p);let m=h(c,{name:u(r),derived:1,and:a}),y=q(m);y.noInit=1,W(m,"isCombine",1);let g=Re(f);g.order={priority:"barrier"};let v=[Ae(((e,t,r)=>(r.scope&&!r.scope.reg[f.id]&&(r.c=1),e))),g,Ee({store:p,to:"b"}),Ae(((e,{key:r},n)=>{if(n.c||e!==n.a[r])return t&&n.b&&(n.a=s(n.a)),n.a[r]=e,1}),1),Ee({from:"a",target:f}),Ee({from:"value",store:0,target:p}),Ee({from:"value",store:1,target:p,priority:"barrier",batch:1}),Re(f,1),i&&$e()];return n(r,((e,t)=>{if(!H(e))return o(!V(e)&&!be(e),`combine expects a store in a field ${t}`),void(c[t]=l[t]=e);l[t]=e.defaultState,c[t]=e.getState();let r=mt(e,m,v,"combine",i);r.scope.key=t;let n=q(e);qe(f,{type:"field",field:t,from:n}),d("combineField",n,r)})),m.defaultShape=r,qe(y,{type:R,from:f,fn:i}),pe()||(m.defaultState=i?y.current=i(c):l),m};let kt=(e,t,r)=>{try{return[1,e(...r)]}catch(e){return t(e),[0,null]}},_t=e=>{let t=L(e),r={ref:t};return t&&re(t.activeEffects,r),r},xt=(e,t,r,n,a,o)=>i=>{o.ref&&te(o.ref.activeEffects,o),l({target:[n,Mt],params:[r?{status:"done",params:e,result:i}:{status:"fail",params:e,error:i},{value:i,fn:r?t.rs:t.rj}],defer:1,page:a.page,scope:o.ref,meta:a.meta})};const Mt=s({node:[Ne({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}}),Ct=["source","clock","target"],Ot=(e,t)=>e+`: ${t} should be defined`;let jt=(e,t,r,n,a,i,s,l,u,c,f,m)=>{let g=!!a;o(!be(r)||!be(t),Ot(e,"either source or clock"));let v=0;be(r)?v=1:V(r)||(r=y(r)),be(t)?t=r:(ke(t,e,"clock"),Array.isArray(t)&&(t=k(t))),v&&(r=t),l||s||(s=r.shortName);let b="none";(f||n)&&(V(n)?b="unit":(o(ve(n),"`filter` should be function or unit"),b="fn")),a?(ke(a,e,"target"),_e(e,a)):"none"===b&&c&&H(r)&&H(t)?a=h(i?i(Ie(q(r)),Ie(q(t))):Ie(q(r)),{name:s,sid:m,or:l}):(a=p({name:s,derived:1,or:l}),d("sampleTarget",z(a)));let S=De(),w=[];if("unit"===b){let[r,o]=Pt(n,a,t,S,e);w=[...Et(o),...Et(r)]}let[_,x]=Pt(r,a,t,S,e),M=mt(t,a,[d("sampleSourceLoader"),Ee({from:$,target:S}),...Et(x),Re(_,1,u),...w,Re(S),"fn"===b&&$e(((e,t,{a:r})=>n(e,r)),1),i&&$e(xe),d("sampleSourceUpward",g)],e,i);return he(r,[M]),Object.assign(M.meta,l,{joint:1}),a};const Et=e=>[Re(e),Ae(((e,t,{a:r})=>r),1)],Pt=(e,t,r,n,a)=>{let o=H(e),i=o?q(e):De(),l=De(o);return o||s({parent:e,node:[Ee({from:$,target:i}),Ee({from:"value",store:1,target:l})],family:{owners:[e,t,r],links:t},meta:{op:a},regional:1}),d("sampleSource",l,i,n),[i,l]},Nt=(e,t,r,n)=>{let a=e[t];a&&l({target:a,params:Array.isArray(a)?a.map((()=>r)):r,defer:1,stack:n})}},57746:(e,t,r)=>{"use strict";r.d(t,{inspect:()=>a});var n=r(798116);function a(e){return c.add(e),o((()=>{c.delete(e)}))}function o(e){let t=()=>e();return t.unsubscribe=t,t}function i(e){let{node:t}=e;return s(t)}function s(e){let{meta:t,id:r}=e,n=(e=>e.config?e.config.loc:e.loc)(t),{sid:a,name:o,op:i}=t;return{meta:t,id:r,sid:a,name:o,kind:i,loc:n,derived:t.derived}}function l(e){let t=[],r=e.parent;for(;r;)t.push({type:"update",value:r.value,stack:r.meta||{},...i(r)}),r=r.parent;return t}function u(e){if(!e)return;let{parent:t,meta:r,id:n}=e,a=u(t)||void 0;if("factory"===r.type){let{sid:e,name:t,loc:o,method:i}=r;return{type:"factory",id:n,region:a,meta:r,sid:e,name:t,loc:o,method:i}}return{type:"region",id:n,region:a,meta:r}}const c=new Set;(0,n.setInspector)(((e,t)=>{let{scope:r}=e;c.forEach((n=>{n.scope!==r&&(n.scope||r)||n.fn({type:t.fail?"error":"update",value:e.value,error:t.fail?t.failReason:void 0,stack:e.meta||{},trace:n.trace?l(e):[],...i(e)})}))}));const f=new Set;(0,n.setGraphInspector)(((e,t)=>{let r;r="region"===e?u(t):((e,t)=>{let r=s(e);return{type:"unit",region:u(t),...r}})(e,t),r&&f.forEach((e=>{e.fn(r)}))}))}}]);try{stManager.done("dist/state-management.83aaf822639d23168b5c.js")}catch(e){}